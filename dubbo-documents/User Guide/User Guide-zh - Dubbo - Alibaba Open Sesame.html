<!DOCTYPE html>
<!-- saved from url=(0033)http://dubbo.io/User+Guide-zh.htm -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>User Guide-zh - Dubbo - Alibaba Open Sesame</title>
    
        

                        
    
                        
    
    
            <meta http-equiv="X-UA-Compatible" content="IE=8">
<meta charset="UTF-8">

<!-- Deprecated since 3.4. To be removed in a future version of Confluence; use AJS.Confluence.getContextPath() -->
<meta id="confluence-context-path" name="confluence-context-path" content="/wiki">
<meta name="ajs-context-path" content="/wiki">
<meta name="ajs-version-number" content="3.5.9">
<meta name="ajs-build-number" content="2166">
<meta id="atlassian-token" name="atlassian-token" content="c116db80711201b36e2067aa83f3b044c2d5a30e">
<meta id="confluence-space-key" name="confluence-space-key" content="dubbo">
<meta name="ajs-remote-user" content="">
<meta name="ajs-static-resource-url-prefix" content="/wiki/s/en/2166/34/_">

<script type="text/javascript" async="" src="http://www/.google-analytics.com/ga.js"></script><script type="text/javascript">
    // Deprecated global variables. To be removed in a future version of Confluence.
    var contextPath = '/wiki';
</script>

    

<!-- include system css resources -->
<link type="text/css" rel="stylesheet" href="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/batch.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/26/_/download/superbatch/css/batch.css" media="all">
<!--[if IE]>
<link type="text/css" rel="stylesheet" href="batch.css-ieonly=true.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/26/_/download/superbatch/css/batch.css?ieonly=true" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/batch.css-media=print.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/26/_/download/superbatch/css/batch.css?media=print" media="print">
<link type="text/css" rel="stylesheet" href="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/com.atlassian.confluence.ext.newcode-macro-plugin-syntaxhighlighter.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.9.10/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter.css" media="all">
<link type="text/css" rel="stylesheet" href="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/com.atlassian.confluence.ext.newcode-macro-plugin-sh-theme-confluence.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.9.10/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:sh-theme-confluence/com.atlassian.confluence.ext.newcode-macro-plugin:sh-theme-confluence.css" media="all">
<link type="text/css" rel="stylesheet" href="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/confluence-forms.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.0/_/download/resources/confluence.web.resources:aui-forms/confluence-forms.css" media="all">
<!--[if IE]>
<link type="text/css" rel="stylesheet" href="confluence.web.resources-aui-forms.css-ieonly=true.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.0/_/download/batch/confluence.web.resources:aui-forms/confluence.web.resources:aui-forms.css?ieonly=true" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/com.atlassian.confluence.plugins.share-page-mail-page-resources.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.8/_/download/batch/com.atlassian.confluence.plugins.share-page:mail-page-resources/com.atlassian.confluence.plugins.share-page:mail-page-resources.css" media="all">
<link type="text/css" rel="stylesheet" href="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/confluence.web.resources-view-comment.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.0/_/download/batch/confluence.web.resources:view-comment/confluence.web.resources:view-comment.css" media="all">
<!--[if IE]>
<link type="text/css" rel="stylesheet" href="confluence.web.resources-view-comment.css-ieonly=true.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.0/_/download/batch/confluence.web.resources:view-comment/confluence.web.resources:view-comment.css?ieonly=true" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/confluence.macros.advanced-fancy-box.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.16/_/download/batch/confluence.macros.advanced:fancy-box/confluence.macros.advanced:fancy-box.css" media="all">
<link type="text/css" rel="stylesheet" href="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/com.atlassian.confluence.plugins.drag-and-drop-support.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.0.16/_/download/batch/com.atlassian.confluence.plugins.drag-and-drop:support/com.atlassian.confluence.plugins.drag-and-drop:support.css" media="all">
<link type="text/css" rel="stylesheet" href="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/com.atlassian.plugins.shortcuts.atlassian-shortcuts-module-shortcuts.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/0.8/_/download/batch/com.atlassian.plugins.shortcuts.atlassian-shortcuts-module:shortcuts/com.atlassian.plugins.shortcuts.atlassian-shortcuts-module:shortcuts.css" media="all">
<link type="text/css" rel="stylesheet" href="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/com.atlassian.confluence.keyboardshortcuts-confluence-keyboard-shortcuts.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/3.5.9/_/download/batch/com.atlassian.confluence.keyboardshortcuts:confluence-keyboard-shortcuts/com.atlassian.confluence.keyboardshortcuts:confluence-keyboard-shortcuts.css" media="all">

<!-- end system css resources -->

    <link rel="stylesheet" href="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/combined.css-spaceKey=dubbo.css" tppabs="http://10.20.160.198/wiki/s/en/2166/34/3/_/styles/combined.css?spaceKey=dubbo" type="text/css">

    <meta name="confluence-request-time" content="1392025180116">

<meta name="loggedInUsername" content="">
            <meta name="ajs-keyboardshortcut-hash" content="bf02a79603372a43d395a0a429bdf66">
    <!-- Deprecated since 3.4. To be removed in a future version of Confluence; use atl.header -->
            <script type="text/x-template" title="share-content-popup">
    <form action="#" method="post" class="aui share-content-popup">
        <fieldset>
            <label for="users">User name or email</label>
            <div class="autocomplete-user-target">
                <input class="text autocomplete-sharepage" id="users" data-max="10" data-dropdown-target=".autocomplete-user-target" data-none-message="No matching user or email found"/>
            </div>
            <ol class="recipients">
            </ol>
            <div><label for="note">Note</label></div>
            <textarea class="textarea" id="note" placeholder="Add an optional note"/>
        </fieldset>
        <div class="button-panel">
            <div class="progress-messages-icon"></div>
            <div class="progress-messages">
            </div>
            <input class="button submit" type="submit" value="Share" disabled/>
            <a class="close-dialog" href="#">Cancel</a>
        </div>
    </form>
</script>

<script type="text/x-template" title="share-content-popup-recipient-username">
    <li data-username="{username}" style="display: none">
        <span>
            <img src="{thumbnailLink.href}" title="{title}">
            <span>{title}</span>
            <span class="remove-recipient"/>
        </span>
    </li>
</script>

<script type="text/x-template" title="share-content-popup-recipient-email">
    <li data-email="{email}" style="display: none">
        <span>
            <img src="{icon}" title="{email}">
            <span>{email}</span>
            <span class="remove-recipient"/>
        </span>
    </li>
</script>
            <meta name="ajs-use-keyboard-shortcuts" content="true">
    
    <link rel="shortcut icon" href="http://dubbo.io/wiki/favicon.ico">
    <link rel="icon" type="image/png" href="http://dubbo.io/wiki/s/en/2166/34/_/images/logo/confluence_16.png">

<link rel="search" type="application/opensearchdescription+xml" href="http://dubbo.io/wiki/opensearch/osd.action" title="Alibaba Open Sesame">

        <!-- include system javascript resources -->
                        
    
    <script type="text/javascript" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/batch.js" tppabs="http://10.20.160.198/wiki/s/en/2166/34/26/_/download/superbatch/js/batch.js"></script>
<script type="text/javascript" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/com.atlassian.confluence.ext.newcode-macro-plugin-syntaxhighlighter.js" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.9.10/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter.js"></script>
<script type="text/javascript" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/com.atlassian.confluence.ext.newcode-macro-plugin-syntaxhighlighter-brushes.js" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.9.10/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-brushes/com.atlassian.confluence.ext.newcode-macro-plugin:syntaxhighlighter-brushes.js"></script>
<script type="text/javascript" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/com.atlassian.confluence.plugins.share-page-mail-page-resources.js" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.8/_/download/batch/com.atlassian.confluence.plugins.share-page:mail-page-resources/com.atlassian.confluence.plugins.share-page:mail-page-resources.js"></script>
<script type="text/javascript" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/confluence.macros.advanced-fancy-box.js" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.16/_/download/batch/confluence.macros.advanced:fancy-box/confluence.macros.advanced:fancy-box.js"></script>
<script type="text/javascript" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/confluence.macros.advanced-thumbnail-images.js" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.16/_/download/batch/confluence.macros.advanced:thumbnail-images/confluence.macros.advanced:thumbnail-images.js"></script>
<script type="text/javascript" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/com.atlassian.confluence.plugins.drag-and-drop-support.js" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.0.16/_/download/batch/com.atlassian.confluence.plugins.drag-and-drop:support/com.atlassian.confluence.plugins.drag-and-drop:support.js"></script>
<script type="text/javascript" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/com.atlassian.confluence.plugins.drag-and-drop-drag-and-drop-for-view-content.js" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.0.16/_/download/batch/com.atlassian.confluence.plugins.drag-and-drop:drag-and-drop-for-view-content/com.atlassian.confluence.plugins.drag-and-drop:drag-and-drop-for-view-content.js"></script>
<script type="text/javascript" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/com.atlassian.confluence.plugins.doctheme-splitter.js" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.9/_/download/batch/com.atlassian.confluence.plugins.doctheme:splitter/com.atlassian.confluence.plugins.doctheme:splitter.js"></script>
<script type="text/javascript" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/com.atlassian.plugins.shortcuts.atlassian-shortcuts-module-shortcuts.js" tppabs="http://10.20.160.198/wiki/s/en/2166/34/0.8/_/download/batch/com.atlassian.plugins.shortcuts.atlassian-shortcuts-module:shortcuts/com.atlassian.plugins.shortcuts.atlassian-shortcuts-module:shortcuts.js"></script>
<script type="text/javascript" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/com.atlassian.confluence.keyboardshortcuts-confluence-keyboard-shortcuts.js" tppabs="http://10.20.160.198/wiki/s/en/2166/34/3.5.9/_/download/batch/com.atlassian.confluence.keyboardshortcuts:confluence-keyboard-shortcuts/com.atlassian.confluence.keyboardshortcuts:confluence-keyboard-shortcuts.js"></script>
<script type="text/javascript" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/legacy.confluence.web.resources-prototype.js" tppabs="http://10.20.160.198/wiki/s/en/2166/34/1.0/_/download/batch/legacy.confluence.web.resources:prototype/legacy.confluence.web.resources:prototype.js"></script>

    
    <!-- end system javascript resources -->

    

    
    <link rel="canonical" href="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh">
    <link rel="shortlink" href="http://code.alibabatech.com/wiki/x/zQdq">
    <meta name="wikilink" content="[dubbo:User Guide-zh]">
    <meta name="page-version" content="225">

</head>
    
<body onload="placeFocus()" id="com-atlassian-confluence" class="theme-default ">
<ul id="assistive-skip-links" class="assistive">
    <li><a href="http://dubbo.io/User+Guide-zh.htm#title-heading">Skip to content</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#breadcrumbs">Skip to breadcrumbs</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#header-menu-bar">Skip to header menu</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#navigation">Skip to action menu</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#quick-search-query">Skip to quick search</a></li>
</ul>
<div id="page">
<div id="full-height-container">



<fieldset class="hidden parameters">
    <input type="hidden" id="shortcutDialogTip" value="Shortcut tip: Pressing &lt;b&gt;{shortcut}&lt;/b&gt; also opens this dialog box">
        <input type="hidden" title="i18n.close.name" value="Close">
        <input type="hidden" title="i18n.cancel.name" value="Cancel">
</fieldset><fieldset class="hidden parameters">
    <input type="hidden" id="statusDialogHeading" value="What are you working on?">
    <input type="hidden" id="statusDialogAccessibilityLabel" value="Enter your status (140 character limit)">
    <input type="hidden" id="statusDialogLatestLabel" value="Last update:">
    <input type="hidden" id="statusDialogUpdateButtonLabel" value="Update">
    <input type="hidden" id="statusDialogCancelButtonLabel" value="Cancel">
</fieldset>

<fieldset class="hidden parameters">
    <input type="hidden" id="globalSettingsAttachmentMaxSize" value="10485760">
    <input type="hidden" id="userLocale" value="en_GB">
    <input type="hidden" id="staticResourceUrlPrefix" value="/wiki/s/en/2166/34/_">
    <input type="hidden" id="contextPath" value="/wiki">
</fieldset>

    
<div id="header" class="" style="display: none">
        <form id="quick-search" class="quick-search" method="get" action="http://10.20.160.198/wiki/dosearchsite.action">
        <fieldset>
            <label class="assistive" for="quick-search-query">Quick Search</label>
            <input class="quick-search-query" id="quick-search-query" type="search" accesskey="q" autocomplete="off" name="queryString" size="25" title="Quick Search" results="10" placeholder="Search">
            <input class="quick-search-submit" id="quick-search-submit" type="submit" value="Search">
            <div class="aui-dd-parent quick-nav-drop-down"><!-- Quick nav appears here --></div>
        </fieldset>
        <fieldset class="hidden parameters">
            <input type="hidden" id="quickNavEnabled" value="true">
                    </fieldset>
    </form>
    <ul id="header-menu-bar" class="ajs-menu-bar">
                    
        
            <li class="normal ajs-menu-item">
        <a id="browse-menu-link" class="browse trigger ajs-menu-title" href="http://dubbo.io/User+Guide-zh.htm#"><span><span>Browse</span></span></a>         <div class="ajs-drop-down assistive" hidden="">
                        <ul id="browse-menu-link-leading" class="section-leading first">
                                        <li>
    
        
    
    <a id="space-pages-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/listpages.action?key=dubbo  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/listpages.action?key=dubbo%27" tppabs="http://10.20.160.198/wiki/pages/listpages.action?key=dubbo" class="" title="Browse pages in the Dubbo space">
                   <span>Pages</span></a>        </li>
                                        <li>
    
        
    
    <a id="space-blogposts-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/viewrecentblogposts.action?key=dubbo  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/viewrecentblogposts.action?key=dubbo%27" tppabs="http://10.20.160.198/wiki/pages/viewrecentblogposts.action?key=dubbo" class="" title="Browse blogs in the Dubbo space">
                   <span>Blog</span></a>        </li>
                                        <li>
    
        
    
    <a id="space-labels-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/labels/listlabels-heatmap.action?key=dubbo  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/labels/listlabels-heatmap.action?key=dubbo%27" tppabs="http://10.20.160.198/wiki/labels/listlabels-heatmap.action?key=dubbo" class="" title="Browse labels in the Dubbo space">
                   <span>Labels</span></a>        </li>
                                        <li>
    
        
    
    <a id="space-attachments-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/spaces/listattachmentsforspace.action?key=dubbo  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/spaces/listattachmentsforspace.action?key=dubbo%27" tppabs="http://10.20.160.198/wiki/spaces/listattachmentsforspace.action?key=dubbo" class="" title="Browse attachments in the Dubbo space">
                   <span>Attachments</span></a>        </li>
                                        <li>
    
        
    
    <a id="space-mail-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/spaces/viewmailarchive.action?key=dubbo  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/spaces/viewmailarchive.action?key=dubbo%27" tppabs="http://10.20.160.198/wiki/spaces/viewmailarchive.action?key=dubbo" class="" title="Browse mail in the Dubbo space">
                   <span>Mail</span></a>        </li>
                                        <li>
    
        
    
    <a id="space-advanced-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/spaces/viewspacesummary.action?key=dubbo  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/spaces/viewspacesummary.action?key=dubbo%27" tppabs="http://10.20.160.198/wiki/spaces/viewspacesummary.action?key=dubbo" class="" title="Browse additional space functions in the Dubbo space">
                   <span>Advanced</span></a>        </li>
                                        <li>
    
        
    
    <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/spaces/usage/report.action?key=dubbo  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/spaces/usage/report.action?key=dubbo%27" tppabs="http://10.20.160.198/wiki/spaces/usage/report.action?key=dubbo" class="" title="">
                   <span>Activity</span></a>        </li>
                            </ul>
                        <ul id="browse-menu-link-global" class="section-global">
                                        <li>
    
        
    
    <a id="whats-new-menu-link" href="javascript:if(confirm(%27http://docs.atlassian.com/confluence/docs-35/whatsnew/iframe  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://docs.atlassian.com/confluence/docs-35/whatsnew/iframe%27" tppabs="http://docs.atlassian.com/confluence/docs-35/whatsnew/iframe" class="" title="">
                   <span>What’s New</span></a>        </li>
                                        <li>
    
        
    
    <a id="people-directory-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/peopledirectory.action  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/peopledirectory.action%27" tppabs="http://10.20.160.198/wiki/peopledirectory.action" class="" title="Browse the Confluence people directory">
                   <span>People Directory</span></a>        </li>
                                        <li>
    
        
    
    <a id="space-directory-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/spacedirectory/view.action  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/spacedirectory/view.action%27" tppabs="http://10.20.160.198/wiki/spacedirectory/view.action" class="" title="Browse the Confluence space directory">
                   <span>Space Directory</span></a>        </li>
                                        <li>
    
        
    
    <a id="keyboard-shortcuts-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki%27" tppabs="http://10.20.160.198/wiki" class="" title="View available keyboard shortcuts">
                   <span>Keyboard Shortcuts</span></a>        </li>
                                        <li>
    
        
    
    <a id="gadget-directory-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki%27" tppabs="http://10.20.160.198/wiki" class="user-item administration-link" title="Browse gadgets provided by Confluence">
                   <span>Confluence Gadgets</span></a>        </li>
                            </ul>
                    </div>
    </li>
        
                                                         <li class="ajs-menu-item normal">
        
        
    
    <a id="login-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/login.action?os_destination=%2Fdisplay%2Fdubbo%2FUser%2BGuide-zh  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/login.action?os_destination=%2Fdisplay%2Fdubbo%2FUser%2BGuide-zh%27" tppabs="http://10.20.160.198/wiki/login.action?os_destination=%2Fdisplay%2Fdubbo%2FUser%2BGuide-zh" class="user-item login-link" title="">
                   <span>Log In</span></a>        </li>
                            </ul>
    
    
    <ol id="breadcrumbs">
                    
                        
        <li class="first">
                                            <span><a href="javascript:if(confirm(%27http://10.20.160.198/wiki/dashboard.action  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/dashboard.action%27" tppabs="http://10.20.160.198/wiki/dashboard.action" title="Go to Dashboard">Dashboard</a></span>
                </li>
                    
                
        <li>
                                            <span><a href="javascript:if(confirm(%27http://10.20.160.198/wiki/display/dubbo  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/display/dubbo%27" tppabs="http://10.20.160.198/wiki/display/dubbo">Dubbo</a></span>
                </li>
                    
                
        <li>
                                            <span><a href="http://dubbo.io/Home-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Home-zh">Home-zh</a></span>
                </li>
                    
                
        <li>
                                            <span>User Guide-zh</span>
                </li>
        </ol>

</div><!-- \#header -->

<div id="main">
    
    
    <div id="navigation" class="content-navigation view" style="display: none">
        <fieldset class="hidden parameters">
            <input type="hidden" id="pageId" value="6948813">
        </fieldset>
        <ul class="ajs-menu-bar">
                                
            <li class="normal ajs-menu-item">
        <a id="add-menu-link" class="add trigger ajs-menu-title" href="http://dubbo.io/User+Guide-zh.htm#"><span><span>Add</span></span></a>         <div class="ajs-drop-down assistive" hidden="">
                        <ul id="add-menu-link-page" class="section-page first">
                                        <li>
    
        
    
    <a id="add-comment-menu-link" href="http://dubbo.io/User+Guide-zh-showComments=true&showCommentArea=true.htm#addcomment" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?showComments=true&amp;showCommentArea=true#addcomment" class="add-comment" title="Add a Comment">
                   <span>Comment</span></a>        </li>
                            </ul>
                    </div>
    </li>
                    
            <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action trigger ajs-menu-title" href="http://dubbo.io/User+Guide-zh.htm#"><span><span>Tools</span></span></a>         <div class="ajs-drop-down most-right-menu-item assistive" hidden="">
                        <ul id="action-menu-link-primary" class="section-primary first">
                                        <li>
    
        
    
    <a id="view-attachments-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/viewpageattachments.action?pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/viewpageattachments.action?pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/viewpageattachments.action?pageId=6948813" class="action-view-attachments" accesskey="a" title="View Attachments">
                   <span><u>A</u>ttachments (0)</span></a>        </li>
                                        <li>
    
        
    
    <a id="action-view-history-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/viewpreviousversions.action?pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/viewpreviousversions.action?pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/viewpreviousversions.action?pageId=6948813" class="action-view-history" title="">
                   <span>Page History</span></a>        </li>
                                        <li>
    
        
    
    <a id="action-page-permissions-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/viewinfo.action?pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/viewinfo.action?pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/viewinfo.action?pageId=6948813" class="action-page-permissions" title="Edit restrictions">
                   <span>Restrictions</span></a>        </li>
                            </ul>
                        <ul id="action-menu-link-secondary" class="section-secondary">
                                        <li>
    
        
    
    <a id="view-page-info-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/viewinfo.action?pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/viewinfo.action?pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/viewinfo.action?pageId=6948813" class="action-view-info" title="">
                   <span>Info</span></a>        </li>
                                        <li>
    
        
    
    <a id="link-to-page-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/viewinfo.action?pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/viewinfo.action?pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/viewinfo.action?pageId=6948813" class="" title="Link to this Page">
                   <span>Link to this Page…</span></a>        </li>
                                        <li>
    
        
    
    <a id="view-in-hierarchy-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/listpages-dirview.action?key=dubbo&openId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/listpages-dirview.action?key=dubbo&openId=6948813#selectedPageInHierarchy%27" tppabs="http://10.20.160.198/wiki/pages/listpages-dirview.action?key=dubbo&amp;openId=6948813#selectedPageInHierarchy" class="" title="">
                   <span>View in Hierarchy</span></a>        </li>
                                        <li>
    
        
    
    <a id="action-view-source-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/viewpagesrc.action?pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/viewpagesrc.action?pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/viewpagesrc.action?pageId=6948813" class="action-view-source popup-link" title="">
                   <span>View Wiki Markup</span></a>        </li>
                            </ul>
                    </div>
    </li>
            </ul>
    </div>

    
    <h1 id="title-heading" class="pagetitle" style="display: none">
                    <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/display/dubbo  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/display/dubbo%27" tppabs="http://10.20.160.198/wiki/display/dubbo"><img class="logo space custom" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/dubbo-version=5&modificationDate=1320723683000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6324241/dubbo?version=5&amp;modificationDate=1320723683000" alt=""></a>        
	
    </h1>

    

                            <div id="content" class="page view">
    



<div id="link-to-page-fields" class="hidden parameters">
    <input type="hidden" id="linkToThisPageHeading" value="Link to this Page">
    <input type="hidden" id="linkToThisPageLink" value="Link">
    <input type="hidden" id="linkToThisPageTinyLink" value="Tiny Link">
    <input type="hidden" id="linkToThisPageWikiMarkup" value="Wiki Markup">
    <input type="hidden" id="linkToThisPageClose" value="Close">
</div>
<fieldset class="hidden parameters">
    <input type="hidden" title="movePageDialogViewPageTitle" value="Move Page – ‘User Guide-zh’">
    <input type="hidden" title="movePageDialogEditPageTitle" value="Set Page Location">
    <input type="hidden" title="movePageDialogMoveButton" value="Move">
    <input type="hidden" title="movePageDialogCancelButton" value="Cancel">
    <input type="hidden" title="movePageDialogBrowsePanelTip" value="Click to select the new parent page for this page and its children.">
    <input type="hidden" title="movePageDialogSearchPanel" value="Search">
    <input type="hidden" title="movePageDialogHistoryPanel" value="Recently Viewed">
    <input type="hidden" title="movePageDialogHistoryNoResults" value="There were no recently viewed pages found.">
    <input type="hidden" title="movePageDialogLocationPanel" value="Known Location">
    <input type="hidden" title="movePageDialogLocationNotFound" value="The specified page was not found.">
    <input type="hidden" title="movePageDialogBrowsePanel" value="Browse">
    <input type="hidden" title="movePageDialogPanelLoadErrorMsg" value="Error reading the panel content from the server.">
    <input type="hidden" title="movePageDialogPanelLoadErrorTip" value="You could try reloading the page and launching the dialog again.">
    <input type="hidden" title="movePageDialogPanelLoadErrorStatus" value="HTTP Status">
    <input type="hidden" title="movePageDialogNoSelectionErrorMsg" value="You must make a selection in the tree before you can move the page.">
    <input type="hidden" title="movePageDialogSearchError" value="Failed to retrieve search results from the server.">
    <input type="hidden" title="movePageDialogSearchNoResults" value="There were no pages found containing &lt;b&gt;{0}&lt;/b&gt;.">
    <input type="hidden" title="movePageDialogSearchResultCount" value="Showing &lt;b&gt;{0}&lt;/b&gt;-&lt;b&gt;{1}&lt;/b&gt; of &lt;b&gt;{2}&lt;/b&gt; pages containing &lt;b&gt;{3}&lt;/b&gt;.">
    <input type="hidden" title="movePageDialogMoveFailed" value="Move failed. There was a problem contacting the server.">
    <input type="hidden" title="movePageDialogCannotChangeSpace" value="You cannot move this page to another space because you do not have permission to remove it from this space.">
    <input type="hidden" title="pageTitle" value="User Guide-zh">
    <input type="hidden" title="parentPageTitle" value="Home-zh">
    <input type="hidden" title="fromPageTitle" value="">
    <input type="hidden" title="spaceKey" value="dubbo">
    <input type="hidden" title="spaceName" value="Dubbo">
    <input type="hidden" title="movePageDialogInvalidLocation" value="You cannot move a page to be underneath itself or its children.">
    <input type="hidden" title="movePageDialogOrderingTitle" value="Page Ordering">
    <input type="hidden" title="movePageDialogBackButton" value="Back">
    <input type="hidden" title="movePageDialogMoveAndOrderButton" value="Reorder">
    <input type="hidden" title="movePageDialogNextButton" value="Move">
</fieldset>

<script type="text/x-template" title="movePageDialog">
    <div class="row information">
        <div class="inner">
            <div class="element">
                Specify the new parent page for this page and its children by space and title.
            </div>
        </div>
    </div>
    <div class="form">
        <fieldset>
                

    <legend class="assistive"><span>Change the Parent Page to a Known Page</span></legend>
            <div class="row">
                <label for="new-space">New space:</label>
                <div class="value new-space-value">
                    <input id="new-space-key" name="new-space-key" type="hidden" value="dubbo">
                                            <span class="space-input">
                            <input id="new-space" name="new-space" value="Dubbo" disabled="disabled">
                        </span>
                        <span class="description warning">You cannot move this page to another space because you do not have permission to remove it from this space.</span>
                                        <div class="new-space-dropdown aui-dd-parent autocomplete"></div>
                </div>
            </div>
            <div class="row">
                <label for="new-parent-page">New parent page:</label>
                <div class="value new-parent-page-value">
                    <span class="page-input">
                        <input id="new-parent-page" name="new-parent-page" value="Home-zh">
                    </span>
                    <span class="description">Start typing a page title to see a list of suggestions.</span>
                    <div class="new-parent-page-dropdown aui-dd-parent autocomplete"></div>
                </div>
            </div>
        </fieldset>
    </div>
    <div class="location-info">
        <div class="row">
            <label>Current location:</label>
            <div class="value breadcrumbs-container">
                <div class="breadcrumbs-line">
                    <ul id="current-parent-breadcrumbs" class="breadcrumbs">
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <label>New location:</label>
            <div class="value breadcrumbs-container">
                <div class="breadcrumbs-line">
                    <ul id="new-parent-breadcrumbs" class="breadcrumbs">
                    </ul>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/x-template" title="movePageErrors">
    <div id="move-errors" class="hidden warning"></div>
</script>
<script type="text/x-template" title="movePageBreadcrumb">
    <li><a class="{2}" title="{3}" tabindex="-1"><span>{0}</span></a></li>
</script>
<script type="text/x-template" title="movePageBreadcrumbLoading">
    <li class="loading"><span>Loading breadcrumbs&hellip;</span></li>
</script>
<script type="text/x-template" title="movePageBreadcrumbError">
    <li class="warning last"><span>Error retrieving breadcrumbs.</span></li>
</script>
<script type="text/x-template" title="movePageNoMatchingPages">
    <ol><li><span class="warning">No matching pages found.</span></li></ol>
</script>
<script type="text/x-template" title="movePageNoMatchingSpaces">
    <ol><li><span class="warning">No matching spaces found.</span></li></ol>
</script>

<script type="text/x-template" title="movePageSearchPanel">
    <div class="row information">
        <div class="inner">
            <div class="element">
                Search for and select the new parent page for this page and its children.
            </div>
        </div>
    </div>
    <div id="move-page-search-container" class="row">
        <div class="search-form">
            <fieldset>
                    

    <legend class="assistive"><span>Search for a New Parent Page</span></legend>
                    

    <label  for="move-page-search-query" class="assistive">Search keywords</label>
                <input class="search-query" id="move-page-search-query">
                    

    <label  for="move-page-search-space" class="assistive">Search in space</label>
                                    <select id="move-page-search-space" class="search-space" disabled="disabled">
                        <option value="dubbo" selected="selected">Dubbo</option>
                    </select>
                                <input type="button" value="Search">
                                    <div class="description warning">You cannot move this page to another space because you do not have permission to remove it from this space.</div>
                            </fieldset>
        </div>
        <div class="search-results">
        </div>
    </div>
</script>
<script type="text/x-template" title="movePageSearchResultsLoading">
    <div class="searching">Searching…</div>
</script>

<script type="text/x-template" title="movePageHistoryPanel">
    <div class="row information">
        <div class="inner">
            <div class="element">
                Select the new parent page for this page and its children from your history.
            </div>
        </div>
    </div>
    <div id="move-page-search-container" class="row">
        <div class="search-results">
        </div>
    </div>
</script>
<script type="text/x-template" title="movePageHistoryLoading">
    <div class="searching">Loading…</div>
</script>
<script type="text/x-template" title="movePageBrowsePanel">
    <div class="row information">
        <div class="inner">
            <div class="element">
                Click to select the new parent page for this page and its children.
            </div>
        </div>
    </div>
    <div class="tree"></div>
</script>
<script type="text/x-template" title="movePagePanelLoading">
    <span>Loading…</span>
</script>
<script type="text/x-template" title="movePageBrowsePanelSpace">
    <ul><li id='tree-root-node-item' class='root-node-list-item'><a class='root-node' href='#'>{0}</a></li></ul>
</script>
<script type="text/x-template" title="orderingPagePanel">
<div id="orderingPlaceHolder"></div>
</script>
<script type="text/x-template" title="reorderCheckbox">
<span id="reorderRequirement"><input id="reorderCheck" type="checkbox" name="reorderFlag" title="Choose the position of this page within the list of child pages."/><label for="reorderCheck" title="Choose the position of this page within the list of child pages.">Reorder</label></span>
</script>
<script type="text/x-template" title="move-help-link">
    <div class="dialog-help-link">
            <a href="http://docs.atlassian.com/confluence/docs-35/Moving+a+Page" target="_blank">Help</a>
    </div>
</script>
<script type="text/x-template" title="searchResultsGrid">
    <table>
        <thead>
            <tr class="header">
                <th class="search-result-title">Page Title</th>
                <th class="search-result-space">Space</th>
                <th class="search-result-date">Updated</th>
            </tr>
        </thead>
    </table>
</script>
<script type="text/x-template" title="searchResultsGridCount">
    <p class="search-result-count">{0}</p>
</script>
<script type="text/x-template" title="searchResultsGridRow">
    <tr class="search-result">
        <th class="search-result-title"><a href="{1}" class="content-type-{2}"><span>{0}</span></a></th>
        <td class="search-result-space"><a class="space" href="http://10.20.160.198/wiki/display/{4}/" title="{3}">{3}</a></td>
        <td class="search-result-date"><span class="date" title="{6}">{5}</span></td>
    </tr>
</script>
<!-- Start restrictions section -->
<script type="text/x-template" title="page-permissions-div">
<div id="page-permissions-div">
    <div id="page-permissions-editor-form">

                <div id="page-permissions-error-div" class="hidden">
            <a href="#" id="permissions-error-div-close">Ok</a>
            <div></div>
        </div>

                <div id="page-permissions-type-radios" class="page-permissions-label-rows">
            <div>
                <input id="restrictViewRadio" type="radio" checked="checked" name="pagePermissionTypeRadio" value="view"/>
                <label for="restrictViewRadio">Restrict viewing of this page</label>
                <input id="restrictEditRadio" type="radio" name="pagePermissionTypeRadio" value="edit"/>
                <label for="restrictEditRadio">Restrict editing of this page</label>
            </div>
        </div>
        <div id="page-permissions-input" class="page-permissions-label-rows">
            <div class="page-permissions-label">To:</div>
            <div id="page-permissions-chooser-box">
                                <span id="page-permissions-choose-user" class="ajs-button">
                    



    



<a href="#" id='userpicker-popup-link-image' onClick="var picker = window.open('http://10.20.160.198/wiki/spaces/openuserpicker.action?key=dubbo&startIndex=0&onPopupSubmit=AJS.PagePermissions.addUserPermissions', 'EntitiesPicker', 'status=yes,resizable=yes,top=100,left=200,width=700,height=680,scrollbars=yes'); picker.focus(); return false;"><img src="user_16.gif"/*tpa=http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/user_16.gif*/ height=16 width=16 border=0 align="absmiddle"  title="Choose users" /></a>
<a href="#" id='userpicker-popup-link-text' onClick="var picker = window.open('http://10.20.160.198/wiki/spaces/openuserpicker.action?key=dubbo&startIndex=0&onPopupSubmit=AJS.PagePermissions.addUserPermissions', 'EntitiesPicker', 'status=yes,resizable=yes,top=100,left=200,width=700,height=680,scrollbars=yes'); picker.focus(); return false;">Person...</a>


                </span>
                <span id="page-permissions-choose-group" class="ajs-button">
                    



    

 

<a href="#" id='grouppicker-popup-link-image' onClick="var picker = window.open('http://10.20.160.198/wiki/spaces/opengrouppicker.action?key=dubbo&startIndex=0&actionName=dosearchgroups.action&onPopupSubmit=AJS.PagePermissions.addGroupPermissions', 'EntitiesPicker', 'status=yes,resizable=yes,top=100,left=200,width=580,height=550,scrollbars=yes'); picker.focus(); return false;"><img src="group_16.gif"/*tpa=http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/group_16.gif*/ height=16 width=16 border=0 align="absmiddle"  title="Choose groups" /></a>
<a href="#" id='grouppicker-popup-link-text' onClick="var picker = window.open('http://10.20.160.198/wiki/spaces/opengrouppicker.action?key=dubbo&startIndex=0&actionName=dosearchgroups.action&onPopupSubmit=AJS.PagePermissions.addGroupPermissions', 'EntitiesPicker', 'status=yes,resizable=yes,top=100,left=200,width=580,height=550,scrollbars=yes'); picker.focus(); return false;">Group...</a>


                </span>
            </div>
            <div id="page-permissions-input-box">
                                <span>
                    <input type="text" id="page-permissions-names-input" class="input-placeholder" value="Enter user or group name" name="permissionNames" size="30" autocomplete="off"/>
                </span>
                <input
    type="hidden"
                            id="page-permissions-names-hidden"           />                <img height="16px" width="1px" src="spacer.gif"/*tpa=http://10.20.160.198/wiki/s/en/2166/34/_/images/border/spacer.gif*//>
                <input type="button" id="add-typed-names" value="Restrict">
            </div>
        </div>
    </div>
    <div id="page-permissions-tables">
        <div id="page-permissions-table-div">
                        <table id="page-permissions-table" class="page-permissions-table">
                <tr id="page-permissions-no-views" class="marker-row">
                    <td colspan="3" class="page-permissions-marker-cell"><span>No view restrictions are defined for this page</span></td>
                </tr>
                <tr id="page-permissions-no-edits" class="marker-row">
                    <td colspan="3" class="page-permissions-marker-cell"><span>No edit restrictions are defined for this page</span></td>
                </tr>
            </table>
        </div>
        <div id="page-inherited-permissions-table-div" class="hidden">
            <span id="page-inherited-permissions-table-desc">
                <a class="icon twisty-closed">Show/Hide</a>
                <a id="toggle-inherited-permissions" title="Click to see inherited restrictions">This page has restricted parent pages. It can only be seen by users who can see those parent pages.</a>
            </span>
            <div id="page-inherited-permissions-tables" class="hidden page-inheritance-togglable"></div>
        </div>
    </div>
</div>
</script>

<script type="text/x-template" title="permissions-row-template">
    <tr class="permission-row">
                                
                <td class="page-permissions-marker-cell" width="20%">
            <span>Viewing restricted to:</span>
        </td>
                <td class="permission-entity" nowrap="true" width="40%">
            <span class="entity-container">
                <img class="permission-entity-picture"/>
                <span class="permission-entity-display-name"></span>
                <span class="permission-entity-name-wrap">&nbsp;(<span class="permission-entity-name"></span>)</span>
            </span>
        </td>
        <td class="permission-detail-column">
            <div class="permission-remove-div">
                <a href="#" class="remove-permission-link">Remove restriction</a>
            </div>
        </td>
    </tr>
</script>
<script type="text/x-template" title="permissions-username-no-suggestion-template">
    <ol>
        <li><a href="#" class="message"><span>No matches</span></a></li>
    </ol>
</script>
<script type="text/x-template" title="page-inherited-permissions-table-div-template">
        <div class="page-inherited-permissions-owner-div">
        <div class="page-inherited-permissions-table-desc">Viewing restrictions apply to “<a></a>”. In order to see “<span></span>”, a user must be in the following list of users and groups:</div>
        <table class="page-permissions-table"></table>
    </div>
</script>
<script type="text/x-template" title="page-restrictions-help-link">
    <div class="dialog-help-link">
            <a href="http://docs.atlassian.com/confluence/docs-35/Page+Restrictions" target="_blank">Help</a>
    </div>
</script>
<!-- End restrictions section -->

<fieldset class="hidden parameters">
    <input type="hidden" title="spaceKeyEncoded" value="dubbo">
    <input type="hidden" title="spaceKeyDecoded" value="dubbo">
</fieldset>


        
    
    
        
                            
    

                    

        
        <a href="http://dubbo.io/User+Guide-zh.htm#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
                            <li class="page-metadata-item noprint">
    
            
    
    <a id="content-metadata-page-restrictions" href="http://dubbo.io/User+Guide-zh.htm#" class="page-metadata-icon page-restrictions hidden" title="Page restrictions apply. Click the lock icon to view or edit the restriction.">
                   <span>Page restrictions apply</span></a>        </li>
                        <li class="page-metadata-modification-info" style="display: none">
                                    Added by <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/display/~william.liangf  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/display/~william.liangf%27" tppabs="http://10.20.160.198/wiki/display/~william.liangf" class="url fn confluence-userlink userlink-0" data-username="william.liangf" title="" data-user-hover-bound="true">梁 飞</a>, last edited by <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/display/~william.liangf  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/display/~william.liangf%27" tppabs="http://10.20.160.198/wiki/display/~william.liangf" class="url fn confluence-userlink userlink-0" data-username="william.liangf" title="" data-user-hover-bound="true">梁 飞</a> on 一月 23, 2013
                                                                <span class="noprint">&nbsp;(<a id="view-change-link" href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/diffpages.action?pageId=6948813&originalId=8356074  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/diffpages.action?pageId=6948813&originalId=8356074%27" tppabs="http://10.20.160.198/wiki/pages/diffpages.action?pageId=6948813&amp;originalId=8356074">view change</a>)</span>
                                                </li>
                    </ul>
          <div id="version-comment" class="noteMacro" style="display: none;">
      <strong>Comment:</strong>
      <br>
  </div>
    </div>


<a href="http://dubbo.io/User+Guide-zh.htm#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>
        
        <fieldset class="hidden parameters">
                        <input type="hidden" title="browsePageTreeMode" value="view">
            <input type="hidden" title="parentPageId" value="6948805">
        </fieldset>

        <div class="wiki-content">
           <!-- wiki content -->
            <table class="sectionMacro" border="0" cellpadding="5" cellspacing="0" width="100%"><tbody><tr><td class="confluenceTd" valign="top"><p><br class="atl-forced-newline"></p>
<p><a href="http://dubbo.io/Home-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Home-zh" title="Home-zh"><b>首页</b></a> &nbsp;||&nbsp; <a href="http://dubbo.io/Download-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Download-zh" title="Download-zh"><b>下载</b></a> &nbsp;||&nbsp; <a href="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/User Guide-zh - Dubbo - Alibaba Open Sesame.html" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh" title="User Guide-zh"><b>用户指南</b></a> &nbsp;||&nbsp; <a href="http://dubbo.io/Developer+Guide-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Developer+Guide-zh" title="Developer Guide-zh"><b>开发者指南</b></a> &nbsp;||&nbsp; <a href="http://dubbo.io/Administrator+Guide-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Administrator+Guide-zh" title="Administrator Guide-zh"><b>管理员指南</b></a> &nbsp;||&nbsp; <a href="http://dubbo.io/Training-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Training-zh" title="Training-zh"><b>培训文档</b></a> &nbsp;||&nbsp; <a href="http://dubbo.io/FAQ-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/FAQ-zh" title="FAQ-zh"><b>常见问题解答</b></a> &nbsp;||&nbsp; <a href="http://dubbo.io/Release+Notes-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Release+Notes-zh" title="Release Notes-zh"><b>发布记录</b></a> &nbsp;||&nbsp; <a href="http://dubbo.io/Roadmap-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Roadmap-zh" title="Roadmap-zh"><b>发展路线</b></a> &nbsp;||&nbsp; <a href="http://dubbo.io/Community-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Community-zh" title="Community-zh"><b>社区</b></a></p></td><td class="confluenceTd" valign="top">
<p><a href="http://dubbo.io/User+Guide.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide" title="User Guide"><b>English</b></a> | 中文</p></td></tr></tbody></table> 

<h1><a name="UserGuide-zh-%E7%94%A8%E6%88%B7%E6%8C%87%E5%8D%97"></a>用户指南</h1>

<div>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%85%A5%E9%97%A8">入门</a></li>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%83%8C%E6%99%AF">背景</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%9C%80%E6%B1%82">需求</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9E%B6%E6%9E%84">架构</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%94%A8%E6%B3%95">用法</a></li>
</ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8">快速启动</a></li>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85">服务提供者</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85">服务消费者</a></li>
</ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%BE%9D%E8%B5%96">依赖</a></li>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BF%85%E9%9C%80%E4%BE%9D%E8%B5%96">必需依赖</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%BC%BA%E7%9C%81%E4%BE%9D%E8%B5%96">缺省依赖</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8F%AF%E9%80%89%E4%BE%9D%E8%B5%96">可选依赖</a></li>
</ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%88%90%E7%86%9F%E5%BA%A6">成熟度</a></li>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8A%9F%E8%83%BD%E6%88%90%E7%86%9F%E5%BA%A6">功能成熟度</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%AD%96%E7%95%A5%E6%88%90%E7%86%9F%E5%BA%A6">策略成熟度</a></li>
</ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%85%8D%E7%BD%AE">配置</a></li>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Xml%E9%85%8D%E7%BD%AE">Xml配置</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE">属性配置</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE">注解配置</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-API%E9%85%8D%E7%BD%AE">API配置</a></li>
</ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%A4%BA%E4%BE%8B">示例</a></li>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%90%AF%E5%8A%A8%E6%97%B6%E6%A3%80%E6%9F%A5">启动时检查</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%9B%86%E7%BE%A4%E5%AE%B9%E9%94%99">集群容错</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1">负载均衡</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B">线程模型</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%9B%B4%E8%BF%9E%E6%8F%90%E4%BE%9B%E8%80%85">直连提供者</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8F%AA%E8%AE%A2%E9%98%85">只订阅</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8F%AA%E6%B3%A8%E5%86%8C">只注册</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%9D%99%E6%80%81%E6%9C%8D%E5%8A%A1">静态服务</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%A4%9A%E5%8D%8F%E8%AE%AE">多协议</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%A4%9A%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">多注册中心</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%8D%E5%8A%A1%E5%88%86%E7%BB%84">服务分组</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%A4%9A%E7%89%88%E6%9C%AC">多版本</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%88%86%E7%BB%84%E8%81%9A%E5%90%88">分组聚合</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8F%82%E6%95%B0%E9%AA%8C%E8%AF%81">参数验证</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%BB%93%E6%9E%9C%E7%BC%93%E5%AD%98">结果缓存</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%9B%E5%8C%96%E5%BC%95%E7%94%A8">泛化引用</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%9B%E5%8C%96%E5%AE%9E%E7%8E%B0">泛化实现</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%9B%9E%E5%A3%B0%E6%B5%8B%E8%AF%95">回声测试</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%B8%8A%E4%B8%8B%E6%96%87%E4%BF%A1%E6%81%AF">上下文信息</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%9A%90%E5%BC%8F%E4%BC%A0%E5%8F%82">隐式传参</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BC%82%E6%AD%A5%E8%B0%83%E7%94%A8">异步调用</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%AC%E5%9C%B0%E8%B0%83%E7%94%A8">本地调用</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8F%82%E6%95%B0%E5%9B%9E%E8%B0%83">参数回调</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%BA%8B%E4%BB%B6%E9%80%9A%E7%9F%A5">事件通知</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%AC%E5%9C%B0%E5%AD%98%E6%A0%B9">本地存根</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%AC%E5%9C%B0%E4%BC%AA%E8%A3%85">本地伪装</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BB%B6%E8%BF%9F%E6%9A%B4%E9%9C%B2">延迟暴露</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6">并发控制</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%BF%9E%E6%8E%A5%E6%8E%A7%E5%88%B6">连接控制</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BB%B6%E8%BF%9F%E8%BF%9E%E6%8E%A5">延迟连接</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%B2%98%E6%BB%9E%E8%BF%9E%E6%8E%A5">粘滞连接</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%BB%A4%E7%89%8C%E9%AA%8C%E8%AF%81">令牌验证</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99">路由规则</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99">配置规则</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7">服务降级</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%BC%98%E9%9B%85%E5%81%9C%E6%9C%BA">优雅停机</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%B8%BB%E6%9C%BA%E7%BB%91%E5%AE%9A">主机绑定</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%97%A5%E5%BF%97%E9%80%82%E9%85%8D">日志适配</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97">访问日志</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%8D%E5%8A%A1%E5%AE%B9%E5%99%A8">服务容器</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-ReferenceConfig%E7%BC%93%E5%AD%98">Reference Config缓存</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1">分布式事务</a></li>
</ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C">API参考手册</a></li>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%85%8D%E7%BD%AEAPI">配置API</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%A8%E8%A7%A3API">注解API</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%A8%A1%E5%9E%8BAPI">模型API</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%B8%8A%E4%B8%8B%E6%96%87API">上下文API</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%8D%E5%8A%A1API">服务API</a></li>
</ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%85%8D%E7%BD%AE%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C">配置参考手册</a></li>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%3Cdubbo%3Aservice%2F%3E">&lt;dubbo:service/&gt;</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%3Cdubbo%3Areference%2F%3E">&lt;dubbo:reference/&gt;</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%3Cdubbo%3Aprotocol%2F%3E">&lt;dubbo:protocol/&gt;</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%3Cdubbo%3Aregistry%2F%3E">&lt;dubbo:registry/&gt;</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%3Cdubbo%3Amonitor%2F%3E">&lt;dubbo:monitor/&gt;</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%3Cdubbo%3Aapplication%2F%3E">&lt;dubbo:application/&gt;</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%3Cdubbo%3Amodule%2F%3E">&lt;dubbo:module/&gt;</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%3Cdubbo%3Aprovider%2F%3E">&lt;dubbo:provider/&gt;</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%3Cdubbo%3Aconsumer%2F%3E">&lt;dubbo:consumer/&gt;</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%3Cdubbo%3Amethod%2F%3E">&lt;dubbo:method/&gt;</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%3Cdubbo%3Aargument%2F%3E">&lt;dubbo:argument/&gt;</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%3Cdubbo%3Aparameter%2F%3E">&lt;dubbo:parameter/&gt;</a></li>
</ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8D%8F%E8%AE%AE%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C">协议参考手册</a></li>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-dubbo%3A%2F%2F">dubbo://</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-rmi%3A%2F%2F">rmi://</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-hessian%3A%2F%2F">hessian://</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-http%3A%2F%2F">http://</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-webservice%3A%2F%2F">webservice://</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-thrift%3A%2F%2F">thrift://</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-memcached%3A%2F%2F">memcached://</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-redis%3A%2F%2F">redis://</a></li>
</ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C">注册中心参考手册</a></li>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Multicast%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">Multicast注册中心</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Zookeeper%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">Zookeeper注册中心</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Redis%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">Redis注册中心</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Simple%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">Simple注册中心</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Simple%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83">Simple监控中心</a></li>
</ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Telnet%E5%91%BD%E4%BB%A4%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C">Telnet命令参考手册</a></li>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-ls">ls</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-ps">ps</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-cd">cd</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-pwd">pwd</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-trace">trace</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-count">count</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-invoke">invoke</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-status">status</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-log">log</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-help">help</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-clear">clear</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-exit">exit</a></li>
</ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Maven%E6%8F%92%E4%BB%B6%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C">Maven插件参考手册</a></li>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-mvndubbo%3Aregistry">mvn dubbo:registry</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-mvndubbo%3Acreate">mvn dubbo:create</a></li>
</ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%8D%E5%8A%A1%E5%8C%96%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">服务化最佳实践</a></li>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%88%86%E5%8C%85">分包</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%B2%92%E5%BA%A6">粒度</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%89%88%E6%9C%AC">版本</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%85%BC%E5%AE%B9%E6%80%A7">兼容性</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9E%9A%E4%B8%BE%E5%80%BC">枚举值</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BA%8F%E5%88%97%E5%8C%96">序列化</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BC%82%E5%B8%B8">异常</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%B0%83%E7%94%A8">调用</a></li>
</ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%8E%A8%E8%8D%90%E7%94%A8%E6%B3%95">推荐用法</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%AE%B9%E9%87%8F%E8%A7%84%E5%88%92">容量规划</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E5%8C%85">基准测试工具包</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A">性能测试报告</a></li>
<ul>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B5%8B%E8%AF%95%E8%AF%B4%E6%98%8E">测试说明</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83">测试环境</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B5%8B%E8%AF%95%E7%9B%AE%E7%9A%84">测试目的</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC">测试脚本</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C">测试结果</a></li>
    <li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B5%8B%E8%AF%95%E5%88%86%E6%9E%90">测试分析</a></li>
</ul>
    <li>测试覆盖率报告</li>
</ul></div>

<h2><a name="UserGuide-zh-%E5%85%A5%E9%97%A8"></a>入门</h2>
<p>(<a href="http://dubbo.io/Getting+Started-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Getting+Started-zh" title="Getting Started-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%85%A5%E9%97%A8">#</a>)</p>

<h3><a name="UserGuide-zh-%E8%83%8C%E6%99%AF"></a>背景</h3>
<p>(<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%83%8C%E6%99%AF">#</a>)</p>

<p>随着互联网的发展，网站应用的规模不断扩大，常规的垂直应用架构已无法应对，分布式服务架构以及流动计算架构势在必行，亟需一个治理系统确保架构有条不紊的演进。</p>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/dubbo-architecture-roadmap.jpg-version=1&modificationDate=1331143666000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6947616/dubbo-architecture-roadmap.jpg?version=1&amp;modificationDate=1331143666000" style="border: 0px solid black"></span></p>

<ul>
	<li><b>单一应用架构</b>
	<ul>
		<li>当网站流量很小时，只需一个应用，将所有功能都部署在一起，以减少部署节点和成本。</li>
		<li>此时，用于简化增删改查工作量的 <b>数据访问框架(ORM)</b> 是关键。</li>
	</ul>
	</li>
	<li><b>垂直应用架构</b>
	<ul>
		<li>当访问量逐渐增大，单一应用增加机器带来的加速度越来越小，将应用拆成互不相干的几个应用，以提升效率。</li>
		<li>此时，用于加速前端页面开发的 <b>Web框架(MVC)</b> 是关键。</li>
	</ul>
	</li>
	<li><b>分布式服务架构</b>
	<ul>
		<li>当垂直应用越来越多，应用之间交互不可避免，将核心业务抽取出来，作为独立的服务，逐渐形成稳定的服务中心，使前端应用能更快速的响应多变的市场需求。</li>
		<li>此时，用于提高业务复用及整合的 <b>分布式服务框架(RPC)</b> 是关键。</li>
	</ul>
	</li>
	<li><b>流动计算架构</b>
	<ul>
		<li>当服务越来越多，容量的评估，小服务资源的浪费等问题逐渐显现，此时需增加一个调度中心基于访问压力实时管理集群容量，提高集群利用率。</li>
		<li>此时，用于提高机器利用率的 <b>资源调度和治理中心(SOA)</b> 是关键。</li>
	</ul>
	</li>
</ul>


<h3><a name="UserGuide-zh-%E9%9C%80%E6%B1%82"></a>需求</h3>
<p>(<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%9C%80%E6%B1%82">#</a>)</p>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/dubbo-service-governance.jpg-version=1&modificationDate=1331887614000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6947616/dubbo-service-governance.jpg?version=1&amp;modificationDate=1331887614000" style="border: 0px solid black"></span></p>

<p>在大规模服务化之前，应用可能只是通过RMI或Hessian等工具，简单的暴露和引用远程服务，通过配置服务的URL地址进行调用，通过F5等硬件进行负载均衡。</p>

<p><b>(1) 当服务越来越多时，服务URL配置管理变得非常困难，F5硬件负载均衡器的单点压力也越来越大。</b></p>

<p>此时需要一个服务注册中心，动态的注册和发现服务，使服务的位置透明。</p>

<p>并通过在消费方获取服务提供方地址列表，实现软负载均衡和Failover，降低对F5硬件负载均衡器的依赖，也能减少部分成本。</p>

<p><b>(2) 当进一步发展，服务间依赖关系变得错踪复杂，甚至分不清哪个应用要在哪个应用之前启动，架构师都不能完整的描述应用的架构关系。</b></p>

<p>这时，需要自动画出应用间的依赖关系图，以帮助架构师理清理关系。</p>

<p><b>(3) 接着，服务的调用量越来越大，服务的容量问题就暴露出来，这个服务需要多少机器支撑？什么时候该加机器？</b></p>

<p>为了解决这些问题，第一步，要将服务现在每天的调用量，响应时间，都统计出来，作为容量规划的参考指标。</p>

<p>其次，要可以动态调整权重，在线上，将某台机器的权重一直加大，并在加大的过程中记录响应时间的变化，直到响应时间到达阀值，记录此时的访问量，再以此访问量乘以机器数反推总容量。</p>

<p>以上是Dubbo最基本的几个需求，更多服务治理问题参见：</p>

<p><a href="javascript:if(confirm(%27http://code.alibabatech.com/blog/experience_1402/service-governance-process.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://code.alibabatech.com/blog/experience_1402/service-governance-process.html%27" tppabs="http://code.alibabatech.com/blog/experience_1402/service-governance-process.html" class="external-link" rel="nofollow">http://code.alibabatech.com/blog/experience_1402/service-governance-process.html</a></p>

<h3><a name="UserGuide-zh-%E6%9E%B6%E6%9E%84"></a>架构</h3>
<p>(<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9E%B6%E6%9E%84">#</a>)</p>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/dubbo-architecture.jpg-version=1&modificationDate=1330892870000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6947616/dubbo-architecture.jpg?version=1&amp;modificationDate=1330892870000" style="border: 0px solid black"></span></p>

<p><b>节点角色说明：</b></p>

<ul>
	<li><b>Provider:</b> 暴露服务的服务提供方。</li>
	<li><b>Consumer:</b> 调用远程服务的服务消费方。</li>
	<li><b>Registry:</b> 服务注册与发现的注册中心。</li>
	<li><b>Monitor:</b> 统计服务的调用次调和调用时间的监控中心。</li>
	<li><b>Container:</b> 服务运行容器。</li>
</ul>


<p><b>调用关系说明：</b></p>

<ul>
	<li>0. 服务容器负责启动，加载，运行服务提供者。</li>
	<li>1. 服务提供者在启动时，向注册中心注册自己提供的服务。</li>
	<li>2. 服务消费者在启动时，向注册中心订阅自己所需的服务。</li>
	<li>3. 注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者。</li>
	<li>4. 服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。</li>
	<li>5. 服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心。</li>
</ul>


<p><b>(1) 连通性：</b></p>
<ul>
	<li>注册中心负责服务地址的注册与查找，相当于目录服务，服务提供者和消费者只在启动时与注册中心交互，注册中心不转发请求，压力较小</li>
	<li>监控中心负责统计各服务调用次数，调用时间等，统计先在内存汇总后每分钟一次发送到监控中心服务器，并以报表展示</li>
	<li>服务提供者向注册中心注册其提供的服务，并汇报调用时间到监控中心，此时间不包含网络开销</li>
	<li>服务消费者向注册中心获取服务提供者地址列表，并根据负载算法直接调用提供者，同时汇报调用时间到监控中心，此时间包含网络开销</li>
	<li>注册中心，服务提供者，服务消费者三者之间均为长连接，监控中心除外</li>
	<li>注册中心通过长连接感知服务提供者的存在，服务提供者宕机，注册中心将立即推送事件通知消费者</li>
	<li>注册中心和监控中心全部宕机，不影响已运行的提供者和消费者，消费者在本地缓存了提供者列表</li>
	<li>注册中心和监控中心都是可选的，服务消费者可以直连服务提供者</li>
</ul>


<p><b>(2) 健状性：</b></p>
<ul>
	<li>监控中心宕掉不影响使用，只是丢失部分采样数据</li>
	<li>数据库宕掉后，注册中心仍能通过缓存提供服务列表查询，但不能注册新服务</li>
	<li>注册中心对等集群，任意一台宕掉后，将自动切换到另一台</li>
	<li>注册中心全部宕掉后，服务提供者和服务消费者仍能通过本地缓存通讯</li>
	<li>服务提供者无状态，任意一台宕掉后，不影响使用</li>
	<li>服务提供者全部宕掉后，服务消费者应用将无法使用，并无限次重连等待服务提供者恢复</li>
</ul>


<p><b>(3) 伸缩性：</b></p>
<ul>
	<li>注册中心为对等集群，可动态增加机器部署实例，所有客户端将自动发现新的注册中心</li>
	<li>服务提供者无状态，可动态增加机器部署实例，注册中心将推送新的服务提供者信息给消费者</li>
</ul>


<p><b>(4) 升级性：</b></p>
<ul>
	<li>当服务集群规模进一步扩大，带动IT治理结构进一步升级，需要实现动态部署，进行流动计算，现有分布式服务架构不会带来阻力：</li>
</ul>


<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/dubbo-architecture-future.jpg-version=1&modificationDate=1329978098000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6947616/dubbo-architecture-future.jpg?version=1&amp;modificationDate=1329978098000" style="border: 0px solid black"></span></p>
<ul>
	<li><del><b>Deployer:</b> 自动部署服务的本地代理。</del></li>
	<li><del><b>Repository:</b> 仓库用于存储服务应用发布包。</del></li>
	<li><del><b>Scheduler:</b> 调度中心基于访问压力自动增减服务提供者。</del></li>
	<li><del><b>Admin:</b> 统一管理控制台。</del></li>
</ul>


<h3><a name="UserGuide-zh-%E7%94%A8%E6%B3%95"></a>用法</h3>
<p>(<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%94%A8%E6%B3%95">#</a>)</p>

<h4><a name="UserGuide-zh-%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%EF%BC%9A%28Spring%E9%85%8D%E7%BD%AE%29"></a>本地服务：(Spring配置)</h4>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>local.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_855453" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">bean</code> <code class="xml plain">id=“xxxService” class=“com.xxx.XxxServiceImpl” /&gt;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">bean</code> <code class="xml plain">id=“xxxAction” class=“com.xxx.XxxAction”&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml plain">name=“xxxService” ref=“xxxService” /&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">bean</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%EF%BC%9A%28Spring%E9%85%8D%E7%BD%AE%29"></a>远程服务：(Spring配置)</h4>

<p>在本地服务的基础上，只需做简单配置，即可完成远程化：</p>
<ul>
	<li>将上面的local.xml配置拆分成两份，将服务定义部分放在服务提供方remote-provider.xml，将服务引用部分放在服务消费方remote-consumer.xml。</li>
	<li>并在提供方增加暴露服务配置&lt;dubbo:service&gt;，在消费方增加引用服务配置&lt;dubbo:reference&gt;。</li>
</ul>


<p>如下：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>remote-provider.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_592394" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">bean</code> <code class="xml plain">id=“xxxService” class=“com.xxx.XxxServiceImpl” /&gt; </code><code class="xml comments">&lt;!-- 和本地服务一样实现远程服务 --&gt;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml plain">interface=“com.xxx.XxxService” ref=“xxxService” /&gt; </code><code class="xml comments">&lt;!-- 增加暴露远程服务配置 --&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>remote-consumer.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_62525" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml plain">id=“xxxService” interface=“com.xxx.XxxService” /&gt; </code><code class="xml comments">&lt;!-- 增加引用远程服务配置 --&gt;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">bean</code> <code class="xml plain">id=“xxxAction” class=“com.xxx.XxxAction”&gt; </code><code class="xml comments">&lt;!-- 和本地服务一样使用远程服务 --&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">property</code> <code class="xml plain">name=“xxxService” ref=“xxxService” /&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">bean</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h2><a name="UserGuide-zh-%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8"></a>快速启动</h2>
<p>(<a href="http://dubbo.io/Quick+Start-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Quick+Start-zh" title="Quick Start-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Dubbo采用全Spring配置方式，透明化接入应用，对应用没有任何API侵入，只需用Spring加载Dubbo的配置即可，Dubbo基于Spring的Schema扩展进行加载。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>如果不想使用Spring配置，而希望通过API的方式进行调用（不推荐），请参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-API%E9%85%8D%E7%BD%AE" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh#UserGuide-zh-API%E9%85%8D%E7%BD%AE">API配置</a> (<a href="http://dubbo.io/API+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/API+Config-zh" title="API Config-zh">+</a>)</td></tr></tbody></table></div>

<h3><a name="UserGuide-zh-%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85"></a>服务提供者</h3>
<p>(<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>完整安装步骤，请参见：<a href="http://dubbo.io/Administrator+Guide-zh.htm#AdministratorGuide-zh-%E7%A4%BA%E4%BE%8B%E6%8F%90%E4%BE%9B%E8%80%85%E5%AE%89%E8%A3%85" tppabs="http://10.20.160.198/wiki/display/dubbo/Administrator+Guide-zh#AdministratorGuide-zh-%E7%A4%BA%E4%BE%8B%E6%8F%90%E4%BE%9B%E8%80%85%E5%AE%89%E8%A3%85">示例提供者安装</a> (<a href="http://dubbo.io/Demo+Provider+Installation-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Demo+Provider+Installation-zh" title="Demo Provider Installation-zh">+</a>)</td></tr></tbody></table></div>

<p>定义服务接口: (该接口需单独打包，在服务提供方和消费方共享)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>DemoService.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_313100" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.alibaba.dubbo.demo;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">public</code> <code class="java keyword">interface</code> <code class="java plain">DemoService {</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String sayHello(String name);</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>在服务提供方实现接口：(对服务消费方隐藏实现)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>DemoServiceImpl.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_121731" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.alibaba.dubbo.demo.provider;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.demo.DemoService;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">DemoServiceImpl </code><code class="java keyword">implements</code> <code class="java plain">DemoService {</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">String sayHello(String name) {</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java string">"Hello "</code> <code class="java plain">+ name;</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>用Spring配置声明暴露服务：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>provider.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_686210" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;?</code><code class="xml keyword">xml</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0"</code> <code class="xml color1">encoding</code><code class="xml plain">=</code><code class="xml string">"UTF-8"</code><code class="xml plain">?&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">beans</code> <code class="xml color1">xmlns</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beans" "="">http://www.springframework.org/schema/beans"</a></code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:xsi</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.w3.org/2001/XMLSchema-instance" "="">http://www.w3.org/2001/XMLSchema-instance"</a></code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:dubbo</code><code class="xml plain">=</code><code class="xml string">"<a href="http://code.alibabatech.com/schema/dubbo" "="">http://code.alibabatech.com/schema/dubbo"</a></code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xsi:schemaLocation</code><code class="xml plain">=</code><code class="xml string">"<a href=""></a>http://www.springframework.org/schema/beans&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href=""></a>http://www.springframework.org/schema/beans/spring-beans.xsd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href=""></a>http://code.alibabatech.com/schema/dubbo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="http://code.alibabatech.com/schema/dubbo/dubbo.xsd" "="">http://code.alibabatech.com/schema/dubbo/dubbo.xsd"</a></code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 提供方应用信息，用于计算依赖关系 --&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hello-world-app"</code>&nbsp; <code class="xml plain">/&gt;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 使用multicast广播注册中心暴露服务地址 --&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"multicast://224.5.6.7:1234"</code> <code class="xml plain">/&gt;</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 用dubbo协议在20880端口暴露服务 --&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"20880"</code> <code class="xml plain">/&gt;</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 声明需要暴露的服务接口 --&gt;</code></div><div class="line number17 index16 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.demo.DemoService"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"demoService"</code> <code class="xml plain">/&gt;</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 和本地bean一样实现服务 --&gt;</code></div><div class="line number20 index19 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">bean</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"demoService"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.demo.provider.DemoServiceImpl"</code> <code class="xml plain">/&gt;</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">beans</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>加载Spring配置：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Provider.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_273626" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">org.springframework.context.support.ClassPathXmlApplicationContext;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">Provider {</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) </code><code class="java keyword">throws</code> <code class="java plain">Exception {</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">ClassPathXmlApplicationContext context = </code><code class="java keyword">new</code> <code class="java plain">ClassPathXmlApplicationContext(</code><code class="java keyword">new</code> <code class="java plain">String[] {</code><code class="java string">"<a href="http://10.20.160.198/wiki/display/dubbo/provider.xml" "="">http://10.20.160.198/wiki/display/dubbo/provider.xml"</a></code><code class="java plain">});</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">context.start();</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.in.read(); </code><code class="java comments">// 按任意键退出</code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h3><a name="UserGuide-zh-%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85"></a>服务消费者</h3>
<p>(<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>完整安装步骤，请参见：<a href="http://dubbo.io/Administrator+Guide-zh.htm#AdministratorGuide-zh-%E7%A4%BA%E4%BE%8B%E6%B6%88%E8%B4%B9%E8%80%85%E5%AE%89%E8%A3%85" tppabs="http://10.20.160.198/wiki/display/dubbo/Administrator+Guide-zh#AdministratorGuide-zh-%E7%A4%BA%E4%BE%8B%E6%B6%88%E8%B4%B9%E8%80%85%E5%AE%89%E8%A3%85">示例消费者安装</a> (<a href="http://dubbo.io/Demo+Consumer+Installation-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Demo+Consumer+Installation-zh" title="Demo Consumer Installation-zh">+</a>)</td></tr></tbody></table></div>

<p>通过Spring配置引用远程服务：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>consumer.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_568311" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;?</code><code class="xml keyword">xml</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0"</code> <code class="xml color1">encoding</code><code class="xml plain">=</code><code class="xml string">"UTF-8"</code><code class="xml plain">?&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">beans</code> <code class="xml color1">xmlns</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beans" "="">http://www.springframework.org/schema/beans"</a></code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:xsi</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.w3.org/2001/XMLSchema-instance" "="">http://www.w3.org/2001/XMLSchema-instance"</a></code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:dubbo</code><code class="xml plain">=</code><code class="xml string">"<a href="http://code.alibabatech.com/schema/dubbo" "="">http://code.alibabatech.com/schema/dubbo"</a></code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xsi:schemaLocation</code><code class="xml plain">=</code><code class="xml string">"<a href=""></a>http://www.springframework.org/schema/beans&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href=""></a>http://www.springframework.org/schema/beans/spring-beans.xsd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href=""></a>http://code.alibabatech.com/schema/dubbo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="http://code.alibabatech.com/schema/dubbo/dubbo.xsd" "="">http://code.alibabatech.com/schema/dubbo/dubbo.xsd"</a></code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 消费方应用名，用于计算依赖关系，不是匹配条件，不要与提供方一样 --&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"consumer-of-helloworld-app"</code>&nbsp; <code class="xml plain">/&gt;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 使用multicast广播注册中心暴露发现服务地址 --&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"multicast://224.5.6.7:1234"</code> <code class="xml plain">/&gt;</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 生成远程服务代理，可以和本地bean一样使用demoService --&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"demoService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.demo.DemoService"</code> <code class="xml plain">/&gt;</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">beans</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>加载Spring配置，并调用远程服务：(也可以使用IoC注入)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Consumer.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_494347" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">org.springframework.context.support.ClassPathXmlApplicationContext;</code></div><div class="line number2 index1 alt1"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.demo.DemoService;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">Consumer {</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) </code><code class="java keyword">throws</code> <code class="java plain">Exception {</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">ClassPathXmlApplicationContext context = </code><code class="java keyword">new</code> <code class="java plain">ClassPathXmlApplicationContext(</code><code class="java keyword">new</code> <code class="java plain">String[] {</code><code class="java string">"<a href="http://10.20.160.198/wiki/display/dubbo/consumer.xml" "="">http://10.20.160.198/wiki/display/dubbo/consumer.xml"</a></code><code class="java plain">});</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">context.start();</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">DemoService demoService = (DemoService)context.getBean(</code><code class="java string">"demoService"</code><code class="java plain">); </code><code class="java comments">// 获取远程服务代理</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String hello = demoService.sayHello(</code><code class="java string">"world"</code><code class="java plain">); </code><code class="java comments">// 执行远程方法</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println( hello ); </code><code class="java comments">// 显示调用结果</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h2><a name="UserGuide-zh-%E4%BE%9D%E8%B5%96"></a>依赖</h2>

<p>(<a href="http://dubbo.io/Dependencies-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Dependencies-zh" title="Dependencies-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%BE%9D%E8%B5%96">#</a>)</p>

<h3><a name="UserGuide-zh-%E5%BF%85%E9%9C%80%E4%BE%9D%E8%B5%96"></a>必需依赖</h3>

<ul>
	<li>JDK1.5+</li>
</ul>


<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>理论上Dubbo可以只依赖JDK，不依赖于任何三方库运行，只需配置使用JDK相关实现策略。</td></tr></tbody></table></div>

<h3><a name="UserGuide-zh-%E7%BC%BA%E7%9C%81%E4%BE%9D%E8%B5%96"></a>缺省依赖</h3>

<p>通过mvn dependency:tree &gt; dep.log命令分析，Dubbo缺省依赖以下三方库：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_88326" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">[INFO] +- com.alibaba:dubbo:jar:2.1.2:compile</code></div><div class="line number2 index1 alt1"><code class="text plain">[INFO] |&nbsp; +- log4j:log4j:jar:1.2.16:compile </code></div><div class="line number3 index2 alt2"><code class="text plain">[INFO] |&nbsp; +- org.javassist:javassist:jar:3.15.0-GA:compile</code></div><div class="line number4 index3 alt1"><code class="text plain">[INFO] |&nbsp; +- org.springframework:spring:jar:2.5.6.SEC03:compile</code></div><div class="line number5 index4 alt2"><code class="text plain">[INFO] |&nbsp; +- commons-logging:commons-logging:jar:1.1.1:compile</code></div><div class="line number6 index5 alt1"><code class="text plain">[INFO] |&nbsp; \- org.jboss.netty:netty:jar:3.2.5.Final:compile</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>这里所有依赖都是换照Dubbo缺省配置选的，这些缺省值是基于稳定性和性能考虑的。</p>

<ul>
	<li>log4j.jar和commons-logging.jar日志输出包。
	<ul>
		<li>可以直接去掉，dubbo本身的日志会自动切换为JDK的java.util.logging输出。</li>
		<li>但如果其它三方库比如spring.jar间接依赖commons-logging，则不能去掉。</li>
	</ul>
	</li>
	<li>javassist.jar 字节码生成。
	<ul>
		<li>如果&lt;dubbo:provider proxy="jdk" /&gt;或&lt;dubbo:consumer proxy="jdk" /&gt;，以及&lt;dubbo:application compiler="jdk" /&gt;，则不需要。</li>
	</ul>
	</li>
	<li>spring.jar 配置解析。
	<ul>
		<li>如果用ServiceConfig和ReferenceConfig的API调用，则不需要。</li>
	</ul>
	</li>
	<li>netty.jar 网络传输。
	<ul>
		<li>如果&lt;dubbo:protocol server="mina"/&gt;或&lt;dubbo:protocol server="grizzly"/&gt;，则换成mina.jar或grizzly.jar。</li>
		<li>如果&lt;protocol name="rmi"/&gt;，则不需要。</li>
	</ul>
	</li>
</ul>


<h3><a name="UserGuide-zh-%E5%8F%AF%E9%80%89%E4%BE%9D%E8%B5%96"></a>可选依赖</h3>

<p>以下依赖，在主动配置使用相应实现策略时用到，需自行加入依赖。</p>

<ul>
	<li>mina: 1.1.7</li>
	<li>grizzly: 2.1.4</li>
	<li>httpclient: 4.1.2</li>
	<li>hessian_lite: 3.2.1-fixed</li>
	<li>xstream: 1.4.1</li>
	<li>fastjson: 1.1.8</li>
	<li>zookeeper: 3.3.3</li>
	<li>jedis: 2.0.0</li>
	<li>xmemcached: 1.3.6</li>
	<li>jfreechart: 1.0.13</li>
	<li>hessian: 4.0.7</li>
	<li>jetty: 6.1.26</li>
	<li>hibernate-validator: 4.2.0.Final</li>
	<li>zkclient: 0.1</li>
	<li>curator: 1.1.10</li>
	<li>cxf: 2.6.1</li>
	<li>thrift: 0.8.0</li>
</ul>


<p>JEE:</p>
<ul>
	<li>servlet: 2.5</li>
	<li>bsf: 3.1</li>
	<li>validation-api: 1.0.0.GA</li>
	<li>jcache: 0.4</li>
</ul>

<h2><a name="UserGuide-zh-%E6%88%90%E7%86%9F%E5%BA%A6"></a>成熟度</h2>
<p>(<a href="http://dubbo.io/Maturity-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Maturity-zh" title="Maturity-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%88%90%E7%86%9F%E5%BA%A6">#</a>)</p>

<h3><a name="UserGuide-zh-%E5%8A%9F%E8%83%BD%E6%88%90%E7%86%9F%E5%BA%A6"></a>功能成熟度</h3>
<p>(<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8A%9F%E8%83%BD%E6%88%90%E7%86%9F%E5%BA%A6">#</a>)</p>

<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> <font color="#000000">Feature</font> </th>
<th class="confluenceTh"> <font color="#000000">Maturity</font> </th>
<th class="confluenceTh"> <font color="#000000">Strength</font> </th>
<th class="confluenceTh"> <font color="#000000">Problem</font> </th>
<th class="confluenceTh"> <font color="#000000">Advise</font> </th>
<th class="confluenceTh"> <font color="#000000">User</font> </th>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6">并发控制</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 并发控制 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%BF%9E%E6%8E%A5%E6%8E%A7%E5%88%B6">连接控制</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 连接数控制 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%9B%B4%E8%BF%9E%E6%8F%90%E4%BE%9B%E8%80%85">直连提供者</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 点对点直连服务提供方，用于测试 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 测试环境使用 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%88%86%E7%BB%84%E8%81%9A%E5%90%88">分组聚合</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 分组聚合返回值，用于菜单聚合等服务 </td>
<td class="confluenceTd"> 特殊场景使用 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8F%82%E6%95%B0%E9%AA%8C%E8%AF%81">参数验证</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 参数验证，JSR303验证框架集成 </td>
<td class="confluenceTd"> 对性能有影响 </td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd"> LaiWang </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%BB%93%E6%9E%9C%E7%BC%93%E5%AD%98">结果缓存</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 结果缓存，用于加速请求 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%9B%E5%8C%96%E5%BC%95%E7%94%A8">泛化引用</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 泛化调用，无需业务接口类进行远程调用，用于测试平台，开放网关桥接等 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%9B%E5%8C%96%E5%AE%9E%E7%8E%B0">泛化实现</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 泛化实现，无需业务接口类实现任意接口，用于Mock平台 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%9B%9E%E5%A3%B0%E6%B5%8B%E8%AF%95">回声测试</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 回声测试 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%9A%90%E5%BC%8F%E4%BC%A0%E5%8F%82">隐式传参</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 附加参数 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BC%82%E6%AD%A5%E8%B0%83%E7%94%A8">异步调用</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 不可靠异步调用 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%AC%E5%9C%B0%E8%B0%83%E7%94%A8">本地调用</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 本地调用 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8F%82%E6%95%B0%E5%9B%9E%E8%B0%83">参数回调</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 参数回调 </td>
<td class="confluenceTd"> 特殊场景使用 </td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd"> Registry </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%BA%8B%E4%BB%B6%E9%80%9A%E7%9F%A5">事件通知</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 事件通知，在远程调用执行前后触发 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%AC%E5%9C%B0%E5%AD%98%E6%A0%B9">本地存根</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 在客户端执行部分逻辑 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%AC%E5%9C%B0%E4%BC%AA%E8%A3%85">本地伪装</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 伪造返回结果，可在失败时执行，或直接执行，用于服务降级 </td>
<td class="confluenceTd"> 需注册中心支持 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BB%B6%E8%BF%9F%E6%9A%B4%E9%9C%B2">延迟暴露</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 延迟暴露服务，用于等待应用加载warmup数据，或等待spring加载完成 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BB%B6%E8%BF%9F%E8%BF%9E%E6%8E%A5">延迟连接</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 延迟建立连接，调用时建立 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd"> Registry </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%B2%98%E6%BB%9E%E8%BF%9E%E6%8E%A5">粘滞连接</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 粘滞连接，总是向同一个提供方发起请求，除非此提供方挂掉，再切换到另一台 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd"> Registry </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%BB%A4%E7%89%8C%E9%AA%8C%E8%AF%81">令牌验证</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 令牌验证，用于服务授权 </td>
<td class="confluenceTd"> 需注册中心支持 </td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99">路由规则</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 动态决定调用关系 </td>
<td class="confluenceTd"> 需注册中心支持 </td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99">配置规则</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 动态下发配置，实现功能的开关 </td>
<td class="confluenceTd"> 需注册中心支持 </td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97">访问日志</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 访问日志，用于记录调用信息 </td>
<td class="confluenceTd"> 本地存储，影响性能，受磁盘大小限制 </td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1">分布式事务</a> </td>
<td class="confluenceTd"> Research </td>
<td class="confluenceTd"> JTA/XA三阶段提交事务 </td>
<td class="confluenceTd"> 不稳定 </td>
<td class="confluenceTd"> 不可用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
</tbody></table>
</div>


<h3><a name="UserGuide-zh-%E7%AD%96%E7%95%A5%E6%88%90%E7%86%9F%E5%BA%A6"></a>策略成熟度</h3>
<p>(<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%AD%96%E7%95%A5%E6%88%90%E7%86%9F%E5%BA%A6">#</a>)</p>

<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> <font color="#000000">Feature</font> </th>
<th class="confluenceTh"> <font color="#000000">Maturity</font> </th>
<th class="confluenceTh"> <font color="#000000">Strength</font> </th>
<th class="confluenceTh"> <font color="#000000">Problem</font> </th>
<th class="confluenceTh"> <font color="#000000">Advise</font> </th>
<th class="confluenceTh"> <font color="#000000">User</font> </th>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Zookeeper%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">Zookeeper注册中心</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 支持基于网络的集群方式，有广泛周边开源产品，建议使用dubbo-2.3.3以上版本（推荐使用） </td>
<td class="confluenceTd"> 依赖于Zookeeper的稳定性 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Redis%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">Redis注册中心</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 支持基于客户端双写的集群方式，性能高 </td>
<td class="confluenceTd"> 要求服务器时间同步，用于检查心跳过期脏数据 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Multicast%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">Multicast注册中心</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 去中心化，不需要安装注册中心 </td>
<td class="confluenceTd"> 依赖于网络拓普和路由，跨机房有风险 </td>
<td class="confluenceTd"> 小规模应用或开发测试环境 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Simple%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">Simple注册中心</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> Dogfooding，注册中心本身也是一个标准的RPC服务 </td>
<td class="confluenceTd"> 没有集群支持，可能单点故障 </td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<th class="confluenceTh"> <font color="#000000">Feature</font> </th>
<th class="confluenceTh"> <font color="#000000">Maturity</font> </th>
<th class="confluenceTh"> <font color="#000000">Strength</font> </th>
<th class="confluenceTh"> <font color="#000000">Problem</font> </th>
<th class="confluenceTh"> <font color="#000000">Advise</font> </th>
<th class="confluenceTh"> <font color="#000000">User</font> </th>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Simple%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83">Simple监控中心</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 支持JFreeChart统计报表 </td>
<td class="confluenceTd"> 没有集群支持，可能单点故障，但故障后不影响RPC运行 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<th class="confluenceTh"> <font color="#000000">Feature</font> </th>
<th class="confluenceTh"> <font color="#000000">Maturity</font> </th>
<th class="confluenceTh"> <font color="#000000">Strength</font> </th>
<th class="confluenceTh"> <font color="#000000">Problem</font> </th>
<th class="confluenceTh"> <font color="#000000">Advise</font> </th>
<th class="confluenceTh"> <font color="#000000">User</font> </th>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-dubbo%253A%252F%252F">Dubbo协议</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 采用NIO复用单一长连接，并使用线程池并发处理请求，减少握手和加大并发效率，性能较好（推荐使用） </td>
<td class="confluenceTd"> 在大文件传输时，单一连接会成为瓶颈 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-rmi%253A%252F%252F">Rmi协议</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 可与原生RMI互操作，基于TCP协议 </td>
<td class="confluenceTd"> 偶尔会连接失败，需重建Stub </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-hessian%253A%252F%252F">Hessian协议</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 可与原生Hessian互操作，基于HTTP协议 </td>
<td class="confluenceTd"> 需hessian.jar支持，http短连接的开销大 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<th class="confluenceTh"> <font color="#000000">Feature</font> </th>
<th class="confluenceTh"> <font color="#000000">Maturity</font> </th>
<th class="confluenceTh"> <font color="#000000">Strength</font> </th>
<th class="confluenceTh"> <font color="#000000">Problem</font> </th>
<th class="confluenceTh"> <font color="#000000">Advise</font> </th>
<th class="confluenceTh"> <font color="#000000">User</font> </th>
</tr>
<tr>
<td class="confluenceTd"> Netty Transporter </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> JBoss的NIO框架，性能较好（推荐使用） </td>
<td class="confluenceTd"> 一次请求派发两种事件，需屏蔽无用事件 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> Mina Transporter </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 老牌NIO框架，稳定 </td>
<td class="confluenceTd"> 待发送消息队列派发不及时，大压力下，会出现FullGC </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> Grizzly Transporter </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> Sun的NIO框架，应用于GlassFish服务器中 </td>
<td class="confluenceTd"> 线程池不可扩展，Filter不能拦截下一Filter </td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<th class="confluenceTh"> <font color="#000000">Feature</font> </th>
<th class="confluenceTh"> <font color="#000000">Maturity</font> </th>
<th class="confluenceTh"> <font color="#000000">Strength</font> </th>
<th class="confluenceTh"> <font color="#000000">Problem</font> </th>
<th class="confluenceTh"> <font color="#000000">Advise</font> </th>
<th class="confluenceTh"> <font color="#000000">User</font> </th>
</tr>
<tr>
<td class="confluenceTd"> Hessian Serialization </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 性能较好，多语言支持（推荐使用） </td>
<td class="confluenceTd"> Hessian的各版本兼容性不好，可能和应用使用的Hessian冲突，Dubbo内嵌了hessian3.2.1的源码 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> Dubbo Serialization </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 通过不传送POJO的类元信息，在大量POJO传输时，性能较好 </td>
<td class="confluenceTd"> 当参数对象增加字段时，需外部文件声明 </td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> Json Serialization </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 纯文本，可跨语言解析，缺省采用FastJson解析 </td>
<td class="confluenceTd"> 性能较差 </td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> Java Serialization </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> Java原生支持 </td>
<td class="confluenceTd"> 性能较差 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<th class="confluenceTh"> <font color="#000000">Feature</font> </th>
<th class="confluenceTh"> <font color="#000000">Maturity</font> </th>
<th class="confluenceTh"> <font color="#000000">Strength</font> </th>
<th class="confluenceTh"> <font color="#000000">Problem</font> </th>
<th class="confluenceTh"> <font color="#000000">Advise</font> </th>
<th class="confluenceTh"> <font color="#000000">User</font> </th>
</tr>
<tr>
<td class="confluenceTd"> Javassist ProxyFactory </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 通过字节码生成代替反射，性能比较好（推荐使用） </td>
<td class="confluenceTd"> 依赖于javassist.jar包，占用JVM的Perm内存，Perm可能要设大一些：java&nbsp;-XX:PermSize=128m </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> Jdk ProxyFactory </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> JDK原生支持 </td>
<td class="confluenceTd"> 性能较差 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<th class="confluenceTh"> <font color="#000000">Feature</font> </th>
<th class="confluenceTh"> <font color="#000000">Maturity</font> </th>
<th class="confluenceTh"> <font color="#000000">Strength</font> </th>
<th class="confluenceTh"> <font color="#000000">Problem</font> </th>
<th class="confluenceTh"> <font color="#000000">Advise</font> </th>
<th class="confluenceTh"> <font color="#000000">User</font> </th>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-FailoverCluster">Failover Cluster</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 失败自动切换，当出现失败，重试其它服务器，通常用于读操作（推荐使用） </td>
<td class="confluenceTd"> 重试会带来更长延迟 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-FailfastCluster">Failfast Cluster</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 快速失败，只发起一次调用，失败立即报错,通常用于非幂等性的写操作 </td>
<td class="confluenceTd"> 如果有机器正在重启，可能会出现调用失败 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-FailsafeCluster">Failsafe Cluster</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 失败安全，出现异常时，直接忽略，通常用于写入审计日志等操作 </td>
<td class="confluenceTd"> 调用信息丢失 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Monitor </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-FailbackCluster">Failback Cluster</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 失败自动恢复，后台记录失败请求，定时重发，通常用于消息通知操作 </td>
<td class="confluenceTd"> 不可靠，重启丢失 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Registry </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-ForkingCluster">Forking Cluster</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 并行调用多个服务器，只要一个成功即返回，通常用于实时性要求较高的读操作 </td>
<td class="confluenceTd"> 需要浪费更多服务资源 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-BroadcastCluster">Broadcast Cluster</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 广播调用所有提供者，逐个调用，任意一台报错则报错，通常用于更新提供方本地状态 </td>
<td class="confluenceTd"> 速度慢，任意一台报错则报错 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<th class="confluenceTh"> <font color="#000000">Feature</font> </th>
<th class="confluenceTh"> <font color="#000000">Maturity</font> </th>
<th class="confluenceTh"> <font color="#000000">Strength</font> </th>
<th class="confluenceTh"> <font color="#000000">Problem</font> </th>
<th class="confluenceTh"> <font color="#000000">Advise</font> </th>
<th class="confluenceTh"> <font color="#000000">User</font> </th>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-RandomLoadBalance">Random LoadBalance</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 随机，按权重设置随机概率（推荐使用） </td>
<td class="confluenceTd"> 在一个截面上碰撞的概率高，重试时，可能出现瞬间压力不均 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-RoundRobinLoadBalance">RoundRobin LoadBalance</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 轮循，按公约后的权重设置轮循比率 </td>
<td class="confluenceTd"> 存在慢的机器累积请求问题，极端情况可能产生雪崩 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-LeastActiveLoadBalance">LeastActive LoadBalance</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 最少活跃调用数，相同活跃数的随机，活跃数指调用前后计数差，使慢的机器收到更少请求 </td>
<td class="confluenceTd"> 不支持权重，在容量规划时，不能通过权重把压力导向一台机器压测容量 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-ConsistentHashLoadBalance">ConsistentHash LoadBalance</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 一致性Hash，相同参数的请求总是发到同一提供者，当某一台提供者挂时，原本发往该提供者的请求，基于虚拟节点，平摊到其它提供者，不会引起剧烈变动 </td>
<td class="confluenceTd"> 压力分摊不均 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<th class="confluenceTh"> <font color="#000000">Feature</font> </th>
<th class="confluenceTh"> <font color="#000000">Maturity</font> </th>
<th class="confluenceTh"> <font color="#000000">Strength</font> </th>
<th class="confluenceTh"> <font color="#000000">Problem</font> </th>
<th class="confluenceTh"> <font color="#000000">Advise</font> </th>
<th class="confluenceTh"> <font color="#000000">User</font> </th>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9D%A1%E4%BB%B6%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99">条件路由规则</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 基于条件表达式的路由规则，功能简单易用 </td>
<td class="confluenceTd"> 有些复杂多分支条件情况，规则很难描述 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%84%9A%E6%9C%AC%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99">脚本路由规则</a> </td>
<td class="confluenceTd"> Tested </td>
<td class="confluenceTd"> 基于脚本引擎的路由规则，功能强大 </td>
<td class="confluenceTd"> 没有运行沙箱，脚本能力过于强大，可能成为后门 </td>
<td class="confluenceTd"> 试用 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<th class="confluenceTh"> <font color="#000000">Feature</font> </th>
<th class="confluenceTh"> <font color="#000000">Maturity</font> </th>
<th class="confluenceTh"> <font color="#000000">Strength</font> </th>
<th class="confluenceTh"> <font color="#000000">Problem</font> </th>
<th class="confluenceTh"> <font color="#000000">Advise</font> </th>
<th class="confluenceTh"> <font color="#000000">User</font> </th>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-SpringContainer">Spring Container</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 自动加载META-INF/spring目录下的所有Spring配置 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-JettyContainer">Jetty Container</a> </td>
<td class="confluenceTd"> Stable </td>
<td class="confluenceTd"> 启动一个内嵌Jetty，用于汇报状态 </td>
<td class="confluenceTd"> 大量访问页面时，会影响服务器的线程和内存 </td>
<td class="confluenceTd"> 可用于生产环境 </td>
<td class="confluenceTd"> Alibaba </td>
</tr>
<tr>
<td class="confluenceTd"> <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Log4jContainer">Log4j Container</a> </td>
<td class="confluenceTd"> Stable  </td>
<td class="confluenceTd"> 自动配置log4j的配置，在多进程启动时，自动给日志文件按进程分目录 </td>
<td class="confluenceTd"> 用户不能控制log4j的配置，不灵活 </td>
<td class="confluenceTd"> 可用于生产环境  </td>
<td class="confluenceTd"> Alibaba  </td>
</tr>
</tbody></table>
</div>

<h2><a name="UserGuide-zh-%E9%85%8D%E7%BD%AE"></a>配置</h2>
<p>(<a href="http://dubbo.io/Configs-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Configs-zh" title="Configs-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%85%8D%E7%BD%AE">#</a>)</p>

<h3><a name="UserGuide-zh-Xml%E9%85%8D%E7%BD%AE"></a>Xml配置</h3>
<p>(<a href="http://dubbo.io/Xml+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Xml+Config-zh" title="Xml Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Xml%E9%85%8D%E7%BD%AE">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>配置项说明</b><br>详细配置项，请参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%85%8D%E7%BD%AE%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C">配置参考手册</a> (<a href="http://dubbo.io/Configuration+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Configuration+Reference-zh" title="Configuration Reference-zh">+</a>)</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>API使用说明</b><br>如果不想使用Spring配置，而希望通过API的方式进行调用，请参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-API%E9%85%8D%E7%BD%AE">API配置</a> (<a href="http://dubbo.io/API+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/API+Config-zh" title="API Config-zh">+</a>)</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>配置使用说明</b><br>想知道如何使用配置，请参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8">快速启动</a> (<a href="http://dubbo.io/Quick+Start-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Quick+Start-zh" title="Quick Start-zh">+</a>)</td></tr></tbody></table></div>

<p>示例：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>provider.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_507219" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;?</code><code class="xml keyword">xml</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0"</code> <code class="xml color1">encoding</code><code class="xml plain">=</code><code class="xml string">"UTF-8"</code><code class="xml plain">?&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">beans</code> <code class="xml color1">xmlns</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beans" "="">http://www.springframework.org/schema/beans"</a></code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:xsi</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.w3.org/2001/XMLSchema-instance" "="">http://www.w3.org/2001/XMLSchema-instance"</a></code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:dubbo</code><code class="xml plain">=</code><code class="xml string">"<a href="http://code.alibabatech.com/schema/dubbo" "="">http://code.alibabatech.com/schema/dubbo"</a></code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xsi:schemaLocation</code><code class="xml plain">=</code><code class="xml string">"<a href=""></a>http://www.springframework.org/schema/beans&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href=""></a>http://www.springframework.org/schema/beans/spring-beans.xsd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href=""></a>http://code.alibabatech.com/schema/dubbo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="http://code.alibabatech.com/schema/dubbo/dubbo.xsd" "="">http://code.alibabatech.com/schema/dubbo/dubbo.xsd"</a></code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hello-world-app"</code>&nbsp; <code class="xml plain">/&gt;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"multicast://224.5.6.7:1234"</code> <code class="xml plain">/&gt;</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"20880"</code> <code class="xml plain">/&gt;</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.demo.DemoService"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"demoServiceLocal"</code> <code class="xml plain">/&gt;</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"demoServiceRemote"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.demo.DemoService"</code> <code class="xml plain">/&gt;</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">beans</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>所有标签者支持自定义参数，用于不同扩展点实现的特殊配置。</td></tr></tbody></table></div>

<p>如：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_154154" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"jms"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:parameter</code> <code class="xml color1">key</code><code class="xml plain">=</code><code class="xml string">"queue"</code> <code class="xml color1">value</code><code class="xml plain">=</code><code class="xml string">"<a href="http://10.20.160.198/wiki/display/dubbo/10.20.31.22" "="">http://10.20.160.198/wiki/display/dubbo/10.20.31.22"</a></code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:protocol</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>或：(2.1.0开始支持)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>注意声明：xmlns:p="http://www.springframework.org/schema/p"</td></tr></tbody></table></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_361042" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">beans</code> <code class="xml color1">xmlns</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beans" "="">http://www.springframework.org/schema/beans"</a></code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:xsi</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.w3.org/2001/XMLSchema-instance" "="">http://www.w3.org/2001/XMLSchema-instance"</a></code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:dubbo</code><code class="xml plain">=</code><code class="xml string">"<a href="http://code.alibabatech.com/schema/dubbo" "="">http://code.alibabatech.com/schema/dubbo"</a></code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:p</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/p" "="">http://www.springframework.org/schema/p"</a></code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xsi:schemaLocation</code><code class="xml plain">=</code><code class="xml string">"<a href=""></a>http://www.springframework.org/schema/beans&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href=""></a>http://www.springframework.org/schema/beans/spring-beans.xsd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href=""></a>http://code.alibabatech.com/schema/dubbo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="http://code.alibabatech.com/schema/dubbo/dubbo.xsd" "="">http://code.alibabatech.com/schema/dubbo/dubbo.xsd"</a></code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"jms"</code> <code class="xml color1">p:queue</code><code class="xml plain">=</code><code class="xml string">"<a href="http://10.20.160.198/wiki/display/dubbo/10.20.31.22" "="">http://10.20.160.198/wiki/display/dubbo/10.20.31.22"</a></code> <code class="xml plain">/&gt;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">beans</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p><b>Configuration Relation:</b></p>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/dubbo-config.jpg-version=1&modificationDate=1330708121000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/7668102/dubbo-config.jpg?version=1&amp;modificationDate=1330708121000" style="border: 0px solid black"></span></p>
<ul>
	<li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aservice%252F%253E">&lt;dubbo:service/&gt;</a> 服务配置，用于暴露一个服务，定义服务的元信息，一个服务可以用多个协议暴露，一个服务也可以注册到多个注册中心。</li>
	<li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Areference%252F%253E">&lt;dubbo:reference/&gt;</a> 引用配置，用于创建一个远程服务代理，一个引用可以指向多个注册中心。</li>
	<li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aprotocol%252F%253E">&lt;dubbo:protocol/&gt;</a>  协议配置，用于配置提供服务的协议信息，协议由提供方指定，消费方被动接受。</li>
	<li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aapplication%252F%253E">&lt;dubbo:application/&gt;</a> 应用配置，用于配置当前应用信息，不管该应用是提供者还是消费者。</li>
	<li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Amodule%252F%253E">&lt;dubbo:module/&gt;</a> 模块配置，用于配置当前模块信息，可选。</li>
	<li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aregistry%252F%253E">&lt;dubbo:registry/&gt;</a>  注册中心配置，用于配置连接注册中心相关信息。</li>
	<li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Amonitor%252F%253E">&lt;dubbo:monitor/&gt;</a>  监控中心配置，用于配置连接监控中心相关信息，可选。</li>
	<li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aprovider%252F%253E">&lt;dubbo:provider/&gt;</a> 提供方的缺省值，当ProtocolConfig和ServiceConfig某属性没有配置时，采用此缺省值，可选。</li>
	<li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aconsumer%252F%253E">&lt;dubbo:consumer/&gt;</a> 消费方缺省配置，当ReferenceConfig某属性没有配置时，采用此缺省值，可选。</li>
	<li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Amethod%252F%253E">&lt;dubbo:method/&gt;</a> 方法配置，用于ServiceConfig和ReferenceConfig指定方法级的配置信息。</li>
	<li><a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aargument%252F%253E">&lt;dubbo:argument/&gt;</a> 用于指定方法参数配置。</li>
</ul>


<p><b>Configuration Override:</b></p>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/dubbo-config-override.jpg-version=1&modificationDate=1330708128000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/7668102/dubbo-config-override.jpg?version=1&amp;modificationDate=1330708128000" style="border: 0px solid black"></span> </p>
<ul>
	<li>上图中以timeout为例，显示了配置的查找顺序，其它retries, loadbalance, actives等类似。
	<ul>
		<li>方法级优先，接口级次之，全局配置再次之。</li>
		<li>如果级别一样，则消费方优先，提供方次之。</li>
	</ul>
	</li>
	<li>其中，服务提供方配置，通过URL经由注册中心传递给消费方。</li>
	<li>建议由服务提供方设置超时，因为一个方法需要执行多长时间，服务提供方更清楚，如果一个消费方同时引用多个服务，就不需要关心每个服务的超时设置。</li>
	<li>理论上ReferenceConfig的非服务标识配置，在ConsumerConfig，ServiceConfig, ProviderConfig均可以缺省配置。</li>
</ul>

<h3><a name="UserGuide-zh-%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE"></a>属性配置</h3>
<p>(<a href="http://dubbo.io/Properties+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Properties+Config-zh" title="Properties Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>如果公共配置很简单，没有多注册中心，多协议等情况，或者想多个Spring容器想共享配置，可以使用dubbo.properties作为缺省配置。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Dubbo将自动加载classpath根目录下的dubbo.properties，可以通过JVM启动参数：-Ddubbo.properties.file=xxx.properties 改变缺省配置位置。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>如果classpath根目录下存在多个dubbo.properties，比如多个jar包中有dubbo.properties，Dubbo会任意加载，并打印Error日志，后续可能改为抛异常。</td></tr></tbody></table></div>

<p>映射规则：</p>
<ul>
	<li>将XML配置的标签名，加属性名，用点分隔，多个属性拆成多行：
	<ul>
		<li>比如：dubbo.application.name=foo等价于&lt;dubbo:application name="foo" /&gt;</li>
		<li>比如：dubbo.registry.address=10.20.153.10:9090等价于&lt;dubbo:registry address="10.20.153.10:9090" /&gt;</li>
	</ul>
	</li>
	<li>如果XML有多行同名标签配置，可用id号区分，如果没有id号将对所有同名标签生效：
	<ul>
		<li>比如：dubbo.protocol.rmi.port=1234等价于&lt;dubbo:protocol id="rmi" name="rmi" port="1099" /&gt; (协议的id没配时，缺省使用协议名作为id)</li>
		<li>比如：dubbo.registry.china.address=10.20.153.10:9090等价于&lt;dubbo:registry id="china" address="10.20.153.10:9090" /&gt;</li>
	</ul>
	</li>
</ul>


<p>典型配置如：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>dubbo.properties</b></div><div class="codeContent panelContent">
<div><div id="highlighter_561297" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">dubbo.application.name=foo</code></div><div class="line number2 index1 alt1"><code class="java plain">dubbo.application.owner=bar</code></div><div class="line number3 index2 alt2"><code class="java plain">dubbo.registry.address=</code><code class="java value">10.20</code><code class="java plain">.</code><code class="java value">153.10</code><code class="java plain">:</code><code class="java value">9090</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/dubbo-properties-override.jpg-version=1&modificationDate=1326771444000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6950129/dubbo-properties-override.jpg?version=1&amp;modificationDate=1326771444000" style="border: 0px solid black"></span></p>

<p>覆盖策略：</p>
<ul>
	<li>JVM启动-D参数优先，这样可以使用户在部署和启动时进行参数重写，比如在启动时需改变协议的端口。</li>
	<li>XML次之，如果在XML中有配置，则dubbo.properties中的相应配置项无效。</li>
	<li>Properties最后，相当于缺省值，只有XML没有配置时，dubbo.properties的相应配置项才会生效，通常用于共享公共配置，比如应用名。</li>
</ul>

<h3><a name="UserGuide-zh-%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE"></a>注解配置</h3>
<p>(<a href="http://dubbo.io/Annotation+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Annotation+Config-zh" title="Annotation Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE">#</a>)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>2.2.1以上版本支持</td></tr></tbody></table></div>

<p>服务提供方注解：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_240162" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.config.annotation.Service;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java color1">@Service</code><code class="java plain">(version=</code><code class="java string">"1.0.0"</code><code class="java plain">)</code></div><div class="line number4 index3 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">FooServiceImpl </code><code class="java keyword">implements</code> <code class="java plain">FooService {</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ......</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>服务提供方配置：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_204621" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!-- 公共信息，也可以用dubbo.properties配置 --&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"annotation-provider"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"127.0.0.1:4548"</code> <code class="xml plain">/&gt;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="xml comments">&lt;!-- 扫描注解包路径，多个包用逗号分隔，不填pacakge表示扫描当前ApplicationContext中所有的类 --&gt;</code></div><div class="line number6 index5 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:annotation</code> <code class="xml color1">package</code><code class="xml plain">=</code><code class="xml string">"com.foo.bar.service"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>服务消费方注解：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_371195" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.config.annotation.Reference;</code></div><div class="line number2 index1 alt1"><code class="java keyword">import</code> <code class="java plain">org.springframework.stereotype.Component;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java color1">@Component</code></div><div class="line number5 index4 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">BarAction {</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Reference</code><code class="java plain">(version=</code><code class="java string">"1.0.0"</code><code class="java plain">)</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java plain">FooService fooService;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>服务消费方配置：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_527312" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!-- 公共信息，也可以用dubbo.properties配置 --&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"annotation-consumer"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"127.0.0.1:4548"</code> <code class="xml plain">/&gt;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="xml comments">&lt;!-- 扫描注解包路径，多个包用逗号分隔，不填pacakge表示扫描当前ApplicationContext中所有的类 --&gt;</code></div><div class="line number6 index5 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:annotation</code> <code class="xml color1">package</code><code class="xml plain">=</code><code class="xml string">"com.foo.bar.action"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>也可以使用：(等价于前面的：&lt;dubbo:annotation package="com.foo.bar.service" /&gt;)</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_284579" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:annotation</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">context:component-scan</code> <code class="xml color1">base-package</code><code class="xml plain">=</code><code class="xml string">"com.foo.bar.service"</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">context:include-filter</code> <code class="xml color1">type</code><code class="xml plain">=</code><code class="xml string">"annotation"</code> <code class="xml color1">expression</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.config.annotation.Service"</code> <code class="xml plain">/&gt;</code></div><div class="line number4 index3 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">context:component-scan</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Spring2.5及以后版本支持component-scan，如果用的是Spring2.0及以前版本，需配置：
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_57861" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!-- Spring2.0支持@Service注解配置，但不支持package属性自动加载bean的实例，需人工定义bean的实例。--&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:annotation</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">bean</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"barService"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarServiceImpl"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div></td></tr></tbody></table></div>
<h3><a name="UserGuide-zh-API%E9%85%8D%E7%BD%AE"></a>API配置</h3>
<p>(<a href="http://dubbo.io/API+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/API+Config-zh" title="API Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-API%E9%85%8D%E7%BD%AE">#</a>)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>API使用范围</b><br>API仅用于OpenAPI, ESB, Test, Mock等系统集成，普通服务提供方或消费方，请采用配置方式使用Dubbo，请参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Xml%E9%85%8D%E7%BD%AE">Xml配置</a> (<a href="http://dubbo.io/Xml+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Xml+Config-zh" title="Xml Config-zh">+</a>)</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>API属性含义参考</b><br>API属性与配置项一对一，各属性含义，请参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%85%8D%E7%BD%AE%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C">配置参考手册</a> (<a href="http://dubbo.io/Configuration+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Configuration+Reference-zh" title="Configuration Reference-zh">+</a>)，<br>
比如：ApplicationConfig.setName("xxx") 对应 &lt;dubbo:application name="xxx" /&gt;</td></tr></tbody></table></div>

<h4><a name="UserGuide-zh-%281%29%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%EF%BC%9A"></a>(1) 服务提供者：</h4>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_42935" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.rpc.config.ApplicationConfig;</code></div><div class="line number2 index1 alt1"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.rpc.config.RegistryConfig;</code></div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.rpc.config.ProviderConfig;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.rpc.config.ServiceConfig;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">com.xxx.XxxService;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">com.xxx.XxxServiceImpl;</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="java comments">// 服务实现</code></div><div class="line number9 index8 alt2"><code class="java plain">XxxService xxxService = </code><code class="java keyword">new</code> <code class="java plain">XxxServiceImpl();</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java comments">// 当前应用配置</code></div><div class="line number12 index11 alt1"><code class="java plain">ApplicationConfig application = </code><code class="java keyword">new</code> <code class="java plain">ApplicationConfig();</code></div><div class="line number13 index12 alt2"><code class="java plain">application.setName(</code><code class="java string">"xxx"</code><code class="java plain">);</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="java comments">// 连接注册中心配置</code></div><div class="line number16 index15 alt1"><code class="java plain">RegistryConfig registry = </code><code class="java keyword">new</code> <code class="java plain">RegistryConfig();</code></div><div class="line number17 index16 alt2"><code class="java plain">registry.setAddress(</code><code class="java string">"10.20.130.230:9090"</code><code class="java plain">);</code></div><div class="line number18 index17 alt1"><code class="java plain">registry.setUsername(</code><code class="java string">"aaa"</code><code class="java plain">);</code></div><div class="line number19 index18 alt2"><code class="java plain">registry.setPassword(</code><code class="java string">"bbb"</code><code class="java plain">);</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="java comments">// 服务提供者协议配置</code></div><div class="line number22 index21 alt1"><code class="java plain">ProtocolConfig protocol = </code><code class="java keyword">new</code> <code class="java plain">ProtocolConfig();</code></div><div class="line number23 index22 alt2"><code class="java plain">protocol.setName(</code><code class="java string">"dubbo"</code><code class="java plain">);</code></div><div class="line number24 index23 alt1"><code class="java plain">protocol.setPort(</code><code class="java value">12345</code><code class="java plain">);</code></div><div class="line number25 index24 alt2"><code class="java plain">protocol.setThreads(</code><code class="java value">200</code><code class="java plain">);</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="java comments">// 注意：ServiceConfig为重对象，内部封装了与注册中心的连接，以及开启服务端口</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="java comments">// 服务提供者暴露服务配置</code></div><div class="line number30 index29 alt1"><code class="java plain">ServiceConfig&lt;XxxService&gt; service = </code><code class="java keyword">new</code> <code class="java plain">ServiceConfig&lt;XxxService&gt;(); </code><code class="java comments">// 此实例很重，封装了与注册中心的连接，请自行缓存，否则可能造成内存和连接泄漏</code></div><div class="line number31 index30 alt2"><code class="java plain">service.setApplication(application);</code></div><div class="line number32 index31 alt1"><code class="java plain">service.setRegistry(registry); </code><code class="java comments">// 多个注册中心可以用setRegistries()</code></div><div class="line number33 index32 alt2"><code class="java plain">service.setProtocol(protocol); </code><code class="java comments">// 多个协议可以用setProtocols()</code></div><div class="line number34 index33 alt1"><code class="java plain">service.setInterface(XxxService.</code><code class="java keyword">class</code><code class="java plain">);</code></div><div class="line number35 index34 alt2"><code class="java plain">service.setRef(xxxService);</code></div><div class="line number36 index35 alt1"><code class="java plain">service.setVersion(</code><code class="java string">"1.0.0"</code><code class="java plain">);</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="java comments">// 暴露及注册服务</code></div><div class="line number39 index38 alt2"><code class="java plain">service.export();</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-%282%29%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85%EF%BC%9A"></a>(2) 服务消费者：</h4>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_917134" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.rpc.config.ApplicationConfig;</code></div><div class="line number2 index1 alt1"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.rpc.config.RegistryConfig;</code></div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.rpc.config.ConsumerConfig;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.rpc.config.ReferenceConfig;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">com.xxx.XxxService;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java comments">// 当前应用配置</code></div><div class="line number8 index7 alt1"><code class="java plain">ApplicationConfig application = </code><code class="java keyword">new</code> <code class="java plain">ApplicationConfig();</code></div><div class="line number9 index8 alt2"><code class="java plain">application.setName(</code><code class="java string">"yyy"</code><code class="java plain">);</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java comments">// 连接注册中心配置</code></div><div class="line number12 index11 alt1"><code class="java plain">RegistryConfig registry = </code><code class="java keyword">new</code> <code class="java plain">RegistryConfig();</code></div><div class="line number13 index12 alt2"><code class="java plain">registry.setAddress(</code><code class="java string">"10.20.130.230:9090"</code><code class="java plain">);</code></div><div class="line number14 index13 alt1"><code class="java plain">registry.setUsername(</code><code class="java string">"aaa"</code><code class="java plain">);</code></div><div class="line number15 index14 alt2"><code class="java plain">registry.setPassword(</code><code class="java string">"bbb"</code><code class="java plain">);</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="java comments">// 注意：ReferenceConfig为重对象，内部封装了与注册中心的连接，以及与服务提供方的连接</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="java comments">// 引用远程服务</code></div><div class="line number20 index19 alt1"><code class="java plain">ReferenceConfig&lt;XxxService&gt; reference = </code><code class="java keyword">new</code> <code class="java plain">ReferenceConfig&lt;XxxService&gt;(); </code><code class="java comments">// 此实例很重，封装了与注册中心的连接以及与提供者的连接，请自行缓存，否则可能造成内存和连接泄漏</code></div><div class="line number21 index20 alt2"><code class="java plain">reference.setApplication(application);</code></div><div class="line number22 index21 alt1"><code class="java plain">reference.setRegistry(registry); </code><code class="java comments">// 多个注册中心可以用setRegistries()</code></div><div class="line number23 index22 alt2"><code class="java plain">reference.setInterface(XxxService.</code><code class="java keyword">class</code><code class="java plain">);</code></div><div class="line number24 index23 alt1"><code class="java plain">reference.setVersion(</code><code class="java string">"1.0.0"</code><code class="java plain">);</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="java comments">// 和本地bean一样使用xxxService</code></div><div class="line number27 index26 alt2"><code class="java plain">XxxService xxxService = reference.get(); </code><code class="java comments">// 注意：此代理对象内部封装了所有通讯细节，对象较重，请缓存复用</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-%283%29%E7%89%B9%E6%AE%8A%E5%9C%BA%E6%99%AF"></a>(3) 特殊场景</h4>

<p><font color="green">注：下面只列出不同的地方，其它参见上面的写法</font></p>

<h4><a name="UserGuide-zh-%283.1%29%E6%96%B9%E6%B3%95%E7%BA%A7%E8%AE%BE%E7%BD%AE%EF%BC%9A"></a>(3.1) 方法级设置：</h4>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_856981" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">...</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java comments">// 方法级配置</code></div><div class="line number4 index3 alt1"><code class="java plain">List&lt;MethodConfig&gt; methods = </code><code class="java keyword">new</code> <code class="java plain">ArrayList&lt;MethodConfig&gt;();</code></div><div class="line number5 index4 alt2"><code class="java plain">MethodConfig method = </code><code class="java keyword">new</code> <code class="java plain">MethodConfig();</code></div><div class="line number6 index5 alt1"><code class="java plain">method.setName(</code><code class="java string">"createXxx"</code><code class="java plain">);</code></div><div class="line number7 index6 alt2"><code class="java plain">method.setTimeout(</code><code class="java value">10000</code><code class="java plain">);</code></div><div class="line number8 index7 alt1"><code class="java plain">method.setRetries(</code><code class="java value">0</code><code class="java plain">);</code></div><div class="line number9 index8 alt2"><code class="java plain">methods.add(method);</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java comments">// 引用远程服务</code></div><div class="line number12 index11 alt1"><code class="java plain">ReferenceConfig&lt;XxxService&gt; reference = </code><code class="java keyword">new</code> <code class="java plain">ReferenceConfig&lt;XxxService&gt;(); </code><code class="java comments">// 此实例很重，封装了与注册中心的连接以及与提供者的连接，请自行缓存，否则可能造成内存和连接泄漏</code></div><div class="line number13 index12 alt2"><code class="java plain">...</code></div><div class="line number14 index13 alt1"><code class="java plain">reference.setMethods(methods); </code><code class="java comments">// 设置方法级配置</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="java plain">...</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-%283.2%29%E7%82%B9%E5%AF%B9%E7%82%B9%E7%9B%B4%E8%BF%9E%EF%BC%9A"></a>(3.2) 点对点直连：</h4>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_590350" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">...</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java plain">ReferenceConfig&lt;XxxService&gt; reference = </code><code class="java keyword">new</code> <code class="java plain">ReferenceConfig&lt;XxxService&gt;(); </code><code class="java comments">// 此实例很重，封装了与注册中心的连接以及与提供者的连接，请自行缓存，否则可能造成内存和连接泄漏</code></div><div class="line number4 index3 alt1"><code class="java comments">// 如果点对点直连，可以用reference.setUrl()指定目标地址，设置url后将绕过注册中心，</code></div><div class="line number5 index4 alt2"><code class="java comments">// 其中，协议对应provider.setProtocol()的值，端口对应provider.setPort()的值，</code></div><div class="line number6 index5 alt1"><code class="java comments">// 路径对应service.setPath()的值，如果未设置path，缺省path为接口名</code></div><div class="line number7 index6 alt2"><code class="java plain">reference.setUrl(</code><code class="java string">"dubbo://10.20.130.230:20880/com.xxx.XxxService"</code><code class="java plain">); </code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="java plain">...</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h2><a name="UserGuide-zh-%E7%A4%BA%E4%BE%8B"></a>示例</h2>
<p>(<a href="http://dubbo.io/Examples-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Examples-zh" title="Examples-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%A4%BA%E4%BE%8B">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>想完整的运行起来，请参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8">快速启动</a> (<a href="http://dubbo.io/Quick+Start-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Quick+Start-zh" title="Quick Start-zh">+</a>)，这里只列出各种场景的配置方式</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>以下示例全部使用基于Spring的<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Xml%E9%85%8D%E7%BD%AE">Xml配置</a> (<a href="http://dubbo.io/Xml+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Xml+Config-zh" title="Xml Config-zh">+</a>)作为参考，如果不想使用Spring，而希望通过API的方式进行调用，请参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-API%E9%85%8D%E7%BD%AE">API配置</a> (<a href="http://dubbo.io/API+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/API+Config-zh" title="API Config-zh">+</a>)</td></tr></tbody></table></div>

<h3><a name="UserGuide-zh-%E5%90%AF%E5%8A%A8%E6%97%B6%E6%A3%80%E6%9F%A5"></a>启动时检查</h3>
<p>(<a href="http://dubbo.io/Check+On+Startup-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Check+On+Startup-zh" title="Check On Startup-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%90%AF%E5%8A%A8%E6%97%B6%E6%A3%80%E6%9F%A5">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Dubbo缺省会在启动时检查依赖的服务是否可用，不可用时会抛出异常，阻止Spring初始化完成，以便上线时，能及早发现问题，默认check=true。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>如果你的Spring容器是懒加载的，或者通过API编程延迟引用服务，请关闭check，否则服务临时不可用时，会抛出异常，拿到null引用，如果check=false，总是会返回引用，当服务恢复时，能自动连上。</td></tr></tbody></table></div>

<p>可以通过check="false"关闭检查，比如，测试时，有些服务不关心，或者出现了循环依赖，必须有一方先启动。</p>

<p>关闭某个服务的启动时检查：(没有提供者时报错)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_197414" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">check</code><code class="xml plain">=</code><code class="xml string">"false"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>关闭所有服务的启动时检查：(没有提供者时报错)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_337684" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:consumer</code> <code class="xml color1">check</code><code class="xml plain">=</code><code class="xml string">"false"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>关闭注册中心启动时检查：(注册订阅失败时报错)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_370661" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">check</code><code class="xml plain">=</code><code class="xml string">"false"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>也可以用dubbo.properties配置：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>dubbo.properties</b></div><div class="codeContent panelContent">
<div><div id="highlighter_934853" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">dubbo.reference.com.foo.BarService.check=false</code></div><div class="line number2 index1 alt1"><code class="text plain">dubbo.reference.check=false</code></div><div class="line number3 index2 alt2"><code class="text plain">dubbo.consumer.check=false</code></div><div class="line number4 index3 alt1"><code class="text plain">dubbo.registry.check=false</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>也可以用-D参数：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_356793" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">java -Ddubbo.reference.com.foo.BarService.check=false</code></div><div class="line number2 index1 alt1"><code class="text plain">java -Ddubbo.reference.check=false</code></div><div class="line number3 index2 alt2"><code class="text plain">java -Ddubbo.consumer.check=false </code></div><div class="line number4 index3 alt1"><code class="text plain">java -Ddubbo.registry.check=false</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>注意区别</b><br><ul>
	<li>dubbo.reference.check=false，强制改变所有reference的check值，就算配置中有声明，也会被覆盖。</li>
	<li>dubbo.consumer.check=false，是设置check的缺省值，如果配置中有显式的声明，如：&lt;dubbo:reference check="true"/&gt;，不会受影响。</li>
	<li>dubbo.registry.check=false，前面两个都是指订阅成功，但提供者列表是否为空是否报错，如果注册订阅失败时，也允许启动，需使用此选项，将在后台定时重试。</li>
</ul>
</td></tr></tbody></table></div>

<p>引用缺省是延迟初始化的，只有引用被注入到其它Bean，或被getBean()获取，才会初始化。<br>
如果需要饥饿加载，即没有人引用也立即生成动态代理，可以配置：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_18723" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">init</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E9%9B%86%E7%BE%A4%E5%AE%B9%E9%94%99"></a>集群容错</h3>
<p>(<a href="http://dubbo.io/Fault+Tolerance-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Fault+Tolerance-zh" title="Fault Tolerance-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%9B%86%E7%BE%A4%E5%AE%B9%E9%94%99">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>在集群调用失败时，Dubbo提供了多种容错方案，缺省为failover重试。</td></tr></tbody></table></div>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/cluster.jpg-version=1&modificationDate=1321028038000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6949932/cluster.jpg?version=1&amp;modificationDate=1321028038000" style="border: 0px solid black"></span></p>

<p>各节点关系：</p>
<ul>
	<li>这里的Invoker是Provider的一个可调用Service的抽象，Invoker封装了Provider地址及Service接口信息。</li>
	<li>Directory代表多个Invoker，可以把它看成List&lt;Invoker&gt;，但与List不同的是，它的值可能是动态变化的，比如注册中心推送变更。</li>
	<li>Cluster将Directory中的多个Invoker伪装成一个Invoker，对上层透明，伪装过程包含了容错逻辑，调用失败后，重试另一个。</li>
	<li>Router负责从多个Invoker中按路由规则选出子集，比如读写分离，应用隔离等。</li>
	<li>LoadBalance负责从多个Invoker中选出具体的一个用于本次调用，选的过程包含了负载均衡算法，调用失败后，需要重选。</li>
</ul>


<h5><a name="UserGuide-zh-%E9%9B%86%E7%BE%A4%E5%AE%B9%E9%94%99%E6%A8%A1%E5%BC%8F%EF%BC%9A"></a>集群容错模式：</h5>

<p>可以自行扩展集群容错策略，参见：<a href="http://dubbo.io/Developer+Guide-zh.htm#DeveloperGuide-zh-%E9%9B%86%E7%BE%A4%E6%89%A9%E5%B1%95" tppabs="http://10.20.160.198/wiki/display/dubbo/Developer+Guide-zh#DeveloperGuide-zh-%E9%9B%86%E7%BE%A4%E6%89%A9%E5%B1%95">集群扩展</a></p>

<h6><a name="UserGuide-zh-FailoverCluster"></a>Failover Cluster</h6>
<ul>
	<li>失败自动切换，当出现失败，重试其它服务器。(缺省)</li>
	<li>通常用于读操作，但重试会带来更长延迟。</li>
	<li>可通过retries="2"来设置重试次数(不含第一次)。</li>
</ul>


<h6><a name="UserGuide-zh-FailfastCluster"></a>Failfast Cluster</h6>
<ul>
	<li>快速失败，只发起一次调用，失败立即报错。</li>
	<li>通常用于非幂等性的写操作，比如新增记录。</li>
</ul>


<h6><a name="UserGuide-zh-FailsafeCluster"></a>Failsafe Cluster</h6>
<ul>
	<li>失败安全，出现异常时，直接忽略。</li>
	<li>通常用于写入审计日志等操作。</li>
</ul>


<h6><a name="UserGuide-zh-FailbackCluster"></a>Failback Cluster</h6>
<ul>
	<li>失败自动恢复，后台记录失败请求，定时重发。</li>
	<li>通常用于消息通知操作。</li>
</ul>


<h6><a name="UserGuide-zh-ForkingCluster"></a>Forking Cluster</h6>
<ul>
	<li>并行调用多个服务器，只要一个成功即返回。</li>
	<li>通常用于实时性要求较高的读操作，但需要浪费更多服务资源。</li>
	<li>可通过forks="2"来设置最大并行数。</li>
</ul>


<h6><a name="UserGuide-zh-BroadcastCluster"></a>Broadcast Cluster</h6>
<ul>
	<li>广播调用所有提供者，逐个调用，任意一台报错则报错。(2.1.0开始支持)</li>
	<li>通常用于通知所有提供者更新缓存或日志等本地资源信息。</li>
</ul>


<p>重试次数配置如：(failover集群模式生效)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_665455" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">retries</code><code class="xml plain">=</code><code class="xml string">"2"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_87571" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">retries</code><code class="xml plain">=</code><code class="xml string">"2"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_73620" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"findFoo"</code> <code class="xml color1">retries</code><code class="xml plain">=</code><code class="xml string">"2"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:reference</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>集群模式配置如：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_183528" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">cluster</code><code class="xml plain">=</code><code class="xml string">"failsafe"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_839984" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">cluster</code><code class="xml plain">=</code><code class="xml string">"failsafe"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1"></a>负载均衡</h3>
<p>(<a href="http://dubbo.io/Load+Balance-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Load+Balance-zh" title="Load Balance-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>在集群负载均衡时，Dubbo提供了多种均衡策略，缺省为random随机调用。</td></tr></tbody></table></div>

<p>可以自行扩展负载均衡策略，参见：<a href="http://dubbo.io/Developer+Guide-zh.htm#DeveloperGuide-zh-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E6%89%A9%E5%B1%95" tppabs="http://10.20.160.198/wiki/display/dubbo/Developer+Guide-zh#DeveloperGuide-zh-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E6%89%A9%E5%B1%95">负载均衡扩展</a></p>

<h6><a name="UserGuide-zh-RandomLoadBalance"></a>Random LoadBalance</h6>
<ul>
	<li>随机，按权重设置随机概率。</li>
	<li>在一个截面上碰撞的概率高，但调用量越大分布越均匀，而且按概率使用权重后也比较均匀，有利于动态调整提供者权重。</li>
</ul>


<h6><a name="UserGuide-zh-RoundRobinLoadBalance"></a>RoundRobin LoadBalance</h6>
<ul>
	<li>轮循，按公约后的权重设置轮循比率。</li>
	<li>存在慢的提供者累积请求问题，比如：第二台机器很慢，但没挂，当请求调到第二台时就卡在那，久而久之，所有请求都卡在调到第二台上。</li>
</ul>


<h6><a name="UserGuide-zh-LeastActiveLoadBalance"></a>LeastActive LoadBalance</h6>
<ul>
	<li>最少活跃调用数，相同活跃数的随机，活跃数指调用前后计数差。</li>
	<li>使慢的提供者收到更少请求，因为越慢的提供者的调用前后计数差会越大。</li>
</ul>


<h6><a name="UserGuide-zh-ConsistentHashLoadBalance"></a>ConsistentHash LoadBalance</h6>
<ul>
	<li>一致性Hash，相同参数的请求总是发到同一提供者。</li>
	<li>当某一台提供者挂时，原本发往该提供者的请求，基于虚拟节点，平摊到其它提供者，不会引起剧烈变动。</li>
	<li>算法参见：<a href="javascript:if(confirm(%27http://en.wikipedia.org/wiki/Consistent_hashing  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://en.wikipedia.org/wiki/Consistent_hashing%27" tppabs="http://en.wikipedia.org/wiki/Consistent_hashing" class="external-link" rel="nofollow">http://en.wikipedia.org/wiki/Consistent_hashing</a>。</li>
	<li>缺省只对第一个参数Hash，如果要修改，请配置&lt;dubbo:parameter key="hash.arguments" value="0,1" /&gt;</li>
	<li>缺省用160份虚拟节点，如果要修改，请配置&lt;dubbo:parameter key="hash.nodes" value="320" /&gt;</li>
</ul>


<p>配置如：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_909339" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"..."</code> <code class="xml color1">loadbalance</code><code class="xml plain">=</code><code class="xml string">"roundrobin"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_492005" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"..."</code> <code class="xml color1">loadbalance</code><code class="xml plain">=</code><code class="xml string">"roundrobin"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_89416" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"..."</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"..."</code> <code class="xml color1">loadbalance</code><code class="xml plain">=</code><code class="xml string">"roundrobin"</code><code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:service</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_39814" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"..."</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"..."</code> <code class="xml color1">loadbalance</code><code class="xml plain">=</code><code class="xml string">"roundrobin"</code><code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:reference</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B"></a>线程模型</h3>
<p>(<a href="http://dubbo.io/Thread+Model-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Thread+Model-zh" title="Thread Model-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B">#</a>)</p>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/dubbo-protocol.jpg-version=1&modificationDate=1331068241000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6949458/dubbo-protocol.jpg?version=1&amp;modificationDate=1331068241000" style="border: 0px solid black"></span></p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>事件处理线程说明</b><br><ul>
	<li>如果事件处理的逻辑能迅速完成，并且不会发起新的IO请求，比如只是在内存中记个标识，则直接在IO线程上处理更快，因为减少了线程池调度。</li>
	<li>但如果事件处理逻辑较慢，或者需要发起新的IO请求，比如需要查询数据库，则必须派发到线程池，否则IO线程阻塞，将导致不能接收其它请求。</li>
	<li>如果用IO线程处理事件，又在事件处理过程中发起新的IO请求，比如在连接事件中发起登录请求，会报“可能引发死锁”异常，但不会真死锁。</li>
</ul>
</td></tr></tbody></table></div>

<ul>
	<li>Dispatcher
	<ul>
		<li>all 所有消息都派发到线程池，包括请求，响应，连接事件，断开事件，心跳等。</li>
		<li>direct 所有消息都不派发到线程池，全部在IO线程上直接执行。</li>
		<li>message 只有请求响应消息派发到线程池，其它连接断开事件，心跳等消息，直接在IO线程上执行。</li>
		<li>execution 只请求消息派发到线程池，不含响应，响应和其它连接断开事件，心跳等消息，直接在IO线程上执行。</li>
		<li>connection 在IO线程上，将连接断开事件放入队列，有序逐个执行，其它消息派发到线程池。</li>
	</ul>
	</li>
</ul>


<ul>
	<li>ThreadPool
	<ul>
		<li>fixed 固定大小线程池，启动时建立线程，不关闭，一直持有。(缺省)</li>
		<li>cached 缓存线程池，空闲一分钟自动删除，需要时重建。</li>
		<li>limited 可伸缩线程池，但池中的线程数只会增长不会收缩。(为避免收缩时突然来了大流量引起的性能问题)。</li>
	</ul>
	</li>
</ul>


<p>配置如：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_802163" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">dispatcher</code><code class="xml plain">=</code><code class="xml string">"all"</code> <code class="xml color1">threadpool</code><code class="xml plain">=</code><code class="xml string">"fixed"</code> <code class="xml color1">threads</code><code class="xml plain">=</code><code class="xml string">"100"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E7%9B%B4%E8%BF%9E%E6%8F%90%E4%BE%9B%E8%80%85"></a>直连提供者</h3>

<p>(<a href="http://dubbo.io/Directly+Provider-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Directly+Provider-zh" title="Directly Provider-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%9B%B4%E8%BF%9E%E6%8F%90%E4%BE%9B%E8%80%85">#</a>)</p>

<p>在开发及测试环境下，经常需要绕过注册中心，只测试指定服务提供者，这时候可能需要点对点直连，<br>
点对点直联方式，将以服务接口为单位，忽略注册中心的提供者列表，<br>
A接口配置点对点，不影响B接口从注册中心获取列表。</p>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/dubbo-directly.jpg-version=1&modificationDate=1326853485000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6949440/dubbo-directly.jpg?version=1&amp;modificationDate=1326853485000" style="border: 0px solid black"></span></p>

<p>(1) 如果是线上需求需要点对点，可在&lt;dubbo:reference&gt;中配置url指向提供者，将绕过注册中心，<b>多个地址用分号隔开</b>，配置如下：(1.0.6及以上版本支持)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_857330" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">&lt;dubbo:reference id=</code><code class="java string">"xxxService"</code> <code class="java keyword">interface</code><code class="java plain">=</code><code class="java string">"com.alibaba.xxx.XxxService"</code> <code class="java plain">url=</code><code class="java string">"dubbo://localhost:20890"</code> <code class="java plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>(2) 在JVM启动参数中加入-D参数映射服务地址，如：<br>
(key为服务名，value为服务提供者url，此配置优先级最高，1.0.15及以上版本支持)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_611275" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">java -Dcom.alibaba.xxx.XxxService=dubbo:</code><code class="java comments">//localhost:20890</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="panelMacro"><table class="infoMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/information.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>注意</b><br>为了避免复杂化线上环境，不要在线上使用这个功能，只应在测试阶段使用。</td></tr></tbody></table></div>
<p>(3) 如果服务比较多，也可以用文件映射，如：<br>
(用-Ddubbo.resolve.file指定映射文件路径，此配置优先级高于&lt;dubbo:reference&gt;中的配置，1.0.15及以上版本支持)<br>
(2.0以上版本自动加载${user.home}/dubbo-resolve.properties文件，不需要配置)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_381489" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">java -Ddubbo.resolve.file=xxx.properties</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>然后在映射文件xxx.properties中加入：<br>
(key为服务名，value为服务提供者url)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_342468" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">com.alibaba.xxx.XxxService=dubbo:</code><code class="java comments">//localhost:20890</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<div class="panelMacro"><table class="infoMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/information.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>注意</b><br>为了避免复杂化线上环境，不要在线上使用这个功能，只应在测试阶段使用。</td></tr></tbody></table></div>
<h3><a name="UserGuide-zh-%E5%8F%AA%E8%AE%A2%E9%98%85"></a>只订阅</h3>
<p>(<a href="http://dubbo.io/Subscribe+Only-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Subscribe+Only-zh" title="Subscribe Only-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8F%AA%E8%AE%A2%E9%98%85">#</a>)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>问题</b><br>为方便开发测试，经常会在线下共用一个所有服务可用的注册中心，这时，如果一个正在开发中的服务提供者注册，可能会影响消费者不能正常运行。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>解决方案</b><br>可以让服务提供者开发方，只订阅服务(开发的服务可能依赖其它服务)，而不注册正在开发的服务，通过直连测试正在开发的服务。</td></tr></tbody></table></div>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/subscribe-only.jpg-version=1&modificationDate=1326468174000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6949667/subscribe-only.jpg?version=1&amp;modificationDate=1326468174000" style="border: 0px solid black"></span></p>

<p>禁用注册配置：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_532602" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.153.10:9090"</code> <code class="xml color1">register</code><code class="xml plain">=</code><code class="xml string">"false"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或者：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_741924" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.153.10:9090?register=false"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E5%8F%AA%E6%B3%A8%E5%86%8C"></a>只注册</h3>
<p>(<a href="http://dubbo.io/Register+Only-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Register+Only-zh" title="Register Only-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8F%AA%E6%B3%A8%E5%86%8C">#</a>)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>问题</b><br>如果有两个镜像环境，两个注册中心，有一个服务只在其中一个注册中心有部署，另一个注册中心还没来得及部署，而两个注册中心的其它应用都需要依赖此服务，所以需要将服务同时注册到两个注册中心，但却不能让此服务同时依赖两个注册中心的其它服务。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>解决方案</b><br>可以让服务提供者方，只注册服务到另一注册中心，而不从另一注册中心订阅服务。</td></tr></tbody></table></div>

<p>禁用订阅配置：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_835057" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"hzRegistry"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.153.10:9090"</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"qdRegistry"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.141.150:9090"</code> <code class="xml color1">subscribe</code><code class="xml plain">=</code><code class="xml string">"false"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或者：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_200505" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"hzRegistry"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.153.10:9090"</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"qdRegistry"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.141.150:9090?subscribe=false"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E9%9D%99%E6%80%81%E6%9C%8D%E5%8A%A1"></a>静态服务</h3>
<p>(<a href="http://dubbo.io/Static+Provider-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Static+Provider-zh" title="Static Provider-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%9D%99%E6%80%81%E6%9C%8D%E5%8A%A1">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>有时候希望人工管理服务提供者的上线和下线，此时需将注册中心标识为非动态管理模式。</td></tr></tbody></table></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_253543" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.141.150:9090"</code> <code class="xml color1">dynamic</code><code class="xml plain">=</code><code class="xml string">"false"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>或者：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_382066" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.141.150:9090?dynamic=false"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>服务提供者初次注册时为禁用状态，需人工启用，断线时，将不会被自动删除，需人工禁用。</p>

<p>如果是一个第三方独立提供者，比如memcached等，可以直接向注册中心写入提供者地址信息，消费者正常使用：<br>
(通常由脚本监控中心页面等调用)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_698449" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">RegistryFactory registryFactory = ExtensionLoader.getExtensionLoader(RegistryFactory.</code><code class="java keyword">class</code><code class="java plain">).getAdaptiveExtension();</code></div><div class="line number2 index1 alt1"><code class="java plain">Registry registry = registryFactory.getRegistry(URL.valueOf(</code><code class="java string">"zookeeper://10.20.153.10:2181"</code><code class="java plain">));</code></div><div class="line number3 index2 alt2"><code class="java plain">registry.register(URL.valueOf(</code><code class="java string">"memcached://10.20.153.11/com.foo.BarService?category=providers&amp;dynamic=false&amp;application=foo"</code><code class="java plain">));</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E5%A4%9A%E5%8D%8F%E8%AE%AE"></a>多协议</h3>
<p>(<a href="http://dubbo.io/Multi+Protocol-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Multi+Protocol-zh" title="Multi Protocol-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%A4%9A%E5%8D%8F%E8%AE%AE">#</a>)</p>

<p>可以自行扩展协议，参见：<a href="http://dubbo.io/Developer+Guide-zh.htm#DeveloperGuide-zh-%E5%8D%8F%E8%AE%AE%E6%89%A9%E5%B1%95" tppabs="http://10.20.160.198/wiki/display/dubbo/Developer+Guide-zh#DeveloperGuide-zh-%E5%8D%8F%E8%AE%AE%E6%89%A9%E5%B1%95">协议扩展</a></p>

<h4><a name="UserGuide-zh-%281%29%E4%B8%8D%E5%90%8C%E6%9C%8D%E5%8A%A1%E4%B8%8D%E5%90%8C%E5%8D%8F%E8%AE%AE"></a>(1) 不同服务不同协议</h4>

<p>比如：不同服务在性能上适用不同协议进行传输，比如大数据用短连接协议，小数据大并发用长连接协议。</p>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>consumer.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_988265" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;?</code><code class="xml keyword">xml</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0"</code> <code class="xml color1">encoding</code><code class="xml plain">=</code><code class="xml string">"UTF-8"</code><code class="xml plain">?&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">beans</code> <code class="xml color1">xmlns</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beans" "="">http://www.springframework.org/schema/beans"</a></code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:xsi</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.w3.org/2001/XMLSchema-instance" "="">http://www.w3.org/2001/XMLSchema-instance"</a></code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:dubbo</code><code class="xml plain">=</code><code class="xml string">"<a href="http://code.alibabatech.com/schema/dubbo" "="">http://code.alibabatech.com/schema/dubbo"</a></code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xsi:schemaLocation</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsdhttp://code.alibabatech.com/schema/dubbohttp://code.alibabatech.com/schema/dubbo/dubbo.xsd" "="">http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsdhttp://code.alibabatech.com/schema/dubbohttp://code.alibabatech.com/schema/dubbo/dubbo.xsd"</a></code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"world"</code>&nbsp; <code class="xml plain">/&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"registry"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.141.150:9090"</code> <code class="xml color1">username</code><code class="xml plain">=</code><code class="xml string">"admin"</code> <code class="xml color1">password</code><code class="xml plain">=</code><code class="xml string">"hello1234"</code> <code class="xml plain">/&gt;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 多协议配置 --&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"20880"</code> <code class="xml plain">/&gt;</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"rmi"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"1099"</code> <code class="xml plain">/&gt;</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 使用dubbo协议暴露服务 --&gt;</code></div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.hello.api.HelloService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"helloService"</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml plain">/&gt;</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 使用rmi协议暴露服务 --&gt;</code></div><div class="line number17 index16 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.hello.api.DemoService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"demoService"</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"rmi"</code> <code class="xml plain">/&gt;</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">beans</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-%282%29%E5%A4%9A%E5%8D%8F%E8%AE%AE%E6%9A%B4%E9%9C%B2%E6%9C%8D%E5%8A%A1"></a>(2) 多协议暴露服务</h4>

<p>比如：需要与http客户端互操作</p>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>consumer.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_352851" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;?</code><code class="xml keyword">xml</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0"</code> <code class="xml color1">encoding</code><code class="xml plain">=</code><code class="xml string">"UTF-8"</code><code class="xml plain">?&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">beans</code> <code class="xml color1">xmlns</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beans" "="">http://www.springframework.org/schema/beans"</a></code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:xsi</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.w3.org/2001/XMLSchema-instance" "="">http://www.w3.org/2001/XMLSchema-instance"</a></code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:dubbo</code><code class="xml plain">=</code><code class="xml string">"<a href="http://code.alibabatech.com/schema/dubbo" "="">http://code.alibabatech.com/schema/dubbo"</a></code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xsi:schemaLocation</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsdhttp://code.alibabatech.com/schema/dubbohttp://code.alibabatech.com/schema/dubbo/dubbo.xsd" "="">http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsdhttp://code.alibabatech.com/schema/dubbohttp://code.alibabatech.com/schema/dubbo/dubbo.xsd"</a></code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"world"</code>&nbsp; <code class="xml plain">/&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"registry"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.141.150:9090"</code> <code class="xml color1">username</code><code class="xml plain">=</code><code class="xml string">"admin"</code> <code class="xml color1">password</code><code class="xml plain">=</code><code class="xml string">"hello1234"</code> <code class="xml plain">/&gt;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 多协议配置 --&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"20880"</code> <code class="xml plain">/&gt;</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hessian"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"8080"</code> <code class="xml plain">/&gt;</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 使用多个协议暴露服务 --&gt;</code></div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"helloService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.hello.api.HelloService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"dubbo,hessian"</code> <code class="xml plain">/&gt;</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">beans</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E5%A4%9A%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"></a>多注册中心</h3>
<p>(<a href="http://dubbo.io/Multi+Registry-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Multi+Registry-zh" title="Multi Registry-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%A4%9A%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">#</a>)</p>

<p>可以自行扩展注册中心，参见：<a href="http://dubbo.io/Developer+Guide-zh.htm#DeveloperGuide-zh-%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E6%89%A9%E5%B1%95" tppabs="http://10.20.160.198/wiki/display/dubbo/Developer+Guide-zh#DeveloperGuide-zh-%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E6%89%A9%E5%B1%95">注册中心扩展</a></p>

<h4><a name="UserGuide-zh-%281%29%E5%A4%9A%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E6%B3%A8%E5%86%8C"></a>(1) 多注册中心注册</h4>

<p>比如：中文站有些服务来不及在青岛部署，只在杭州部署，而青岛的其它应用需要引用此服务，就可以将服务同时注册到两个注册中心。</p>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>consumer.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_53509" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;?</code><code class="xml keyword">xml</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0"</code> <code class="xml color1">encoding</code><code class="xml plain">=</code><code class="xml string">"UTF-8"</code><code class="xml plain">?&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">beans</code> <code class="xml color1">xmlns</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beans" "="">http://www.springframework.org/schema/beans"</a></code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:xsi</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.w3.org/2001/XMLSchema-instance" "="">http://www.w3.org/2001/XMLSchema-instance"</a></code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:dubbo</code><code class="xml plain">=</code><code class="xml string">"<a href="http://code.alibabatech.com/schema/dubbo" "="">http://code.alibabatech.com/schema/dubbo"</a></code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xsi:schemaLocation</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsdhttp://code.alibabatech.com/schema/dubbohttp://code.alibabatech.com/schema/dubbo/dubbo.xsd" "="">http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsdhttp://code.alibabatech.com/schema/dubbohttp://code.alibabatech.com/schema/dubbo/dubbo.xsd"</a></code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"world"</code>&nbsp; <code class="xml plain">/&gt;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 多注册中心配置 --&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"hangzhouRegistry"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.141.150:9090"</code> <code class="xml plain">/&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"qingdaoRegistry"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.141.151:9010"</code> <code class="xml color1">default</code><code class="xml plain">=</code><code class="xml string">"false"</code> <code class="xml plain">/&gt;</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 向多个注册中心注册 --&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.hello.api.HelloService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"helloService"</code> <code class="xml color1">registry</code><code class="xml plain">=</code><code class="xml string">"hangzhouRegistry,qingdaoRegistry"</code> <code class="xml plain">/&gt;</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">beans</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-%282%29%E4%B8%8D%E5%90%8C%E6%9C%8D%E5%8A%A1%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"></a>(2) 不同服务使用不同注册中心</h4>

<p>比如：CRM有些服务是专门为国际站设计的，有些服务是专门为中文站设计的。</p>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>consumer.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_653667" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;?</code><code class="xml keyword">xml</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0"</code> <code class="xml color1">encoding</code><code class="xml plain">=</code><code class="xml string">"UTF-8"</code><code class="xml plain">?&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">beans</code> <code class="xml color1">xmlns</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beans" "="">http://www.springframework.org/schema/beans"</a></code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:xsi</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.w3.org/2001/XMLSchema-instance" "="">http://www.w3.org/2001/XMLSchema-instance"</a></code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:dubbo</code><code class="xml plain">=</code><code class="xml string">"<a href="http://code.alibabatech.com/schema/dubbo" "="">http://code.alibabatech.com/schema/dubbo"</a></code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xsi:schemaLocation</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsdhttp://code.alibabatech.com/schema/dubbohttp://code.alibabatech.com/schema/dubbo/dubbo.xsd" "="">http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsdhttp://code.alibabatech.com/schema/dubbohttp://code.alibabatech.com/schema/dubbo/dubbo.xsd"</a></code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"world"</code>&nbsp; <code class="xml plain">/&gt;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 多注册中心配置 --&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"chinaRegistry"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.141.150:9090"</code> <code class="xml plain">/&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"intlRegistry"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.154.177:9010"</code> <code class="xml color1">default</code><code class="xml plain">=</code><code class="xml string">"false"</code> <code class="xml plain">/&gt;</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 向中文站注册中心注册 --&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.hello.api.HelloService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"helloService"</code> <code class="xml color1">registry</code><code class="xml plain">=</code><code class="xml string">"chinaRegistry"</code> <code class="xml plain">/&gt;</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 向国际站注册中心注册 --&gt;</code></div><div class="line number17 index16 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.hello.api.DemoService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"demoService"</code> <code class="xml color1">registry</code><code class="xml plain">=</code><code class="xml string">"intlRegistry"</code> <code class="xml plain">/&gt;</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">beans</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-%283%29%E5%A4%9A%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%BC%95%E7%94%A8"></a>(3) 多注册中心引用</h4>

<p>比如：CRM需同时调用中文站和国际站的PC2服务，PC2在中文站和国际站均有部署，接口及版本号都一样，但连的数据库不一样。</p>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>consumer.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_432498" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;?</code><code class="xml keyword">xml</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0"</code> <code class="xml color1">encoding</code><code class="xml plain">=</code><code class="xml string">"UTF-8"</code><code class="xml plain">?&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">beans</code> <code class="xml color1">xmlns</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beans" "="">http://www.springframework.org/schema/beans"</a></code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:xsi</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.w3.org/2001/XMLSchema-instance" "="">http://www.w3.org/2001/XMLSchema-instance"</a></code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:dubbo</code><code class="xml plain">=</code><code class="xml string">"<a href="http://code.alibabatech.com/schema/dubbo" "="">http://code.alibabatech.com/schema/dubbo"</a></code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xsi:schemaLocation</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsdhttp://code.alibabatech.com/schema/dubbohttp://code.alibabatech.com/schema/dubbo/dubbo.xsd" "="">http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsdhttp://code.alibabatech.com/schema/dubbohttp://code.alibabatech.com/schema/dubbo/dubbo.xsd"</a></code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"world"</code>&nbsp; <code class="xml plain">/&gt;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 多注册中心配置 --&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"chinaRegistry"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.141.150:9090"</code> <code class="xml plain">/&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"intlRegistry"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.154.177:9010"</code> <code class="xml color1">default</code><code class="xml plain">=</code><code class="xml string">"false"</code> <code class="xml plain">/&gt;</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 引用中文站服务 --&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"chinaHelloService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.hello.api.HelloService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml color1">registry</code><code class="xml plain">=</code><code class="xml string">"chinaRegistry"</code> <code class="xml plain">/&gt;</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 引用国际站站服务 --&gt;</code></div><div class="line number17 index16 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"intlHelloService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.hello.api.HelloService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml color1">registry</code><code class="xml plain">=</code><code class="xml string">"intlRegistry"</code> <code class="xml plain">/&gt;</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">beans</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>如果只是测试环境临时需要连接两个不同注册中心，使用竖号分隔多个不同注册中心地址：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>consumer.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_66798" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;?</code><code class="xml keyword">xml</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0"</code> <code class="xml color1">encoding</code><code class="xml plain">=</code><code class="xml string">"UTF-8"</code><code class="xml plain">?&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">beans</code> <code class="xml color1">xmlns</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beans" "="">http://www.springframework.org/schema/beans"</a></code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:xsi</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.w3.org/2001/XMLSchema-instance" "="">http://www.w3.org/2001/XMLSchema-instance"</a></code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:dubbo</code><code class="xml plain">=</code><code class="xml string">"<a href="http://code.alibabatech.com/schema/dubbo" "="">http://code.alibabatech.com/schema/dubbo"</a></code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xsi:schemaLocation</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsdhttp://code.alibabatech.com/schema/dubbohttp://code.alibabatech.com/schema/dubbo/dubbo.xsd" "="">http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsdhttp://code.alibabatech.com/schema/dubbohttp://code.alibabatech.com/schema/dubbo/dubbo.xsd"</a></code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"world"</code>&nbsp; <code class="xml plain">/&gt;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 多注册中心配置，竖号分隔表示同时连接多个不同注册中心，同一注册中心的多个集群地址用逗号分隔 --&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.141.150:9090|10.20.154.177:9010"</code> <code class="xml plain">/&gt;</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 引用服务 --&gt;</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"helloService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.hello.api.HelloService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml plain">/&gt;</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">beans</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E6%9C%8D%E5%8A%A1%E5%88%86%E7%BB%84"></a>服务分组</h3>
<p>(<a href="http://dubbo.io/Multi+Group-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Multi+Group-zh" title="Multi Group-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%8D%E5%8A%A1%E5%88%86%E7%BB%84">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>当一个接口有多种实现时，可以用group区分。</td></tr></tbody></table></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_301581" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"feedback"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.xxx.IndexService"</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"member"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.xxx.IndexService"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_410350" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"feedbackIndexService"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"feedback"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.xxx.IndexService"</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"memberIndexService"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"member"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.xxx.IndexService"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>任意组：(2.2.0以上版本支持，总是只调一个可用组的实现)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_501543" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"barService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"*"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E5%A4%9A%E7%89%88%E6%9C%AC"></a>多版本</h3>
<p>(<a href="http://dubbo.io/Multi+Version-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Multi+Version-zh" title="Multi Version-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%A4%9A%E7%89%88%E6%9C%AC">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>当一个接口实现，出现不兼容升级时，可以用版本号过渡，版本号不同的服务相互间不引用。</td></tr></tbody></table></div>

<ul>
	<li>在低压力时间段，先升级一半提供者为新版本</li>
	<li>再将所有消费者升级为新版本</li>
	<li>然后将剩下的一半提供者升级为新版本</li>
</ul>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_899604" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_874914" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"2.0.0"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_846798" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"barService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_801278" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"barService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"2.0.0"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>不区分版本：(2.2.0以上版本支持)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_122618" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"barService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"*"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E5%88%86%E7%BB%84%E8%81%9A%E5%90%88"></a>分组聚合</h3>
<p>(<a href="http://dubbo.io/Merge+By+Group-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Merge+By+Group-zh" title="Merge By Group-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%88%86%E7%BB%84%E8%81%9A%E5%90%88">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>按组合并返回结果，比如菜单服务，接口一样，但有多种实现，用group区分，现在消费方需从每种group中调用一次返回结果，合并结果返回，这样就可以实现聚合菜单项。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>从2.1.0版本开始支持</td></tr></tbody></table></div>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/dubbo-merger.jpg-version=1&modificationDate=1329310196000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6952105/dubbo-merger.jpg?version=1&amp;modificationDate=1329310196000" style="border: 0px solid black"></span></p>

<p>代码参见：<a href="javascript:if(confirm(%27https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/merge  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/merge%27" tppabs="https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/merge" class="external-link" rel="nofollow">https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/merge</a></p>

<p>配置如：(搜索所有分组)</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_777247" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.xxx.MenuService"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"*"</code> <code class="xml color1">merger</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>或：(合并指定分组)</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_615732" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.xxx.MenuService"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"aaa,bbb"</code> <code class="xml color1">merger</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>或：(指定方法合并结果，其它未指定的方法，将只调用一个Group)</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_693325" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.xxx.MenuService"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"*"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"getMenuItems"</code> <code class="xml color1">merger</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:service</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>或：(某个方法不合并结果，其它都合并结果)</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_613579" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.xxx.MenuService"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"*"</code> <code class="xml color1">merger</code><code class="xml plain">=</code><code class="xml string">"true"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"getMenuItems"</code> <code class="xml color1">merger</code><code class="xml plain">=</code><code class="xml string">"false"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:service</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>或：(指定合并策略，缺省根据返回值类型自动匹配，如果同一类型有两个合并器时，需指定合并器的名称)<br>
参见：<span class="error">[合并结果扩展]</span></p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_878888" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.xxx.MenuService"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"*"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"getMenuItems"</code> <code class="xml color1">merger</code><code class="xml plain">=</code><code class="xml string">"mymerge"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:service</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>


<p>或：(指定合并方法，将调用返回结果的指定方法进行合并，合并方法的参数类型必须是返回结果类型本身)</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_298253" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.xxx.MenuService"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"*"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"getMenuItems"</code> <code class="xml color1">merger</code><code class="xml plain">=</code><code class="xml string">".addAll"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:service</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E5%8F%82%E6%95%B0%E9%AA%8C%E8%AF%81"></a>参数验证</h3>
<p>(<a href="http://dubbo.io/Parameter+Validation-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Parameter+Validation-zh" title="Parameter Validation-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8F%82%E6%95%B0%E9%AA%8C%E8%AF%81">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>参数验证功能是基于<a href="javascript:if(confirm(%27http://jcp.org/en/jsr/detail?id=303  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://jcp.org/en/jsr/detail?id=303%27" tppabs="http://jcp.org/en/jsr/detail?id=303" class="external-link" rel="nofollow">JSR303</a>实现的，用户只需标识JSR303标准的验证Annotation，并通过声明filter来实现验证。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>2.1.0以上版本支持</td></tr></tbody></table></div>

<p>完整示例代码参见：<a href="javascript:if(confirm(%27https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/validation  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/validation%27" tppabs="https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/validation" class="external-link" rel="nofollow">https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/validation</a></p>

<p>验证方式可扩展，参见：<a href="http://dubbo.io/Developer+Guide-zh.htm#DeveloperGuide-zh-Validation" tppabs="http://10.20.160.198/wiki/display/dubbo/Developer+Guide-zh#DeveloperGuide-zh-Validation">Validation扩展点</a></p>

<p>参数标注示例：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_658479" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">java.io.Serializable;</code></div><div class="line number2 index1 alt1"><code class="java keyword">import</code> <code class="java plain">java.util.Date;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">javax.validation.constraints.Future;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">javax.validation.constraints.Max;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">javax.validation.constraints.Min;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">javax.validation.constraints.NotNull;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">javax.validation.constraints.Past;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">javax.validation.constraints.Pattern;</code></div><div class="line number10 index9 alt1"><code class="java keyword">import</code> <code class="java plain">javax.validation.constraints.Size;</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">ValidationParameter </code><code class="java keyword">implements</code> <code class="java plain">Serializable {</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">final</code> <code class="java keyword">long</code> <code class="java plain">serialVersionUID = 7158911668568000392L;</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@NotNull</code> <code class="java comments">// 不允许为空</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Size</code><code class="java plain">(min = </code><code class="java value">1</code><code class="java plain">, max = </code><code class="java value">20</code><code class="java plain">) </code><code class="java comments">// 长度或大小范围</code></div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java plain">String name;</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@NotNull</code><code class="java plain">(groups = ValidationService.Save.</code><code class="java keyword">class</code><code class="java plain">) </code><code class="java comments">// 保存时不允许为空，更新时允许为空 ，表示不更新该字段</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Pattern</code><code class="java plain">(regexp = </code><code class="java string">"^\\s*\\w+(?:\\.{0,1}[\\w-]+)*@[a-zA-Z0-9]+(?:[-.][a-zA-Z0-9]+)*\\.[a-zA-Z]+\\s*$"</code><code class="java plain">)</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java plain">String email;</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Min</code><code class="java plain">(</code><code class="java value">18</code><code class="java plain">) </code><code class="java comments">// 最小值</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Max</code><code class="java plain">(</code><code class="java value">100</code><code class="java plain">) </code><code class="java comments">// 最大值</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">int</code> <code class="java plain">age;</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Past</code> <code class="java comments">// 必须为一个过去的时间</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java plain">Date loginDate;</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@Future</code> <code class="java comments">// 必须为一个未来的时间</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java plain">Date expiryDate;</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">String getName() {</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">name;</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setName(String name) {</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.name = name;</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">String getEmail() {</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">email;</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number45 index44 alt2">&nbsp;</div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setEmail(String email) {</code></div><div class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.email = email;</code></div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number49 index48 alt2">&nbsp;</div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">int</code> <code class="java plain">getAge() {</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">age;</code></div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number53 index52 alt2">&nbsp;</div><div class="line number54 index53 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setAge(</code><code class="java keyword">int</code> <code class="java plain">age) {</code></div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.age = age;</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number57 index56 alt2">&nbsp;</div><div class="line number58 index57 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">Date getLoginDate() {</code></div><div class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">loginDate;</code></div><div class="line number60 index59 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number61 index60 alt2">&nbsp;</div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setLoginDate(Date loginDate) {</code></div><div class="line number63 index62 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.loginDate = loginDate;</code></div><div class="line number64 index63 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number65 index64 alt2">&nbsp;</div><div class="line number66 index65 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">Date getExpiryDate() {</code></div><div class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">expiryDate;</code></div><div class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number69 index68 alt2">&nbsp;</div><div class="line number70 index69 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setExpiryDate(Date expiryDate) {</code></div><div class="line number71 index70 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.expiryDate = expiryDate;</code></div><div class="line number72 index71 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number73 index72 alt2">&nbsp;</div><div class="line number74 index73 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>分组验证示例：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_436491" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">public</code> <code class="java keyword">interface</code> <code class="java plain">ValidationService { </code><code class="java comments">// 缺省可按服务接口区分验证场景，如：@NotNull(groups = ValidationService.class)</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color2">@interface</code> <code class="java plain">Save{} </code><code class="java comments">// 与方法同名接口，首字母大写，用于区分验证场景，如：@NotNull(groups = ValidationService.Save.class)，可选</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">void</code> <code class="java plain">save(ValidationParameter parameter);</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">void</code> <code class="java plain">update(ValidationParameter parameter);</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>关联验证示例：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_873394" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">javax.validation.GroupSequence;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">public</code> <code class="java keyword">interface</code> <code class="java plain">ValidationService {</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color1">@GroupSequence</code><code class="java plain">(Update.</code><code class="java keyword">class</code><code class="java plain">) </code><code class="java comments">// 同时验证Update组规则</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color2">@interface</code> <code class="java plain">Save{}</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">void</code> <code class="java plain">save(ValidationParameter parameter);</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java color2">@interface</code> <code class="java plain">Update{} </code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">void</code> <code class="java plain">update(ValidationParameter parameter);</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>参数验证示例：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_207787" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">javax.validation.constraints.Min;</code></div><div class="line number2 index1 alt1"><code class="java keyword">import</code> <code class="java plain">javax.validation.constraints.NotNull;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java keyword">public</code> <code class="java keyword">interface</code> <code class="java plain">ValidationService {</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">void</code> <code class="java plain">save(</code><code class="java color1">@NotNull</code> <code class="java plain">ValidationParameter parameter); </code><code class="java comments">// 验证参数不为空</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">void</code> <code class="java plain">delete(</code><code class="java color1">@Min</code><code class="java plain">(</code><code class="java value">1</code><code class="java plain">) </code><code class="java keyword">int</code> <code class="java plain">id); </code><code class="java comments">// 直接对基本类型参数验证</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>在客户端验证参数：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_494413" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"validationService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.examples.validation.api.ValidationService"</code> <code class="xml color1">validation</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>在服务器端验证参数：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_89611" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.examples.validation.api.ValidationService"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"validationService"</code> <code class="xml color1">validation</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>验证异常信息：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_616977" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">javax.validation.ConstraintViolationException;</code></div><div class="line number2 index1 alt1"><code class="java keyword">import</code> <code class="java plain">javax.validation.ConstraintViolationException;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">org.springframework.context.support.ClassPathXmlApplicationContext;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.examples.validation.api.ValidationParameter;</code></div><div class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.examples.validation.api.ValidationService;</code></div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.rpc.RpcException;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">ValidationConsumer {</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) </code><code class="java keyword">throws</code> <code class="java plain">Exception {</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String config = ValidationConsumer.</code><code class="java keyword">class</code><code class="java plain">.getPackage().getName().replace(</code><code class="java string">'.'</code><code class="java plain">, </code><code class="java string">'/'</code><code class="java plain">) + </code><code class="java string">"/validation-consumer.xml"</code><code class="java plain">;</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">ClassPathXmlApplicationContext context = </code><code class="java keyword">new</code> <code class="java plain">ClassPathXmlApplicationContext(config);</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">context.start();</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">ValidationService validationService = (ValidationService)context.getBean(</code><code class="java string">"validationService"</code><code class="java plain">);</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// Error</code></div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">parameter = </code><code class="java keyword">new</code> <code class="java plain">ValidationParameter();</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">validationService.save(parameter);</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Validation ERROR"</code><code class="java plain">);</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(RpcException e) { </code><code class="java comments">// 抛出的是RpcException</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">ConstraintViolationException ve = (ConstraintViolationException) e.getCause(); </code><code class="java comments">// 里面嵌了一个ConstraintViolationException</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Set&lt;ConstraintViolation&lt;?&gt;&gt; violations = ve.getConstraintViolations(); </code><code class="java comments">// 可以拿到一个验证错误详细信息的集合</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(violations);</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>需要加入依赖：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_63645" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;javax.validation&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;validation-api&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;1.0.0.GA&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;org.hibernate&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;hibernate-validator&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;4.2.0.Final&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E7%BB%93%E6%9E%9C%E7%BC%93%E5%AD%98"></a>结果缓存</h3>
<p>(<a href="http://dubbo.io/Result+Cache-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Result+Cache-zh" title="Result Cache-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%BB%93%E6%9E%9C%E7%BC%93%E5%AD%98">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>结果缓存，用于加速热门数据的访问速度，Dubbo提供声明式缓存，以减少用户加缓存的工作量。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>2.1.0以上版本支持</td></tr></tbody></table></div>

<p>示例代码：<a href="javascript:if(confirm(%27https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/cache  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/cache%27" tppabs="https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/cache" class="external-link" rel="nofollow">https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/cache</a></p>

<ul>
	<li>lru 基于最近最少使用原则删除多余缓存，保持最热的数据被缓存。</li>
	<li>threadlocal 当前线程缓存，比如一个页面渲染，用到很多portal，每个portal都要去查用户信息，通过线程缓存，可以减少这种多余访问。</li>
	<li>jcache 与<a href="javascript:if(confirm(%27http://jcp.org/en/jsr/detail?id=107  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://jcp.org/en/jsr/detail?id=107%27" tppabs="http://jcp.org/en/jsr/detail?id=107" class="external-link" rel="nofollow">JSR107</a>集成，可以桥接各种缓存实现。</li>
</ul>


<p>缓存类型可扩展，参见：<a href="http://dubbo.io/Developer+Guide-zh.htm#DeveloperGuide-zh-CacheFactory" tppabs="http://10.20.160.198/wiki/display/dubbo/Developer+Guide-zh#DeveloperGuide-zh-CacheFactory">CacheFactory扩展点</a></p>

<p>配置如：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_678447" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">cache</code><code class="xml plain">=</code><code class="xml string">"lru"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_223621" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"findBar"</code> <code class="xml color1">cache</code><code class="xml plain">=</code><code class="xml string">"lru"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:reference</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E6%B3%9B%E5%8C%96%E5%BC%95%E7%94%A8"></a>泛化引用</h3>
<p>(<a href="http://dubbo.io/Generic+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Generic+Reference-zh" title="Generic Reference-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%9B%E5%8C%96%E5%BC%95%E7%94%A8">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>泛接口调用方式主要用于客户端没有API接口及模型类元的情况，参数及返回值中的所有POJO均用Map表示，通常用于框架集成，比如：实现一个通用的服务测试框架，可通过GenericService调用所有服务实现。</td></tr></tbody></table></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_11149" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"barService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">generic</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_896180" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">GenericService barService = (GenericService) applicationContext.getBean(</code><code class="java string">"barService"</code><code class="java plain">);</code></div><div class="line number2 index1 alt1"><code class="java plain">Object result = barService.$invoke(</code><code class="java string">"sayHello"</code><code class="java plain">, </code><code class="java keyword">new</code> <code class="java plain">String[] { </code><code class="java string">"java.lang.String"</code> <code class="java plain">}, </code><code class="java keyword">new</code> <code class="java plain">Object[] { </code><code class="java string">"World"</code> <code class="java plain">});</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_114019" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">com.alibaba.dubbo.rpc.service.GenericService; </code></div><div class="line number2 index1 alt1"><code class="java plain">... </code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java comments">// 引用远程服务 </code></div><div class="line number5 index4 alt2"><code class="java plain">ReferenceConfig&lt;GenericService&gt; reference = </code><code class="java keyword">new</code> <code class="java plain">ReferenceConfig&lt;GenericService&gt;(); </code><code class="java comments">// 该实例很重量，里面封装了所有与注册中心及服务提供方连接，请缓存</code></div><div class="line number6 index5 alt1"><code class="java plain">reference.setInterface(</code><code class="java string">"com.xxx.XxxService"</code><code class="java plain">); </code><code class="java comments">// 弱类型接口名 </code></div><div class="line number7 index6 alt2"><code class="java plain">reference.setVersion(</code><code class="java string">"1.0.0"</code><code class="java plain">); </code></div><div class="line number8 index7 alt1"><code class="java plain">reference.setGeneric(</code><code class="java keyword">true</code><code class="java plain">); </code><code class="java comments">// 声明为泛化接口 </code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="java plain">GenericService genericService = reference.get(); </code><code class="java comments">// 用com.alibaba.dubbo.rpc.service.GenericService可以替代所有接口引用 </code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="java comments">// 基本类型以及Date,List,Map等不需要转换，直接调用 </code></div><div class="line number13 index12 alt2"><code class="java plain">Object result = genericService.$invoke(</code><code class="java string">"sayHello"</code><code class="java plain">, </code><code class="java keyword">new</code> <code class="java plain">String[] {</code><code class="java string">"java.lang.String"</code><code class="java plain">}, </code><code class="java keyword">new</code> <code class="java plain">Object[] {</code><code class="java string">"world"</code><code class="java plain">}); </code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="java comments">// 用Map表示POJO参数，如果返回值为POJO也将自动转成Map </code></div><div class="line number16 index15 alt1"><code class="java plain">Map&lt;String, Object&gt; person = </code><code class="java keyword">new</code> <code class="java plain">HashMap&lt;String, Object&gt;(); </code></div><div class="line number17 index16 alt2"><code class="java plain">person.put(</code><code class="java string">"name"</code><code class="java plain">, </code><code class="java string">"xxx"</code><code class="java plain">); </code></div><div class="line number18 index17 alt1"><code class="java plain">person.put(</code><code class="java string">"password"</code><code class="java plain">, </code><code class="java string">"yyy"</code><code class="java plain">); </code></div><div class="line number19 index18 alt2"><code class="java plain">Object result = genericService.$invoke(</code><code class="java string">"findPerson"</code><code class="java plain">, </code><code class="java keyword">new</code> <code class="java plain">String[]{</code><code class="java string">"com.xxx.Person"</code><code class="java plain">}, </code><code class="java keyword">new</code> <code class="java plain">Object[]{person}); </code><code class="java comments">// 如果返回POJO将自动转成Map </code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="java plain">...</code></div></div></td></tr></tbody></table></div></div>
</div></div> 

<p>假设存在POJO如： </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_913061" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.xxx; </code></div><div class="line number2 index1 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">PersonImpl </code><code class="java keyword">implements</code> <code class="java plain">Person { </code></div><div class="line number3 index2 alt2"><code class="java keyword">private</code> <code class="java plain">String name; </code></div><div class="line number4 index3 alt1"><code class="java keyword">private</code> <code class="java plain">String password; </code></div><div class="line number5 index4 alt2"><code class="java keyword">public</code> <code class="java plain">String getName() { </code></div><div class="line number6 index5 alt1"><code class="java keyword">return</code> <code class="java plain">name; </code></div><div class="line number7 index6 alt2"><code class="java plain">} </code></div><div class="line number8 index7 alt1"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setName(String name) { </code></div><div class="line number9 index8 alt2"><code class="java keyword">this</code><code class="java plain">.name = name; </code></div><div class="line number10 index9 alt1"><code class="java plain">} </code></div><div class="line number11 index10 alt2"><code class="java keyword">public</code> <code class="java plain">String getPassword() { </code></div><div class="line number12 index11 alt1"><code class="java keyword">return</code> <code class="java plain">password; </code></div><div class="line number13 index12 alt2"><code class="java plain">} </code></div><div class="line number14 index13 alt1"><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">setPassword(String password) { </code></div><div class="line number15 index14 alt2"><code class="java keyword">this</code><code class="java plain">.password= password; </code></div><div class="line number16 index15 alt1"><code class="java plain">} </code></div><div class="line number17 index16 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div> 
<p>则POJO数据： </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_420588" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">Person person = </code><code class="java keyword">new</code> <code class="java plain">PersonImpl(); </code></div><div class="line number2 index1 alt1"><code class="java plain">person.setName(</code><code class="java string">"xxx"</code><code class="java plain">); </code></div><div class="line number3 index2 alt2"><code class="java plain">person.setPassword(</code><code class="java string">"yyy"</code><code class="java plain">);</code></div></div></td></tr></tbody></table></div></div>
</div></div> 
<p>可用下面Map表示： </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_272592" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">Map&lt;String, Object&gt; map = </code><code class="java keyword">new</code> <code class="java plain">HashMap&lt;String, Object&gt;(); </code></div><div class="line number2 index1 alt1"><code class="java plain">map.put(</code><code class="java string">"class"</code><code class="java plain">, </code><code class="java string">"com.xxx.PersonImpl"</code><code class="java plain">); </code><code class="java comments">// 注意：如果参数类型是接口，或者List等丢失泛型，可通过class属性指定类型。</code></div><div class="line number3 index2 alt2"><code class="java plain">map.put(</code><code class="java string">"name"</code><code class="java plain">, </code><code class="java string">"xxx"</code><code class="java plain">); </code></div><div class="line number4 index3 alt1"><code class="java plain">map.put(</code><code class="java string">"password"</code><code class="java plain">, </code><code class="java string">"yyy"</code><code class="java plain">);</code></div></div></td></tr></tbody></table></div></div>
</div></div> 
<h3><a name="UserGuide-zh-%E6%B3%9B%E5%8C%96%E5%AE%9E%E7%8E%B0"></a>泛化实现</h3>
<p>(<a href="http://dubbo.io/Generic+Implementation-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Generic+Implementation-zh" title="Generic Implementation-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%9B%E5%8C%96%E5%AE%9E%E7%8E%B0">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>泛接口实现方式主要用于服务器端没有API接口及模型类元的情况，参数及返回值中的所有POJO均用Map表示，通常用于框架集成，比如：实现一个通用的远程服务Mock框架，可通过实现GenericService接口处理所有服务请求。</td></tr></tbody></table></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_787347" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">bean</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"genericService"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"com.foo.MyGenericService"</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"genericService"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_783766" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.foo;</code></div><div class="line number2 index1 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">MyGenericService </code><code class="java keyword">implements</code> <code class="java plain">GenericService {</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">Object $invoke(String methodName, String[] parameterTypes, Object[] args) </code><code class="java keyword">throws</code> <code class="java plain">GenericException {</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(</code><code class="java string">"sayHello"</code><code class="java plain">.equals(methodName)) {</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java string">"Welcome "</code> <code class="java plain">+ args[</code><code class="java value">0</code><code class="java plain">];</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_273126" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">... </code></div><div class="line number2 index1 alt1"><code class="java plain">GenericService xxxService = </code><code class="java keyword">new</code> <code class="java plain">XxxGenericService(); </code><code class="java comments">// 用com.alibaba.dubbo.rpc.service.GenericService可以替代所有接口实现 </code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java plain">ServiceConfig&lt;GenericService&gt; service = </code><code class="java keyword">new</code> <code class="java plain">ServiceConfig&lt;GenericService&gt;(); </code><code class="java comments">// 该实例很重量，里面封装了所有与注册中心及服务提供方连接，请缓存</code></div><div class="line number5 index4 alt2"><code class="java plain">service.setInterface(</code><code class="java string">"com.xxx.XxxService"</code><code class="java plain">); </code><code class="java comments">// 弱类型接口名 </code></div><div class="line number6 index5 alt1"><code class="java plain">service.setVersion(</code><code class="java string">"1.0.0"</code><code class="java plain">); </code></div><div class="line number7 index6 alt2"><code class="java plain">service.setRef(xxxService); </code><code class="java comments">// 指向一个通用服务实现 </code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="java comments">// 暴露及注册服务 </code></div><div class="line number10 index9 alt1"><code class="java plain">service.export();</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E5%9B%9E%E5%A3%B0%E6%B5%8B%E8%AF%95"></a>回声测试</h3>
<p>(<a href="http://dubbo.io/Echo+Test-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Echo+Test-zh" title="Echo Test-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%9B%9E%E5%A3%B0%E6%B5%8B%E8%AF%95">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>回声测试用于检测服务是否可用，回声测试按照正常请求流程执行，能够测试整个调用是否通畅，可用于监控。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>所有服务自动实现EchoService接口，只需将任意服务引用强制转型为EchoService，即可使用。</td></tr></tbody></table></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_516315" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"memberService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.xxx.MemberService"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_174108" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">MemberService memberService = ctx.getBean(</code><code class="java string">"memberService"</code><code class="java plain">); </code><code class="java comments">// 远程服务引用</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java plain">EchoService echoService = (EchoService) memberService; </code><code class="java comments">// 强制转型为EchoService</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java plain">String status = echoService.$echo(</code><code class="java string">"OK"</code><code class="java plain">); </code><code class="java comments">// 回声测试可用性</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java keyword">assert</code><code class="java plain">(status.equals(</code><code class="java string">"OK"</code><code class="java plain">))</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E4%B8%8A%E4%B8%8B%E6%96%87%E4%BF%A1%E6%81%AF"></a>上下文信息</h3>
<p>(<a href="http://dubbo.io/Rpc+Context-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Rpc+Context-zh" title="Rpc Context-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%B8%8A%E4%B8%8B%E6%96%87%E4%BF%A1%E6%81%AF">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>上下文中存放的是当前调用过程中所需的环境信息。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>所有配置信息都将转换为URL的参数，参见《<a href="http://dubbo.io/User+Guide.htm#UserGuide-ConfigurationReference" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide#UserGuide-ConfigurationReference">配置项一览表</a>》中的“对应URL参数”一列。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>注意</b><br>RpcContext是一个ThreadLocal的临时状态记录器，当接收到RPC请求，或发起RPC请求时，RpcContext的状态都会变化。<br>
比如：A调B，B再调C，则B机器上，在B调C之前，RpcContext记录的是A调B的信息，在B调C之后，RpcContext记录的是B调C的信息。</td></tr></tbody></table></div>

<h4><a name="UserGuide-zh-%281%29%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E6%96%B9"></a>(1) 服务消费方</h4>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_215240" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">xxxService.xxx(); </code><code class="java comments">// 远程调用</code></div><div class="line number2 index1 alt1"><code class="java keyword">boolean</code> <code class="java plain">isConsumerSide = RpcContext.getContext().isConsumerSide(); </code><code class="java comments">// 本端是否为消费端，这里会返回true</code></div><div class="line number3 index2 alt2"><code class="java plain">String serverIP = RpcContext.getContext().getRemoteHost(); </code><code class="java comments">// 获取最后一次调用的提供方IP地址</code></div><div class="line number4 index3 alt1"><code class="java plain">String application = RpcContext.getContext().getUrl().getParameter(</code><code class="java string">"application"</code><code class="java plain">); </code><code class="java comments">// 获取当前服务配置信息，所有配置信息都将转换为URL的参数</code></div><div class="line number5 index4 alt2"><code class="java comments">// ...</code></div><div class="line number6 index5 alt1"><code class="java plain">yyyService.yyy(); </code><code class="java comments">// 注意：每发起RPC调用，上下文状态会变化</code></div><div class="line number7 index6 alt2"><code class="java comments">// ...</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-%282%29%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E6%96%B9"></a>(2) 服务提供方</h4>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_558624" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">XxxServiceImpl </code><code class="java keyword">implements</code> <code class="java plain">XxxService {</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">xxx() { </code><code class="java comments">// 服务方法实现</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">boolean</code> <code class="java plain">isProviderSide = RpcContext.getContext().isProviderSide(); </code><code class="java comments">// 本端是否为提供端，这里会返回true</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String clientIP = RpcContext.getContext().getRemoteHost(); </code><code class="java comments">// 获取调用方IP地址</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String application = RpcContext.getContext().getUrl().getParameter(</code><code class="java string">"application"</code><code class="java plain">); </code><code class="java comments">// 获取当前服务配置信息，所有配置信息都将转换为URL的参数</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ...</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">yyyService.yyy(); </code><code class="java comments">// 注意：每发起RPC调用，上下文状态会变化</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">boolean</code> <code class="java plain">isProviderSide = RpcContext.getContext().isProviderSide(); </code><code class="java comments">// 此时本端变成消费端，这里会返回false</code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ...</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E9%9A%90%E5%BC%8F%E4%BC%A0%E5%8F%82"></a>隐式传参</h3>

<p>(<a href="http://dubbo.io/Attachment+Parameter-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Attachment+Parameter-zh" title="Attachment Parameter-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%9A%90%E5%BC%8F%E4%BC%A0%E5%8F%82">#</a>)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>注：path,group,version,dubbo,token,timeout几个key有特殊处理，请使用其它key值。</td></tr></tbody></table></div>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/context.png-version=1&modificationDate=1320941797000.png" tppabs="http://10.20.160.198/wiki/download/attachments/6950004/context.png?version=1&amp;modificationDate=1320941797000" style="border: 0px solid black"></span></p>

<h4><a name="UserGuide-zh-%281%29%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E6%96%B9"></a>(1) 服务消费方</h4>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_779640" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">RpcContext.getContext().setAttachment(</code><code class="java string">"index"</code><code class="java plain">, </code><code class="java string">"1"</code><code class="java plain">); </code><code class="java comments">// 隐式传参，后面的远程调用都会隐式将这些参数发送到服务器端，类似cookie，用于框架集成，不建议常规业务使用</code></div><div class="line number2 index1 alt1"><code class="java plain">xxxService.xxx(); </code><code class="java comments">// 远程调用</code></div><div class="line number3 index2 alt2"><code class="java comments">// ...</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>【注】 setAttachment设置的KV，在完成下面一次远程调用会被清空。即多次远程调用要多次设置。</p>

<h4><a name="UserGuide-zh-%282%29%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E6%96%B9"></a>(2) 服务提供方</h4>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_928889" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">XxxServiceImpl </code><code class="java keyword">implements</code> <code class="java plain">XxxService {</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">xxx() { </code><code class="java comments">// 服务方法实现</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">String index = RpcContext.getContext().getAttachment(</code><code class="java string">"index"</code><code class="java plain">); </code><code class="java comments">// 获取客户端隐式传入的参数，用于框架集成，不建议常规业务使用</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// ...</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E5%BC%82%E6%AD%A5%E8%B0%83%E7%94%A8"></a>异步调用</h3>
<p>(<a href="http://dubbo.io/Async+Call-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Async+Call-zh" title="Async Call-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BC%82%E6%AD%A5%E8%B0%83%E7%94%A8">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>基于NIO的非阻塞实现并行调用，客户端不需要启动多线程即可完成并行调用多个远程服务，相对多线程开销较小。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>2.0.6及其以上版本支持</td></tr></tbody></table></div>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/future.jpg-version=1&modificationDate=1320417743000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6949442/future.jpg?version=1&amp;modificationDate=1320417743000" style="border: 0px solid black"></span></p>

<p><b>配置声明：</b></p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>consumer.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_898959" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"fooService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.foo.FooService"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"findFoo"</code> <code class="xml color1">async</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:reference</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"barService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.bar.BarService"</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"findBar"</code> <code class="xml color1">async</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div><div class="line number6 index5 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:reference</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p><b>调用代码：</b></p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_437618" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">fooService.findFoo(fooId); </code><code class="java comments">// 此调用会立即返回null</code></div><div class="line number2 index1 alt1"><code class="java plain">Future&lt;Foo&gt; fooFuture = RpcContext.getContext().getFuture(); </code><code class="java comments">// 拿到调用的Future引用，当结果返回后，会被通知和设置到此Future。</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java plain">barService.findBar(barId); </code><code class="java comments">// 此调用会立即返回null</code></div><div class="line number5 index4 alt2"><code class="java plain">Future&lt;Bar&gt; barFuture = RpcContext.getContext().getFuture(); </code><code class="java comments">// 拿到调用的Future引用，当结果返回后，会被通知和设置到此Future。</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java comments">// 此时findFoo和findBar的请求同时在执行，客户端不需要启动多线程来支持并行，而是借助NIO的非阻塞完成。</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="java plain">Foo foo = fooFuture.get(); </code><code class="java comments">// 如果foo已返回，直接拿到返回值，否则线程wait住，等待foo返回后，线程会被notify唤醒。</code></div><div class="line number10 index9 alt1"><code class="java plain">Bar bar = barFuture.get(); </code><code class="java comments">// 同理等待bar返回。</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="java comments">// 如果foo需要5秒返回，bar需要6秒返回，实际只需等6秒，即可获取到foo和bar，进行接下来的处理。</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>你也可以设置是否等待消息发出：(异步总是不等待返回)</p>
<ul>
	<li>sent="true" 等待消息发出，消息发送失败将抛出异常。</li>
	<li>sent="false" 不等待消息发出，将消息放入IO队列，即刻返回。
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_298134" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"findFoo"</code> <code class="xml color1">async</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml color1">sent</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div></li>
</ul>


<p>如果你只是想异步，完全忽略返回值，可以配置return="false"，以减少Future对象的创建和管理成本：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_336163" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"findFoo"</code> <code class="xml color1">async</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml color1">return</code><code class="xml plain">=</code><code class="xml string">"false"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E6%9C%AC%E5%9C%B0%E8%B0%83%E7%94%A8"></a>本地调用</h3>

<p>(<a href="http://dubbo.io/Local+Call-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Local+Call-zh" title="Local Call-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%AC%E5%9C%B0%E8%B0%83%E7%94%A8">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>本地调用，使用了Injvm协议，是一个伪协议，它不开启端口，不发起远程调用，只在JVM内直接关联，但执行Dubbo的Filter链。</td></tr></tbody></table></div>

<p>Define injvm protocol:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_886774" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"injvm"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Set default protocol:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_456891" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:provider</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"injvm"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Set service protocol:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_766239" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"injvm"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Use injvm first:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_349084" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:consumer</code> <code class="xml color1">injvm</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">.../&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:provider</code> <code class="xml color1">injvm</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">.../&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_38784" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">injvm</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">.../&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">injvm</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">.../&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>注意：服务暴露与服务引用都需要声明injvm="true"</td></tr></tbody></table></div>


<p><a name="UserGuide-zh-automatic"></a><b>自动暴露、引用本地服务</b></p>

<p>从 dubbo 2.2.0 开始，每个服务默认都会在本地暴露；在引用服务的时候，默认优先引用本地服务；如果希望引用远程服务可以使用一下配置强制引用远程服务。</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_165720" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">...</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml plain">... </code><code class="xml color1">scope</code><code class="xml plain">=</code><code class="xml string">"remote"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">...</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E5%8F%82%E6%95%B0%E5%9B%9E%E8%B0%83"></a>参数回调</h3>
<p>(<a href="http://dubbo.io/Parameter+Callback-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Parameter+Callback-zh" title="Parameter Callback-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8F%82%E6%95%B0%E5%9B%9E%E8%B0%83">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>参数回调方式与调用本地callback或listener相同，只需要在Spring的配置文件中声明哪个参数是callback类型即可，Dubbo将基于长连接生成反向代理，这样就可以从服务器端调用客户端逻辑。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>2.0.6及其以上版本支持</td></tr></tbody></table></div>

<p>代码参见：<a href="javascript:if(confirm(%27https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/callback  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/callback%27" tppabs="https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/callback" class="external-link" rel="nofollow">https://github.com/alibaba/dubbo/tree/master/dubbo-test/dubbo-test-examples/src/main/java/com/alibaba/dubbo/examples/callback</a></p>

<p><b>(1) 共享服务接口：</b></p>

<p>服务接口示例：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>CallbackService.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_770077" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.callback;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">public</code> <code class="java keyword">interface</code> <code class="java plain">CallbackService {</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">void</code> <code class="java plain">addListener(String key, CallbackListener listener);</code></div><div class="line number5 index4 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>CallbackListener.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_323076" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.callback;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">public</code> <code class="java keyword">interface</code> <code class="java plain">CallbackListener {</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">void</code> <code class="java plain">changed(String msg);</code></div><div class="line number5 index4 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p><b>(2) 服务提供者：</b></p>

<p>服务提供者接口实现示例：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>CallbackServiceImpl.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_242232" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.callback.impl;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.text.SimpleDateFormat;</code></div><div class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">java.util.Date;</code></div><div class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">java.util.Map;</code></div><div class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">java.util.concurrent.ConcurrentHashMap;</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">com.callback.CallbackListener;</code></div><div class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">com.callback.CallbackService;</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">CallbackServiceImpl </code><code class="java keyword">implements</code> <code class="java plain">CallbackService {</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">final</code> <code class="java plain">Map&lt;String, CallbackListener&gt; listeners = </code><code class="java keyword">new</code> <code class="java plain">ConcurrentHashMap&lt;String, CallbackListener&gt;();</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">CallbackServiceImpl() {</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Thread t = </code><code class="java keyword">new</code> <code class="java plain">Thread(</code><code class="java keyword">new</code> <code class="java plain">Runnable() {</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">run() {</code></div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">while</code><code class="java plain">(</code><code class="java keyword">true</code><code class="java plain">) {</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">for</code><code class="java plain">(Map.Entry&lt;String, CallbackListener&gt; entry : listeners.entrySet()){</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">entry.getValue().changed(getChanged(entry.getKey()));</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Throwable t) {</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">listeners.remove(entry.getKey());</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Thread.sleep(</code><code class="java value">5000</code><code class="java plain">); </code><code class="java comments">// 定时触发变更通知</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Throwable t) { </code><code class="java comments">// 防御容错</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">t.printStackTrace();</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">});</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">t.setDaemon(</code><code class="java keyword">true</code><code class="java plain">);</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">t.start();</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">addListener(String key, CallbackListener listener) {</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">listeners.put(key, listener);</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">listener.changed(getChanged(key)); </code><code class="java comments">// 发送变更通知</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java plain">String getChanged(String key) {</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java string">"Changed: "</code> <code class="java plain">+ </code><code class="java keyword">new</code> <code class="java plain">SimpleDateFormat(</code><code class="java string">"yyyy-MM-dd HH:mm:ss"</code><code class="java plain">).format(</code><code class="java keyword">new</code> <code class="java plain">Date());</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number46 index45 alt1">&nbsp;</div><div class="line number47 index46 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>服务提供者配置示例：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_279753" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">bean</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"callbackService"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"com.callback.impl.CallbackServiceImpl"</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.callback.CallbackService"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"callbackService"</code> <code class="xml color1">connections</code><code class="xml plain">=</code><code class="xml string">"1"</code> <code class="xml color1">callbacks</code><code class="xml plain">=</code><code class="xml string">"1000"</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"addListener"</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:argument</code> <code class="xml color1">index</code><code class="xml plain">=</code><code class="xml string">"1"</code> <code class="xml color1">callback</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!--也可以通过指定类型的方式--&gt;</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!--&lt;dubbo:argument type="com.demo.CallbackListener" callback="true" /&gt;--&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:method</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:service</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p><b>(2) 服务消费者：</b></p>

<p>服务消费者配置示例：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>consumer.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_767660" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"callbackService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.callback.CallbackService"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>服务消费者调用示例：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>CallbackServiceTest.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_886128" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">ClassPathXmlApplicationContext context = </code><code class="java keyword">new</code> <code class="java plain">ClassPathXmlApplicationContext(</code><code class="java string">"classpath:consumer.xml"</code><code class="java plain">);</code></div><div class="line number2 index1 alt1"><code class="java plain">context.start();</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java plain">CallbackService callbackService = (CallbackService) context.getBean(</code><code class="java string">"callbackService"</code><code class="java plain">);</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="java plain">callbackService.addListener(</code><code class="java string">"<a href="http://10.20.160.198/wiki/display/dubbo/foo.bar" "="">http://10.20.160.198/wiki/display/dubbo/foo.bar"</a></code><code class="java plain">, </code><code class="java keyword">new</code> <code class="java plain">CallbackListener(){</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">changed(String msg) {</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"callback1:"</code> <code class="java plain">+ msg);</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number10 index9 alt1"><code class="java plain">});</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E4%BA%8B%E4%BB%B6%E9%80%9A%E7%9F%A5"></a>事件通知</h3>
<p>(<a href="http://dubbo.io/Event+Notify-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Event+Notify-zh" title="Event Notify-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%BA%8B%E4%BB%B6%E9%80%9A%E7%9F%A5">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>在调用之前，调用之后，出现异常时，会触发oninvoke, onreturn, onthrow三个事件，可以配置当事件发生时，通知哪个类的哪个方法。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>支持版本：2.0.7之后</td></tr></tbody></table></div>

<p><b>(1) 服务提供者与消费者共享服务接口：</b></p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>IDemoService.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_20734" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">interface</code> <code class="java plain">IDemoService {</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">Person get(</code><code class="java keyword">int</code> <code class="java plain">id);</code></div><div class="line number3 index2 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p><b>(2) 服务提供者实现：</b></p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>DemoServiceImpl.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_851286" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">class</code> <code class="java plain">NormalDemoService </code><code class="java keyword">implements</code> <code class="java plain">IDemoService {</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">Person get(</code><code class="java keyword">int</code> <code class="java plain">id) {</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java keyword">new</code> <code class="java plain">Person(id, </code><code class="java string">"charles`son"</code><code class="java plain">, </code><code class="java value">4</code><code class="java plain">);</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number5 index4 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p><b>(3) 服务提供者配置：</b></p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>provider.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_450369" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"rpc-callback-demo"</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"<a href="http://10.20.160.198/wiki/display/dubbo/10.20.153.186" "="">http://10.20.160.198/wiki/display/dubbo/10.20.153.186"</a></code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">bean</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"demoService"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.callback.implicit.NormalDemoService"</code> <code class="xml plain">/&gt;</code></div><div class="line number4 index3 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.callback.implicit.IDemoService"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"demoService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"cn"</code><code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p><b>(4) 服务消费者Callback接口及实现：</b></p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Nofify.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_281957" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">interface</code> <code class="java plain">Nofify {</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">onreturn(Person msg, Integer id);</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">onthrow(Throwable ex, Integer id);</code></div><div class="line number4 index3 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>NofifyImpl.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_716740" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">class</code> <code class="java plain">NofifyImpl </code><code class="java keyword">implements</code> <code class="java plain">Nofify {</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">Map&lt;Integer, Person&gt;&nbsp;&nbsp;&nbsp; ret&nbsp;&nbsp;&nbsp; = </code><code class="java keyword">new</code> <code class="java plain">HashMap&lt;Integer, Person&gt;();</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">Map&lt;Integer, Throwable&gt; errors = </code><code class="java keyword">new</code> <code class="java plain">HashMap&lt;Integer, Throwable&gt;();</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">onreturn(Person msg, Integer id) {</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"onreturn:"</code> <code class="java plain">+ msg);</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">ret.put(id, msg);</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">onthrow(Throwable ex, Integer id) {</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">errors.put(id, ex);</code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number11 index10 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p><b>(5) 服务消费者Callback接口及实现：</b></p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>consumer.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_824755" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">bean</code> <code class="xml color1">id</code> <code class="xml plain">=</code><code class="xml string">"demoCallback"</code> <code class="xml color1">class</code> <code class="xml plain">= </code><code class="xml string">"com.alibaba.dubbo.callback.implicit.NofifyImpl"</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"demoService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.callback.implicit.IDemoService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"cn"</code> <code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"get"</code> <code class="xml color1">async</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml color1">onreturn</code> <code class="xml plain">= </code><code class="xml string">"demoCallback.onreturn"</code> <code class="xml color1">onthrow</code><code class="xml plain">=</code><code class="xml string">"demoCallback.onthrow"</code> <code class="xml plain">/&gt;</code></div><div class="line number4 index3 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:reference</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>注：<br>
callback与async功能正交分解：<br>
async=true，表示结果是否马上返回.<br>
onreturn 表示是否需要回调.

<p>组合情况：(async=false 默认)<br>
异步回调模式：async=true onreturn="xxx"<br>
同步回调模式：async=false onreturn="xxx"<br>
异步无回调 ：async=true<br>
同步无回调 ：async=false</p></td></tr></tbody></table></div>
<p><b>(6) TEST CASE：</b></p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Test.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_490305" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">IDemoService demoService = (IDemoService) context.getBean(</code><code class="java string">"demoService"</code><code class="java plain">);</code></div><div class="line number2 index1 alt1"><code class="java plain">NofifyImpl notify = (NofifyImpl) context.getBean(</code><code class="java string">"demoCallback"</code><code class="java plain">);</code></div><div class="line number3 index2 alt2"><code class="java keyword">int</code> <code class="java plain">requestId = </code><code class="java value">2</code><code class="java plain">;</code></div><div class="line number4 index3 alt1"><code class="java plain">Person ret = demoService.get(requestId);</code></div><div class="line number5 index4 alt2"><code class="java plain">Assert.assertEquals(</code><code class="java keyword">null</code><code class="java plain">, ret);</code></div><div class="line number6 index5 alt1"><code class="java comments">//for Test：只是用来说明callback正常被调用，业务具体实现自行决定.</code></div><div class="line number7 index6 alt2"><code class="java keyword">for</code> <code class="java plain">(</code><code class="java keyword">int</code> <code class="java plain">i = </code><code class="java value">0</code><code class="java plain">; i &lt; </code><code class="java value">10</code><code class="java plain">; i++) {</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code> <code class="java plain">(!notify.ret.containsKey(requestId)) {</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Thread.sleep(</code><code class="java value">200</code><code class="java plain">);</code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">else</code> <code class="java plain">{</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">break</code><code class="java plain">;</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number13 index12 alt2"><code class="java plain">}</code></div><div class="line number14 index13 alt1"><code class="java plain">Assert.assertEquals(requestId, notify.ret.get(requestId).getId());</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E6%9C%AC%E5%9C%B0%E5%AD%98%E6%A0%B9"></a>本地存根</h3>
<p>(<a href="http://dubbo.io/Stub+Proxy-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Stub+Proxy-zh" title="Stub Proxy-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%AC%E5%9C%B0%E5%AD%98%E6%A0%B9">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>远程服务后，客户端通常只剩下接口，而实现全在服务器端，但提供方有些时候想在客户端也执行部分逻辑，比如：做ThreadLocal缓存，提前验证参数，调用失败后伪造容错数据等等，此时就需要在API中带上Stub，客户端生成Proxy实，会把Proxy通过构造函数传给Stub，然后把Stub暴露组给用户，Stub可以决定要不要去调Proxy。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Stub必须有可传入Proxy的构造函数。</td></tr></tbody></table></div>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/stub.jpg-version=1&modificationDate=1320417778000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6949448/stub.jpg?version=1&amp;modificationDate=1320417778000" style="border: 0px solid black"></span></p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_253143" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">stub</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Or:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_308792" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">stub</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarServiceStub"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>api.jar:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_316356" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">com.foo.BarService</code></div><div class="line number2 index1 alt1"><code class="text plain">com.foo.BarServiceStub // 在API旁边放一个Stub实现，它实现BarService接口，并有一个传入远程BarService实例的构造函数</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_789177" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.foo</code></div><div class="line number2 index1 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">BarServiceStub </code><code class="java keyword">implements</code> <code class="java plain">BarService {</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">final</code> <code class="java plain">BarService barService;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// 构造函数传入真正的远程代理对象</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">(BarService barService) {</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.barService = barService;</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">String sayHello(String name) {</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// 此代码在客户端执行</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// 你可以在客户端做ThreadLocal本地缓存，或预先验证参数是否合法，等等</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">barService.sayHello(name);</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(Exception e) {</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// 你可以容错，可以做任何AOP拦截事项</code></div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java string">"容错数据"</code><code class="java plain">;</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number21 index20 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E6%9C%AC%E5%9C%B0%E4%BC%AA%E8%A3%85"></a>本地伪装</h3>
<p>(<a href="http://dubbo.io/Mock+Proxy-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Mock+Proxy-zh" title="Mock Proxy-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%AC%E5%9C%B0%E4%BC%AA%E8%A3%85">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Mock通常用于服务降级，比如某验权服务，当服务提供方全部挂掉后，客户端不抛出异常，而是通过Mock数据返回授权失败。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Mock是Stub的一个子集，便于服务提供方在客户端执行容错逻辑，因经常需要在出现RpcException(比如网络失败，超时等)时进行容错，而在出现业务异常(比如登录用户名密码错误)时不需要容错，如果用Stub，可能就需要捕获并依赖RpcException类，而用Mock就可以不依赖RpcException，因为它的约定就是只有出现RpcException时才执行。</td></tr></tbody></table></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_809720" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">mock</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Or:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_245884" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">mock</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarServiceMock"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>api.jar:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_441466" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain">com.foo.BarService</code></div><div class="line number2 index1 alt1"><code class="text plain">com.foo.BarServiceMock // 在API旁边放一个Mock实现，它实现BarService接口，并有一个无参构造函数</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_447681" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.foo</code></div><div class="line number2 index1 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">BarServiceMock </code><code class="java keyword">implements</code> <code class="java plain">BarService {</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">String sayHello(String name) {</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// 你可以伪造容错数据，此方法只在出现RpcException时被执行</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java string">"容错数据"</code><code class="java plain">;</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number8 index7 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>如果服务的消费方经常需要try-catch捕获异常，如：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_748802" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">Offer offer = </code><code class="java keyword">null</code><code class="java plain">;</code></div><div class="line number2 index1 alt1"><code class="java keyword">try</code> <code class="java plain">{</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">offer = offerService.findOffer(offerId);</code></div><div class="line number4 index3 alt1"><code class="java plain">} </code><code class="java keyword">catch</code> <code class="java plain">(RpcException e) {</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">logger.error(e);</code></div><div class="line number6 index5 alt1"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>请考虑改为Mock实现，并在Mock中return null。</p>

<p>如果只是想简单的忽略异常，在2.0.11以上版本可用：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_889006" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">mock</code><code class="xml plain">=</code><code class="xml string">"return null"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E5%BB%B6%E8%BF%9F%E6%9A%B4%E9%9C%B2"></a>延迟暴露</h3>
<p>(<a href="http://dubbo.io/Delay+Export-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Delay+Export-zh" title="Delay Export-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BB%B6%E8%BF%9F%E6%9A%B4%E9%9C%B2">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>如果你的服务需要Warmup时间，比如初始化缓存，等待相关资源就位等，可以使用delay进行延迟暴露。</td></tr></tbody></table></div>

<p>延迟5秒暴露服务：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_737336" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">delay</code><code class="xml plain">=</code><code class="xml string">"5000"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>延迟到Spring初始化完成后，再暴露服务：(基于Spring的ContextRefreshedEvent事件触发暴露)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_398326" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">delay</code><code class="xml plain">=</code><code class="xml string">"-1"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Spring2.x初始化死锁问题</b><br>在Spring解析到&lt;dubbo:service /&gt;时，就已经向外暴露了服务，而Spring还在接着初始化其它Bean。<br>
如果这时有请求进来，并且服务的实现类里有调用applicationContext.getBean()的用法。

<p>1. 请求线程的applicationContext.getBean()调用，先同步singletonObjects判断Bean是否存在，不存在就同步beanDefinitionMap进行初始化，并再次同步singletonObjects写入Bean实例缓存。<br>
<span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/lock-get-bean.jpg-version=1&modificationDate=1330949876000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6950732/lock-get-bean.jpg?version=1&amp;modificationDate=1330949876000" style="border: 0px solid black"></span><br>
2. 而Spring初始化线程，因不需要判断Bean的存在，直接同步beanDefinitionMap进行初始化，并同步singletonObjects写入Bean实例缓存。<br>
<span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/lock-init-context.jpg-version=1&modificationDate=1330949881000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6950732/lock-init-context.jpg?version=1&amp;modificationDate=1330949881000" style="border: 0px solid black"></span></p>

<p>这样就导致getBean线程，先锁singletonObjects，再锁beanDefinitionMap，再次锁singletonObjects。<br>
而Spring初始化线程，先锁beanDefinitionMap，再锁singletonObjects。<br>
反向锁导致线程死锁，不能提供服务，启动不了。</p></td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>规避办法</b><br>1. 强烈建议不要在服务的实现类中有applicationContext.getBean()的调用，全部采用IoC注入的方式使用Spring的Bean。<br>
2. 如果实在要调getBean()，可以将Dubbo的配置放在Spring的最后加载。<br>
3. 如果不想依赖配置顺序，可以使用&lt;dubbo:provider deplay=”-1” /&gt;，使Dubbo在Spring容器初始化完后，再暴露服务。<br>
4. 如果大量使用getBean()，相当于已经把Spring退化为工厂模式在用，可以将Dubbo的服务隔离单独的Spring容器。</td></tr></tbody></table></div>

<h3><a name="UserGuide-zh-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6"></a>并发控制</h3>
<p>(<a href="http://dubbo.io/Concurrent+Control-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Concurrent+Control-zh" title="Concurrent Control-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6">#</a>)</p>

<p>限制com.foo.BarService的每个方法，<b>服务器端</b>并发执行（或占用线程池线程数）不能超过10个：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_830052" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">executes</code><code class="xml plain">=</code><code class="xml string">"10"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>限制com.foo.BarService的sayHello方法，<b>服务器端</b>并发执行（或占用线程池线程数）不能超过10个：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_867941" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"sayHello"</code> <code class="xml color1">executes</code><code class="xml plain">=</code><code class="xml string">"10"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:service</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>限制com.foo.BarService的每个方法，每<b>客户端</b>并发执行（或占用连接的请求数）不能超过10个：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_99662" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">actives</code><code class="xml plain">=</code><code class="xml string">"10"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>Or:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_21178" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">actives</code><code class="xml plain">=</code><code class="xml string">"10"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>限制com.foo.BarService的sayHello方法，每<b>客户端</b>并发执行（或占用连接的请求数）不能超过10个：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_613273" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"sayHello"</code> <code class="xml color1">actives</code><code class="xml plain">=</code><code class="xml string">"10"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:service</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>Or:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_191642" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"sayHello"</code> <code class="xml color1">actives</code><code class="xml plain">=</code><code class="xml string">"10"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:service</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>如果&lt;dubbo:service&gt;和&lt;dubbo:reference&gt;都配了actives，&lt;dubbo:reference&gt;优先，参见：<a href="http://dubbo.io/Configuration+Reference.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Configuration+Reference" title="Configuration Reference">配置的覆盖策略</a>。</p>

<p>Load Balance均衡：</p>

<p>配置服务的<b>客户端</b>的loadbalance属性为leastactive，此Loadbalance会调用并发数最小的Provider（Consumer端并发数）。</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_350152" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">loadbalance</code><code class="xml plain">=</code><code class="xml string">"leastactive"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>Or:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_138813" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">loadbalance</code><code class="xml plain">=</code><code class="xml string">"leastactive"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E8%BF%9E%E6%8E%A5%E6%8E%A7%E5%88%B6"></a>连接控制</h3>
<p>(<a href="http://dubbo.io/Connection+Control-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Connection+Control-zh" title="Connection Control-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%BF%9E%E6%8E%A5%E6%8E%A7%E5%88%B6">#</a>)</p>

<p>限制<b>服务器端</b>接受的连接不能超过10个：（以连接在Server上，所以配置在Provider上）</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_826288" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:provider</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">accepts</code><code class="xml plain">=</code><code class="xml string">"10"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_842901" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">accepts</code><code class="xml plain">=</code><code class="xml string">"10"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>限制<b>客户端服务</b>使用连接连接数：(如果是长连接，比如Dubbo协议，connections表示该服务对每个提供者建立的长连接数)</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_633320" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">connections</code><code class="xml plain">=</code><code class="xml string">"10"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>Or:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_920102" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">connections</code><code class="xml plain">=</code><code class="xml string">"10"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>如果&lt;dubbo:service&gt;和&lt;dubbo:reference&gt;都配了connections，&lt;dubbo:reference&gt;优先，参见：<a href="http://dubbo.io/Configuration+Reference.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Configuration+Reference" title="Configuration Reference">配置的覆盖策略</a>。</p>
<h3><a name="UserGuide-zh-%E5%BB%B6%E8%BF%9F%E8%BF%9E%E6%8E%A5"></a>延迟连接</h3>
<p>(<a href="http://dubbo.io/Lazy+Connection-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Lazy+Connection-zh" title="Lazy Connection-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BB%B6%E8%BF%9F%E8%BF%9E%E6%8E%A5">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>延迟连接，用于减少长连接数，当有调用发起时，再创建长连接。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>只对使用长连接的dubbo协议生效。</td></tr></tbody></table></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_391915" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">lazy</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E7%B2%98%E6%BB%9E%E8%BF%9E%E6%8E%A5"></a>粘滞连接</h3>
<p>(<a href="http://dubbo.io/Sticky+Connection-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Sticky+Connection-zh" title="Sticky Connection-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E7%B2%98%E6%BB%9E%E8%BF%9E%E6%8E%A5">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>粘滞连接用于有状态服务，尽可能让客户端总是向同一提供者发起调用，除非该提供者挂了，再连另一台。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>粘滞连接将自动开启延迟连接，以减少长连接数，参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BB%B6%E8%BF%9F%E8%BF%9E%E6%8E%A5">延迟连接</a> (<a href="http://dubbo.io/Lazy+Connection-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Lazy+Connection-zh" title="Lazy Connection-zh">+</a>)</td></tr></tbody></table></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_331622" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">sticky</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E4%BB%A4%E7%89%8C%E9%AA%8C%E8%AF%81"></a>令牌验证</h3>
<p>(<a href="http://dubbo.io/Token+Verify-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Token+Verify-zh" title="Token Verify-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%BB%A4%E7%89%8C%E9%AA%8C%E8%AF%81">#</a>)</p>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/dubbo-token.jpg-version=1&modificationDate=1326472608000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6950705/dubbo-token.jpg?version=1&amp;modificationDate=1326472608000" style="border: 0px solid black"></span></p>


<ul>
	<li>防止消费者绕过注册中心访问提供者</li>
	<li>在注册中心控制权限，以决定要不要下发令牌给消费者</li>
	<li>注册中心可灵活改变授权方式，而不需修改或升级提供者</li>
</ul>


<p>可以全局设置开启令牌验证：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_203126" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!--随机token令牌，使用UUID生成--&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:provider</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">token</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_434995" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!--固定token令牌，相当于密码--&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:provider</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">token</code><code class="xml plain">=</code><code class="xml string">"123456"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>


<p>也可在服务级别设置：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_786756" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!--随机token令牌，使用UUID生成--&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">token</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_98922" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!--固定token令牌，相当于密码--&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.BarService"</code> <code class="xml color1">token</code><code class="xml plain">=</code><code class="xml string">"123456"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>


<p>还可在协议级别设置：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_518153" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!--随机token令牌，使用UUID生成--&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">token</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_140101" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml comments">&lt;!--固定token令牌，相当于密码--&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">token</code><code class="xml plain">=</code><code class="xml string">"123456"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99"></a>路由规则</h3>
<p>(<a href="http://dubbo.io/Router+Rule-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Router+Rule-zh" title="Router Rule-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B0">#</a>)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>2.2.0以上版本支持</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>路由规则扩展点：<a href="http://dubbo.io/Developer+Guide-zh.htm#DeveloperGuide-zh-%E8%B7%AF%E7%94%B1%E6%89%A9%E5%B1%95" tppabs="http://10.20.160.198/wiki/display/dubbo/Developer+Guide-zh#DeveloperGuide-zh-%E8%B7%AF%E7%94%B1%E6%89%A9%E5%B1%95">路由扩展</a></td></tr></tbody></table></div>

<p>向注册中心写入路由规则：(通常由监控中心或治理中心的页面完成)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_982254" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">RegistryFactory registryFactory = ExtensionLoader.getExtensionLoader(RegistryFactory.</code><code class="java keyword">class</code><code class="java plain">).getAdaptiveExtension();</code></div><div class="line number2 index1 alt1"><code class="java plain">Registry registry = registryFactory.getRegistry(URL.valueOf(</code><code class="java string">"zookeeper://10.20.153.10:2181"</code><code class="java plain">));</code></div><div class="line number3 index2 alt2"><code class="java plain">registry.register(URL.valueOf(</code><code class="java string">"condition://0.0.0.0/com.foo.BarService?category=routers&amp;dynamic=false&amp;rule="</code> <code class="java plain">+ URL.encode(</code><code class="java string">"<a href=""></a>http://10.20.160.198/wiki/display/dubbo/host = 10.20.153.10 =&gt; host = 10.20.153.11"</code><code class="java plain">) + "));</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>其中：</p>
<ul>
	<li>condition://
	<ul>
		<li>表示路由规则的类型，支持<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9D%A1%E4%BB%B6%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99">条件路由规则</a>和<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%84%9A%E6%9C%AC%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99">脚本路由规则</a>，可扩展，必填。</li>
	</ul>
	</li>
	<li>0.0.0.0
	<ul>
		<li>表示对所有IP地址生效，如果只想对某个IP的生效，请填入具体IP，必填。</li>
	</ul>
	</li>
	<li>com.foo.BarService
	<ul>
		<li>表示只对指定服务生效，必填。</li>
	</ul>
	</li>
	<li>category=routers
	<ul>
		<li>表示该数据为动态配置类型，必填。</li>
	</ul>
	</li>
	<li>dynamic=false
	<ul>
		<li>表示该数据为持久数据，当注册方退出时，数据依然保存在注册中心，必填。</li>
	</ul>
	</li>
	<li>enabled=true
	<ul>
		<li>覆盖规则是否生效，可不填，缺省生效。</li>
	</ul>
	</li>
	<li>force=false
	<ul>
		<li>当路由结果为空时，是否强制执行，如果不强制执行，路由结果为空的路由规则将自动失效，可不填，缺省为flase。</li>
	</ul>
	</li>
	<li>runtime=false
	<ul>
		<li>是否在每次调用时执行路由规则，否则只在提供者地址列表变更时预先执行并缓存结果，调用时直接从缓存中获取路由结果。</li>
		<li>如果用了参数路由，必须设为true，需要注意设置会影响调用的性能，可不填，缺省为flase。</li>
	</ul>
	</li>
	<li>priority=1
	<ul>
		<li>路由规则的优先级，用于排序，优先级越大越靠前执行，可不填，缺省为0。</li>
	</ul>
	</li>
	<li>rule=URL.encode("host = 10.20.153.10 =&gt; host = 10.20.153.11")
	<ul>
		<li>表示路由规则的内容，必填。</li>
	</ul>
	</li>
</ul>


<h4><a name="UserGuide-zh-%E6%9D%A1%E4%BB%B6%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99"></a>条件路由规则</h4>
<p>(<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9D%A1%E4%BB%B6%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99">#</a>)</p>

<p>基于条件表达式的路由规则，如：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_803544" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">host = </code><code class="java value">10.20</code><code class="java plain">.</code><code class="java value">153.10</code> <code class="java plain">=&gt; host = </code><code class="java value">10.20</code><code class="java plain">.</code><code class="java value">153.11</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>规则：</p>
<ul>
	<li>"=&gt;"之前的为消费者匹配条件，所有参数和消费者的URL进行对比，当消费者满足匹配条件时，对该消费者执行后面的过滤规则。</li>
	<li>"=&gt;"之后为提供者地址列表的过滤条件，所有参数和提供者的URL进行对比，消费者最终只拿到过滤后的地址列表。</li>
	<li>如果匹配条件为空，表示对所有消费方应用，如：=&gt; host != 10.20.153.11</li>
	<li>如果过滤条件为空，表示禁止访问，如：host = 10.20.153.10 =&gt;</li>
</ul>


<p>表达式：</p>
<ul>
	<li>参数支持：
	<ul>
		<li>服务调用信息，如：method, <del>argument</del> 等 <del>(暂不支持参数路由)</del></li>
		<li>URL本身的字段，如：protocol, host, port 等</li>
		<li>以及URL上的所有参数，如：application, organization 等</li>
	</ul>
	</li>
	<li>条件支持：
	<ul>
		<li>等号"="表示"匹配"，如：host = 10.20.153.10</li>
		<li>不等号"!="表示"不匹配"，如：host != 10.20.153.10</li>
	</ul>
	</li>
	<li>值支持：
	<ul>
		<li>以逗号","分隔多个值，如：host != 10.20.153.10,10.20.153.11</li>
		<li>以星号"*"结尾，表示通配，如：host != 10.20.*</li>
		<li>以美元符"$"开头，表示引用消费者参数，如：host = $host</li>
	</ul>
	</li>
</ul>


<p>示例：</p>

<p>1. 排除预发布机：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_152156" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">=&gt; host != </code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.91</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>2. 白名单：(注意：一个服务只能有一条白名单规则，否则两条规则交叉，就都被筛选掉了)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_402382" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">host != </code><code class="java value">10.20</code><code class="java plain">.</code><code class="java value">153.10</code><code class="java plain">,</code><code class="java value">10.20</code><code class="java plain">.</code><code class="java value">153.11</code> <code class="java plain">=&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>3. 黑名单：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_849903" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">host = </code><code class="java value">10.20</code><code class="java plain">.</code><code class="java value">153.10</code><code class="java plain">,</code><code class="java value">10.20</code><code class="java plain">.</code><code class="java value">153.11</code> <code class="java plain">=&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>4. 服务寄宿在应用上，只暴露一部分的机器，防止整个集群挂掉：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_794932" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">=&gt; host = </code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.1</code><code class="java plain">*,</code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.2</code><code class="java plain">*</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>5. 为重要应用提供额外的机器：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_675225" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">application != kylin =&gt; host != </code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.95</code><code class="java plain">,</code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.96</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>6. 读写分离：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_375349" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">method = find*,list*,get*,is* =&gt; host = </code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.94</code><code class="java plain">,</code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.95</code><code class="java plain">,</code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.96</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_488319" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">method != find*,list*,get*,is* =&gt; host = </code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.97</code><code class="java plain">,</code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.98</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>7. 前后台分离：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_364426" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">application = bops =&gt; host = </code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.91</code><code class="java plain">,</code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.92</code><code class="java plain">,</code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.93</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_728975" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">application != bops =&gt; host = </code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.94</code><code class="java plain">,</code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.95</code><code class="java plain">,</code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3.96</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>8. 隔离不同机房网段：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_490451" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">host != </code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3</code><code class="java plain">.* =&gt; host != </code><code class="java value">172.22</code><code class="java plain">.</code><code class="java value">3</code><code class="java plain">.*</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>9. 提供者与消费者部署在同集群内，本机只访问本机的服务：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_977966" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">=&gt; host = $host</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-%E8%84%9A%E6%9C%AC%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99"></a>脚本路由规则</h4>
<p>(<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%84%9A%E6%9C%AC%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>支持<a href="javascript:if(confirm(%27http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting%27" tppabs="http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting" class="external-link" rel="nofollow">JDK脚本引擎</a>的所有脚本，比如：javascript,jruby,groovy等，通过type=javascript参数设置脚本类型，缺省为javascript。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>脚本没有沙箱约束，可执行任意代码，存在后门风险</td></tr></tbody></table></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_592349" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java string">"script://0.0.0.0/com.foo.BarService?category=routers&amp;dynamic=false&amp;rule="</code> <code class="java plain">+ URL.encode(</code><code class="java string">"function route(invokers) { ... } (invokers)"</code><code class="java plain">)</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>基于脚本引擎的路由规则，如：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_270888" class="syntaxhighlighter nogutter  javascript"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="javascript keyword">function</code> <code class="javascript plain">route(invokers) {</code></div><div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">var</code> <code class="javascript plain">result = </code><code class="javascript keyword">new</code> <code class="javascript plain">java.util.ArrayList(invokers.size());</code></div><div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">for</code> <code class="javascript plain">(i = 0; i &lt; invokers.size(); i ++) {</code></div><div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">if</code> <code class="javascript plain">(</code><code class="javascript string">"<a href="http://10.20.160.198/wiki/display/dubbo/10.20.153.10" "="">http://10.20.160.198/wiki/display/dubbo/10.20.153.10"</a></code><code class="javascript plain">.equals(invokers.get(i).getUrl().getHost())) {</code></div><div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">result.add(invokers.get(i));</code></div><div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div><div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript keyword">return</code> <code class="javascript plain">result;</code></div><div class="line number9 index8 alt2"><code class="javascript plain">} (invokers); </code><code class="javascript comments">// 表示立即执行方法</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99"></a>配置规则</h3>
<p>(<a href="http://dubbo.io/Configurator+Rule-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Configurator+Rule-zh" title="Configurator Rule-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99">#</a>)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>2.2.0以上版本支持</td></tr></tbody></table></div>

<p>向注册中心写入动态配置覆盖规则：(通常由监控中心或治理中心的页面完成)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_21614" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">RegistryFactory registryFactory = ExtensionLoader.getExtensionLoader(RegistryFactory.</code><code class="java keyword">class</code><code class="java plain">).getAdaptiveExtension();</code></div><div class="line number2 index1 alt1"><code class="java plain">Registry registry = registryFactory.getRegistry(URL.valueOf(</code><code class="java string">"zookeeper://10.20.153.10:2181"</code><code class="java plain">));</code></div><div class="line number3 index2 alt2"><code class="java plain">registry.register(URL.valueOf(</code><code class="java string">"override://0.0.0.0/com.foo.BarService?category=configurators&amp;dynamic=false&amp;application=foo&amp;timeout=1000"</code><code class="java plain">));</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>其中：</p>
<ul>
	<li>override://
	<ul>
		<li>表示数据采用覆盖方式，支持override和absent，可扩展，必填。</li>
	</ul>
	</li>
	<li>0.0.0.0
	<ul>
		<li>表示对所有IP地址生效，如果只想覆盖某个IP的数据，请填入具体IP，必填。</li>
	</ul>
	</li>
	<li>com.foo.BarService
	<ul>
		<li>表示只对指定服务生效，必填。</li>
	</ul>
	</li>
	<li>category=configurators
	<ul>
		<li>表示该数据为动态配置类型，必填。</li>
	</ul>
	</li>
	<li>dynamic=false
	<ul>
		<li>表示该数据为持久数据，当注册方退出时，数据依然保存在注册中心，必填。</li>
	</ul>
	</li>
	<li>enabled=true
	<ul>
		<li>覆盖规则是否生效，可不填，缺省生效。</li>
	</ul>
	</li>
	<li>application=foo
	<ul>
		<li>表示只对指定应用生效，可不填，表示对所有应用生效。</li>
	</ul>
	</li>
	<li>timeout=1000
	<ul>
		<li>表示将满足以上条件的timeout参数的值覆盖为1000。</li>
		<li>如果想覆盖其它参数，直接加在override的URL参数上。</li>
	</ul>
	</li>
</ul>


<p>示例：</p>

<p>1. 禁用提供者：(通常用于临时踢除某台提供者机器，相似的，禁止消费者访问请使用<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh#UserGuide-zh-%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99">路由规则</a>)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_638744" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">override:</code><code class="java comments">//10.20.153.10/com.foo.BarService?category=configurators&amp;dynamic=false&amp;disbaled=true</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>2. 调整权重：(通常用于容量评估，缺省权重为100)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_360308" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">override:</code><code class="java comments">//10.20.153.10/com.foo.BarService?category=configurators&amp;dynamic=false&amp;weight=200</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>3. 调整负载均衡策略：(缺省负载均衡策略为random)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_489054" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">override:</code><code class="java comments">//10.20.153.10/com.foo.BarService?category=configurators&amp;dynamic=false&amp;loadbalance=leastactive</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>4. 服务降级：(通常用于临时屏蔽某个出错的非关键服务)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_565870" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">override:</code><code class="java comments">//0.0.0.0/com.foo.BarService?category=configurators&amp;dynamic=false&amp;application=foo&amp;mock=force:return+null</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7"></a>服务降级</h3>
<p>(<a href="http://dubbo.io/Service+Degradation-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Service+Degradation-zh" title="Service Degradation-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7">#</a>)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>2.2.0以上版本支持</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99">配置规则</a></td></tr></tbody></table></div>

<p>向注册中心写入动态配置覆盖规则：(通过由监控中心或治理中心的页面完成)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_535062" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">RegistryFactory registryFactory = ExtensionLoader.getExtensionLoader(RegistryFactory.</code><code class="java keyword">class</code><code class="java plain">).getAdaptiveExtension();</code></div><div class="line number2 index1 alt1"><code class="java plain">Registry registry = registryFactory.getRegistry(URL.valueOf(</code><code class="java string">"zookeeper://10.20.153.10:2181"</code><code class="java plain">));</code></div><div class="line number3 index2 alt2"><code class="java plain">registry.register(URL.valueOf(</code><code class="java string">"override://0.0.0.0/com.foo.BarService?category=configurators&amp;dynamic=false&amp;application=foo&amp;mock=force:return+null"</code><code class="java plain">));</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>其中：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_97061" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">mock=force:</code><code class="java keyword">return</code><code class="java plain">+</code><code class="java keyword">null</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<ul>
	<li>表示消费方对该服务的方法调用都直接返回null值，不发起远程调用。</li>
	<li>屏蔽不重要服务不可用时对调用方的影响。</li>
</ul>


<p>还可以改为：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_884762" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">mock=fail:</code><code class="java keyword">return</code><code class="java plain">+</code><code class="java keyword">null</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<ul>
	<li>表示消费方对该服务的方法调用在失败后，再返回null值，不抛异常。</li>
	<li>容忍不重要服务不稳定时对调用方的影响。</li>
</ul>

<h3><a name="UserGuide-zh-%E4%BC%98%E9%9B%85%E5%81%9C%E6%9C%BA"></a>优雅停机</h3>
<p>(<a href="http://dubbo.io/Graceful+Shutdown-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Graceful+Shutdown-zh" title="Graceful Shutdown-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%BC%98%E9%9B%85%E5%81%9C%E6%9C%BA">#</a>)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Dubbo是通过JDK的ShutdownHook来完成优雅停机的，所以如果用户使用"kill -9 PID"等强制关闭指令，是不会执行优雅停机的，只有通过"kill PID"时，才会执行。</td></tr></tbody></table></div>

<p>原理：</p>
<ul>
	<li>服务提供方
	<ul>
		<li>停止时，先标记为不接收新请求，新请求过来时直接报错，让客户端重试其它机器。</li>
		<li>然后，检测线程池中的线程是否正在运行，如果有，等待所有线程执行完成，除非超时，则强制关闭。</li>
	</ul>
	</li>
	<li>服务消费方
	<ul>
		<li>停止时，不再发起新的调用请求，所有新的调用在客户端即报错。</li>
		<li>然后，检测有没有请求的响应还没有返回，等待响应返回，除非超时，则强制关闭。</li>
	</ul>
	</li>
</ul>


<p>设置优雅停机超时时间，缺省超时时间是<font color="brown">10秒</font>：(超时则强制关闭)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_75802" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml plain">...&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:parameter</code> <code class="xml color1">key</code><code class="xml plain">=</code><code class="xml string">"shutdown.timeout"</code> <code class="xml color1">value</code><code class="xml plain">=</code><code class="xml string">"60000"</code> <code class="xml plain">/&gt; </code><code class="xml comments">&lt;!-- 单位毫秒 --&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:application</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>如果ShutdownHook不能生效，可以自行调用：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_744416" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">ProtocolConfig.destroyAll();</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E4%B8%BB%E6%9C%BA%E7%BB%91%E5%AE%9A"></a>主机绑定</h3>
<p>(<a href="http://dubbo.io/Host+Binding-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Host+Binding-zh" title="Host Binding-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%B8%BB%E6%9C%BA%E7%BB%91%E5%AE%9A">#</a>)</p>


<p>缺省主机IP查找顺序：</p>
<ul>
	<li>通过LocalHost.getLocalHost()获取本机地址。</li>
	<li>如果是127.*等loopback地址，则扫描各网卡，获取网卡IP。</li>
</ul>


<p>注册的地址如果获取不正确，比如需要注册公网地址，可以：<br>
1. 可以在/etc/hosts中加入：机器名 公网IP，比如：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_828406" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">test1 </code><code class="java value">205.182</code><code class="java plain">.</code><code class="java value">23.201</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>2. 在dubbo.xml中加入主机地址的配置：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_250633" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">host</code><code class="xml plain">=</code><code class="xml string">"<a href="http://10.20.160.198/wiki/display/dubbo/205.182.23.201" "="">http://10.20.160.198/wiki/display/dubbo/205.182.23.201"</a></code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>3. 或在dubbo.properties中加入主机地址的配置：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_7665" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">dubbo.protocol.host=</code><code class="java value">205.182</code><code class="java plain">.</code><code class="java value">23.201</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>缺省主机端口与协议相关：</p>
<ul>
	<li>dubbo: 20880</li>
	<li>rmi: 1099</li>
	<li>http: 80</li>
	<li>hessian: 80</li>
	<li>webservice: 80</li>
	<li>memcached: 11211</li>
	<li>redis: 6379</li>
</ul>


<p>主机端口配置：</p>

<p>1. 在dubbo.xml中加入主机地址的配置：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_177171" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"20880"</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>3. 或在dubbo.properties中加入主机地址的配置：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_373601" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">dubbo.protocol.dubbo.port=</code><code class="java value">20880</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E6%97%A5%E5%BF%97%E9%80%82%E9%85%8D"></a>日志适配</h3>
<p>(<a href="http://dubbo.io/Logger+Adpater-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Logger+Adpater-zh" title="Logger Adpater-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%97%A5%E5%BF%97%E9%80%82%E9%85%8D">#</a>)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>2.2.1以上版本支持</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>扩展点：<a href="http://dubbo.io/Developer+Guide-zh.htm#DeveloperGuide-zh-%E6%97%A5%E5%BF%97%E9%80%82%E9%85%8D%E6%89%A9%E5%B1%95" tppabs="http://10.20.160.198/wiki/display/dubbo/Developer+Guide-zh#DeveloperGuide-zh-%E6%97%A5%E5%BF%97%E9%80%82%E9%85%8D%E6%89%A9%E5%B1%95">日志适配扩展</a></td></tr></tbody></table></div>

<p>缺省自动查找：</p>
<ul>
	<li>log4j</li>
	<li>slf4j</li>
	<li>jcl</li>
	<li>jdk</li>
</ul>


<p>可以通过以下方式配置日志输出策略：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_988072" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">java -Ddubbo.application.logger=log4j</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>dubbo.properties</b></div><div class="codeContent panelContent">
<div><div id="highlighter_962082" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">dubbo.application.logger=log4j</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>dubbo.xml</b></div><div class="codeContent panelContent">
<div><div id="highlighter_608656" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">&lt;dubbo:application logger=</code><code class="java string">"log4j"</code> <code class="java plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97"></a>访问日志</h3>
<p>(<a href="http://dubbo.io/Access+Log-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Access+Log-zh" title="Access Log-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>如果你想记录每一次请求信息，可开启访问日志，类似于apache的访问日志。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>此日志量比较大，请注意磁盘容量。</td></tr></tbody></table></div>

<p>将访问日志输出到当前应用的log4j日志：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_90363" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">accesslog</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>将访问日志输出到指定文件：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_404211" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">accesslog</code><code class="xml plain">=</code><code class="xml string">"<a href="http://10.20.160.198/wiki/display/dubbo/foo/bar.log" "="">http://10.20.160.198/wiki/display/dubbo/foo/bar.log"</a></code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E6%9C%8D%E5%8A%A1%E5%AE%B9%E5%99%A8"></a>服务容器</h3>
<p>(<a href="http://dubbo.io/Service+Container-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Service+Container-zh" title="Service Container-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%8D%E5%8A%A1%E5%AE%B9%E5%99%A8">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>服务容器是一个standalone的启动程序，因为后台服务不需要Tomcat或JBoss等Web容器的功能，如果硬要用Web容器去加载服务提供方，增加复杂性，也浪费资源。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>服务容器只是一个简单的Main方法，并加载一个简单的Spring容器，用于暴露服务。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>服务容器的加载内容可以扩展，内置了spring, jetty, log4j等加载，可通过Container扩展点进行扩展，参见：<a href="http://dubbo.io/Developer+Guide.htm#DeveloperGuide-Container" tppabs="http://10.20.160.198/wiki/display/dubbo/Developer+Guide#DeveloperGuide-Container">Container</a></td></tr></tbody></table></div>

<h6><a name="UserGuide-zh-SpringContainer"></a>Spring Container</h6>

<ul>
	<li>自动加载META-INF/spring目录下的所有Spring配置。</li>
	<li>配置：(配在java命令-D参数或者dubbo.properties中)
	<ul>
		<li>dubbo.spring.config=classpath*:META-INF/spring/*.xml  ----配置spring配置加载位置</li>
	</ul>
	</li>
</ul>


<h6><a name="UserGuide-zh-JettyContainer"></a>Jetty Container</h6>

<ul>
	<li>启动一个内嵌Jetty，用于汇报状态。</li>
	<li>配置：(配在java命令-D参数或者dubbo.properties中)
	<ul>
		<li>dubbo.jetty.port=8080                   ----配置jetty启动端口</li>
		<li>dubbo.jetty.directory=/foo/bar          ----配置可通过jetty直接访问的目录，用于存放静态文件</li>
		<li>dubbo.jetty.page=log,status,system      ----配置显示的页面，缺省加载所有页面</li>
	</ul>
	</li>
</ul>


<h6><a name="UserGuide-zh-Log4jContainer"></a>Log4j Container</h6>

<ul>
	<li>自动配置log4j的配置，在多进程启动时，自动给日志文件按进程分目录。</li>
	<li>配置：(配在java命令-D参数或者dubbo.properties中)
	<ul>
		<li>dubbo.log4j.file=/foo/bar.log       ----配置日志文件路径</li>
		<li>dubbo.log4j.level=WARN              ----配置日志级别</li>
		<li>dubbo.log4j.subdirectory=20880      ----配置日志子目录，用于多进程启动，避免冲突</li>
	</ul>
	</li>
</ul>


<p><b>容器启动</b></p>

<p>如：(缺省只加载spring)</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_846831" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">java com.alibaba.dubbo.container.Main</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>或：(通过main函数参数传入要加载的容器)</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_222015" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">java com.alibaba.dubbo.container.Main spring jetty log4j</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>或：(通过JVM启动参数传入要加载的容器)</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_895175" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">java com.alibaba.dubbo.container.Main -Ddubbo.container=spring,jetty,log4j</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>或：(通过classpath下的dubbo.properties配置传入要加载的容器)</p>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>dubbo.properties</b></div><div class="codeContent panelContent">
<div><div id="highlighter_14384" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">dubbo.container=spring,jetty,log4j</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-ReferenceConfig%E7%BC%93%E5%AD%98"></a>Reference Config缓存</h3>
<p>(<a href="http://dubbo.io/Reference+Config+Cache-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Reference+Config+Cache-zh" title="Reference Config Cache-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-ReferenceConfig%E7%BC%93%E5%AD%98">#</a>)</p>

<p>ReferenceConfig实例很重，封装了与注册中心的连接以及与提供者的连接，需要缓存，否则重复生成ReferenceConfig可能造成性能问题并且会有内存和连接泄漏。API方式编程时，容易忽略此问题。</p>

<p>Dubbo <font color="brown">2.4.0+</font>版本，提供了简单的工具类ReferenceConfigCache用于缓存ReferenceConfig实例。</p>

<p>使用方式如下：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_405518" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">ReferenceConfig&lt;XxxService&gt; reference = </code><code class="java keyword">new</code> <code class="java plain">ReferenceConfig&lt;XxxService&gt;();</code></div><div class="line number2 index1 alt1"><code class="java plain">reference.setInterface(XxxService.</code><code class="java keyword">class</code><code class="java plain">);</code></div><div class="line number3 index2 alt2"><code class="java plain">reference.setVersion(</code><code class="java string">"1.0.0"</code><code class="java plain">);</code></div><div class="line number4 index3 alt1"><code class="java plain">......</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java plain">ReferenceConfigCache cache = ReferenceConfigCache.getCache();</code></div><div class="line number8 index7 alt1"><code class="java plain">XxxService xxxService = cache.get(reference); </code><code class="java comments">// cache.get方法中会Cache Reference对象，并且调用ReferenceConfig.get方法启动ReferenceConfig</code></div><div class="line number9 index8 alt2"><code class="java comments">// 注意！ Cache会持有ReferenceConfig，不要在外部再调用ReferenceConfig的destroy方法，导致Cache内的ReferenceConfig失效！</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java comments">// 使用xxxService对象</code></div><div class="line number12 index11 alt1"><code class="java plain">xxxService.sayHello();</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>消除Cache中的ReferenceConfig，销毁ReferenceConfig并释放对应的资源。</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_485895" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">ReferenceConfigCache cache = ReferenceConfigCache.getCache();</code></div><div class="line number2 index1 alt1"><code class="java plain">cache.destroy(reference);</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>缺省ReferenceConfigCache把相同服务Group、接口、版本的ReferenceConfig认为是相同，缓存一份。即以服务Group、接口、版本为缓存的Key。</p>

<p>可以修改这个策略，在ReferenceConfigCache.getCache时，传一个KeyGenerator。详见ReferenceConfigCache类的方法。</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_629297" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">KeyGenerator keyGenerator = </code><code class="java keyword">new</code> <code class="java plain">...</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java plain">ReferenceConfigCache cache = ReferenceConfigCache.getCache(keyGenerator );</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1"></a>分布式事务</h3>
<p>(<a href="http://dubbo.io/Distributed+Transaction-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Distributed+Transaction-zh" title="Distributed Transaction-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>基于JTA/XA规范实现。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>暂未实现。</td></tr></tbody></table></div>

<p>两阶段提交：</p>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/jta-xa.jpg-version=1&modificationDate=1333185059000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6950008/jta-xa.jpg?version=1&amp;modificationDate=1333185059000" style="border: 0px solid black"></span></p>
<h2><a name="UserGuide-zh-API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C"></a>API参考手册</h2>
<p>(<a href="http://dubbo.io/API+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/API+Reference-zh" title="API Reference-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Dubbo的常规功能，都保持零侵入，但有些功能不得不用API侵入才能实现。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Dubbo中除这里声明以外的接口或类，都是内部接口或扩展接口，普通用户请不要直接依赖，否则升级版本可能出现不兼容。</td></tr></tbody></table></div>

<p>API汇总如下：</p>

<h3><a name="UserGuide-zh-%E9%85%8D%E7%BD%AEAPI"></a>配置API</h3>
<ul>
	<li>com.alibaba.dubbo.config.ServiceConfig</li>
	<li>com.alibaba.dubbo.config.ReferenceConfig</li>
	<li>com.alibaba.dubbo.config.ProtocolConfig</li>
	<li>com.alibaba.dubbo.config.RegistryConfig</li>
	<li>com.alibaba.dubbo.config.MonitorConfig</li>
	<li>com.alibaba.dubbo.config.ApplicationConfig</li>
	<li>com.alibaba.dubbo.config.ModuleConfig</li>
	<li>com.alibaba.dubbo.config.ProviderConfig</li>
	<li>com.alibaba.dubbo.config.ConsumerConfig</li>
	<li>com.alibaba.dubbo.config.MethodConfig</li>
	<li>com.alibaba.dubbo.config.ArgumentConfig
	<ul>
		<li>参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-API%E9%85%8D%E7%BD%AE">API配置</a></li>
	</ul>
	</li>
</ul>


<h3><a name="UserGuide-zh-%E6%B3%A8%E8%A7%A3API"></a>注解API</h3>
<ul>
	<li>com.alibaba.dubbo.config.annotation.Service</li>
	<li>com.alibaba.dubbo.config.annotation.Reference
	<ul>
		<li>参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE">注解配置</a></li>
	</ul>
	</li>
</ul>


<h3><a name="UserGuide-zh-%E6%A8%A1%E5%9E%8BAPI"></a>模型API</h3>
<ul>
	<li>com.alibaba.dubbo.common.URL</li>
	<li>com.alibaba.dubbo.rpc.RpcException</li>
</ul>


<h3><a name="UserGuide-zh-%E4%B8%8A%E4%B8%8B%E6%96%87API"></a>上下文API</h3>
<ul>
	<li>com.alibaba.dubbo.rpc.RpcContext
	<ul>
		<li>参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E4%B8%8A%E4%B8%8B%E6%96%87%E4%BF%A1%E6%81%AF">上下文信息</a> &amp; <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%AF%B9%E6%96%B9%E5%9C%B0%E5%9D%80">对方地址</a> &amp; <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%9A%90%E5%BC%8F%E4%BC%A0%E5%8F%82">隐式传参</a> &amp; <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%BC%82%E6%AD%A5%E8%B0%83%E7%94%A8">异步调用</a></li>
	</ul>
	</li>
</ul>


<h3><a name="UserGuide-zh-%E6%9C%8D%E5%8A%A1API"></a>服务API</h3>
<ul>
	<li>com.alibaba.dubbo.rpc.service.GenericService</li>
	<li>com.alibaba.dubbo.rpc.service.GenericException
	<ul>
		<li>参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%9B%E5%8C%96%E5%BC%95%E7%94%A8">泛化引用</a> &amp; <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%9B%E5%8C%96%E5%AE%9E%E7%8E%B0">泛化实现</a></li>
	</ul>
	</li>
	<li>com.alibaba.dubbo.rpc.service.EchoService
	<ul>
		<li>参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%9B%9E%E5%A3%B0%E6%B5%8B%E8%AF%95">回声测试</a></li>
	</ul>
	</li>
</ul>

<h2><a name="UserGuide-zh-%E9%85%8D%E7%BD%AE%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C"></a>配置参考手册 </h2>

<p>(<a href="http://dubbo.io/Configuration+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Configuration+Reference-zh" title="Configuration Reference-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E9%85%8D%E7%BD%AE%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C">#</a>) </p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>这里以<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Xml%E9%85%8D%E7%BD%AE">Xml配置</a>为准，列举所有配置项，其它配置方式，请参见相应转换关系：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE">属性配置</a>，<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE">注解配置</a>，<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-API%E9%85%8D%E7%BD%AE">API配置</a></td></tr></tbody></table></div>

<p><font color="red">注意：只有group，interface，version是服务的匹配条件，三者决定是不是同一个服务，其它配置项均为调优和治理参数。</font></p>

<p>所有配置项分为三大类，参见下表中的"作用"一列。</p>
<ul>
	<li>服务发现：表示该配置项用于服务的注册与发现，目的是让消费方找到提供方。</li>
	<li>服务治理：表示该配置项用于治理服务间的关系，或为开发测试提供便利条件。</li>
	<li>性能调优：表示该配置项用于调优性能，不同的选项对性能会产生影响。</li>
</ul>


<p>所有配置最终都将转换为URL表示，并由服务提供方生成，经注册中心传递给消费方，各属性对应URL的参数，参见配置项一览表中的"对应URL参数"列。<br>
URL格式：</p>
<div class="panel" style="border-width: 1px;"><div class="panelContent">
<p>protocol://username:password@host:port/path?key=value&amp;key=value</p>
</div></div>

<p>Schema: <a href="javascript:if(confirm(%27http://code.alibabatech.com/schema/dubbo/dubbo.xsd  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://code.alibabatech.com/schema/dubbo/dubbo.xsd%27" tppabs="http://code.alibabatech.com/schema/dubbo/dubbo.xsd" class="external-link" rel="nofollow">http://code.alibabatech.com/schema/dubbo/dubbo.xsd</a></p>

<h3><a name="UserGuide-zh-%3Cdubbo%3Aservice%2F%3E"></a>&lt;dubbo:service/&gt;</h3>

<p>(<a href="http://dubbo.io/Service+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Service+Config-zh" title="Service Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aservice%252F%253E">#</a>)</p>

<p>服务提供者暴露服务配置：<br>
配置类：com.alibaba.dubbo.config.ServiceConfig</p>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> 标签 </th>
<th class="confluenceTh"> 属性 </th>
<th class="confluenceTh"> 对应URL参数 </th>
<th class="confluenceTh"> 类型 </th>
<th class="confluenceTh"> 是否必填 </th>
<th class="confluenceTh"> 缺省值 </th>
<th class="confluenceTh"> 作用 </th>
<th class="confluenceTh"> 描述 </th>
<th class="confluenceTh"> 兼容性 </th>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> interface </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> class </td>
<td class="confluenceTd"> <b>必填</b> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 服务接口名 </td>
<td class="confluenceTd"> 1.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> ref </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> object </td>
<td class="confluenceTd"> <b>必填</b> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 服务对象实现引用 </td>
<td class="confluenceTd"> 1.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> version </td>
<td class="confluenceTd"> version </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0.0.0 </td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 服务版本，建议使用两位数字版本，如：1.0，通常在接口不兼容时版本号才需要升级 </td>
<td class="confluenceTd"> 1.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> group </td>
<td class="confluenceTd"> group </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 服务分组，当一个接口有多个实现，可以用分组区分 </td>
<td class="confluenceTd"> 1.0.7以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> path </td>
<td class="confluenceTd"> &lt;path&gt; </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省为接口名 </td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 服务路径 (注意：1.0不支持自定义路径，总是使用接口名，如果有1.0调2.0，配置服务路径可能不兼容) </td>
<td class="confluenceTd"> 1.0.12以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> delay </td>
<td class="confluenceTd"> delay </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 延迟注册服务时间(毫秒) ，设为-1时，表示延迟到Spring容器初始化完成时暴露服务 </td>
<td class="confluenceTd"> 1.0.14以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> timeout </td>
<td class="confluenceTd"> timeout </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 1000 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 远程服务调用超时时间(毫秒) </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> retries </td>
<td class="confluenceTd"> retries </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 2 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 远程服务调用重试次数，不包括第一次调用，不需要重试请设为0 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> connections </td>
<td class="confluenceTd"> connections </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 100 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 对每个提供者的最大连接数，rmi、http、hessian等短连接协议表示限制连接数，dubbo等长连接协表示建立的长连接个数 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> loadbalance </td>
<td class="confluenceTd"> loadbalance </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> random </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 负载均衡策略，可选值：random,roundrobin,leastactive，分别表示：随机，轮循，最少活跃调用 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> async </td>
<td class="confluenceTd"> async </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 是否缺省异步执行，不可靠异步，只是忽略返回值，不阻塞执行线程 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> stub </td>
<td class="confluenceTd"> stub </td>
<td class="confluenceTd"> class/boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 设为true，表示使用缺省代理类名，即：接口名 + Local后缀，服务接口客户端本地代理类名，用于在客户端执行本地逻辑，如本地缓存等，该本地代理类的构造函数必须允许传入远程代理对象，构造函数如：public XxxServiceLocal(XxxService xxxService) </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> mock </td>
<td class="confluenceTd"> mock </td>
<td class="confluenceTd"> class/boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 设为true，表示使用缺省Mock类名，即：接口名 + Mock后缀，服务接口调用失败Mock实现类，该Mock类必须有一个无参构造函数，与Local的区别在于，Local总是被执行，而Mock只在出现非业务异常(比如超时，网络异常等)时执行，Local在远程调用之前执行，Mock在远程调用后执行。 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> token </td>
<td class="confluenceTd"> token </td>
<td class="confluenceTd"> string/boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 令牌验证，为空表示不开启，如果为true，表示随机生成动态令牌，否则使用静态令牌，令牌的作用是防止消费者绕过注册中心直接访问，保证注册中心的授权功能有效，如果使用点对点调用，需关闭令牌功能 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> registry </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省向所有registry注册 </td>
<td class="confluenceTd"> 配置关联 </td>
<td class="confluenceTd"> 向指定注册中心注册，在多个注册中心时使用，值为&lt;dubbo:registry&gt;的id属性，多个注册中心ID用逗号分隔，如果不想将该服务注册到任何registry，可将值设为N/A </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> provider </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺使用第一个provider配置 </td>
<td class="confluenceTd"> 配置关联 </td>
<td class="confluenceTd"> 指定provider，值为&lt;dubbo:provider&gt;的id属性 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> deprecated </td>
<td class="confluenceTd"> deprecated </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务是否过时，如果设为true，消费方引用时将打印服务过时警告error日志 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> dynamic </td>
<td class="confluenceTd"> dynamic </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> true </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务是否动态注册，如果设为false，注册后将显示后disable状态，需人工启用，并且服务提供者停止时，也不会自动取消册，需人工禁用。 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> accesslog </td>
<td class="confluenceTd"> accesslog </td>
<td class="confluenceTd"> string/boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 设为true，将向logger中输出访问日志，也可填写访问日志文件路径，直接把访问日志输出到指定文件 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> owner </td>
<td class="confluenceTd"> owner </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务负责人，用于服务治理，请填写负责人公司邮箱前缀 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> document </td>
<td class="confluenceTd"> document </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务文档URL </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> weight </td>
<td class="confluenceTd"> weight </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务权重 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> executes </td>
<td class="confluenceTd"> executes </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务提供者每服务每方法最大可并行执行请求数 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> actives </td>
<td class="confluenceTd"> actives </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 每服务消费者每服务每方法最大并发调用数 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> proxy </td>
<td class="confluenceTd"> proxy </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> javassist </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 生成动态代理方式，可选：jdk/javassist </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> cluster </td>
<td class="confluenceTd"> cluster </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> failover </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 集群方式，可选：failover/failfast/failsafe/failback/forking </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> filter </td>
<td class="confluenceTd"> service.filter </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> default </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务提供方远程调用过程拦截器名称，多个名称用逗号分隔 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> listener </td>
<td class="confluenceTd"> exporter.listener </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> default </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务提供方导出服务监听器名称，多个名称用逗号分隔 </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> protocol </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 配置关联 </td>
<td class="confluenceTd"> 使用指定的协议暴露服务，在多协议时使用，值为&lt;dubbo:protocol&gt;的id属性，多个协议ID用逗号分隔 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> layer </td>
<td class="confluenceTd"> layer </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务提供者所在的分层。如：biz、dao、intl:web、china:acton。 </td>
<td class="confluenceTd"> 2.0.7以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> register </td>
<td class="confluenceTd"> register </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> true </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 该协议的服务是否注册到注册中心 </td>
<td class="confluenceTd"> 2.0.8以上版本 </td>
</tr>
</tbody></table>
</div>

<h3><a name="UserGuide-zh-%3Cdubbo%3Areference%2F%3E"></a>&lt;dubbo:reference/&gt;</h3>
<p>(<a href="http://dubbo.io/Reference+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Reference+Config-zh" title="Reference Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Areference%252F%253E">#</a>)</p>

<p>服务消费者引用服务配置：<br>
配置类：com.alibaba.dubbo.config.ReferenceConfig</p>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> 标签 </th>
<th class="confluenceTh"> 属性 </th>
<th class="confluenceTh"> 对应URL参数 </th>
<th class="confluenceTh"> 类型 </th>
<th class="confluenceTh"> 是否必填 </th>
<th class="confluenceTh"> 缺省值 </th>
<th class="confluenceTh"> 作用 </th>
<th class="confluenceTh"> 描述 </th>
<th class="confluenceTh"> 兼容性 </th>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> id </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> <b>必填</b> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 配置关联 </td>
<td class="confluenceTd"> 服务引用BeanId </td>
<td class="confluenceTd"> 1.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> interface </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> class </td>
<td class="confluenceTd"> <b>必填</b> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 服务接口名 </td>
<td class="confluenceTd"> 1.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> version </td>
<td class="confluenceTd"> version </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 服务版本，与服务提供者的版本一致 </td>
<td class="confluenceTd"> 1.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> group </td>
<td class="confluenceTd"> group </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 服务分组，当一个接口有多个实现，可以用分组区分，必需和服务提供方一致 </td>
<td class="confluenceTd"> 1.0.7以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> timeout </td>
<td class="confluenceTd"> timeout </td>
<td class="confluenceTd"> long </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省使用&lt;dubbo:consumer&gt;的timeout </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务方法调用超时时间(毫秒) </td>
<td class="confluenceTd"> 1.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> retries </td>
<td class="confluenceTd"> retries </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省使用&lt;dubbo:consumer&gt;的retries </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 远程服务调用重试次数，不包括第一次调用，不需要重试请设为0 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> connections </td>
<td class="confluenceTd"> connections </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省使用&lt;dubbo:consumer&gt;的connections </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 对每个提供者的最大连接数，rmi、http、hessian等短连接协议表示限制连接数，dubbo等长连接协表示建立的长连接个数 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> loadbalance </td>
<td class="confluenceTd"> loadbalance </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省使用&lt;dubbo:consumer&gt;的loadbalance </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 负载均衡策略，可选值：random,roundrobin,leastactive，分别表示：随机，轮循，最少活跃调用 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> async </td>
<td class="confluenceTd"> async </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省使用&lt;dubbo:consumer&gt;的async </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 是否异步执行，不可靠异步，只是忽略返回值，不阻塞执行线程 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> generic </td>
<td class="confluenceTd"> generic </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省使用&lt;dubbo:consumer&gt;的generic </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 是否缺省泛化接口，如果为泛化接口，将返回GenericService </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> check </td>
<td class="confluenceTd"> check </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省使用&lt;dubbo:consumer&gt;的check </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 启动时检查提供者是否存在，true报错，false忽略 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> url </td>
<td class="confluenceTd"> &lt;url&gt; </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 点对点直连服务提供者地址，<font color="red">将绕过注册中心</font> </td>
<td class="confluenceTd"> 1.0.6以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> stub </td>
<td class="confluenceTd"> stub </td>
<td class="confluenceTd"> class/boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务接口客户端本地代理类名，用于在客户端执行本地逻辑，如本地缓存等，该本地代理类的构造函数必须允许传入远程代理对象，构造函数如：public XxxServiceLocal(XxxService xxxService) </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> mock </td>
<td class="confluenceTd"> mock </td>
<td class="confluenceTd"> class/boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务接口调用失败Mock实现类名，该Mock类必须有一个无参构造函数，与Local的区别在于，Local总是被执行，而Mock只在出现非业务异常(比如超时，网络异常等)时执行，Local在远程调用之前执行，Mock在远程调用后执行。 </td>
<td class="confluenceTd"> Dubbo1.0.13及其以上版本支持 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> cache </td>
<td class="confluenceTd"> cache </td>
<td class="confluenceTd"> string/boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 以调用参数为key，缓存返回结果，可选：lru, threadlocal, jcache等 </td>
<td class="confluenceTd"> Dubbo2.1.0及其以上版本支持 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> validation </td>
<td class="confluenceTd"> validation </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 是否启用JSR303标准注解验证，如果启用，将对方法参数上的注解进行校验 </td>
<td class="confluenceTd"> Dubbo2.1.0及其以上版本支持 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> proxy </td>
<td class="confluenceTd"> proxy </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> javassist </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 选择动态代理实现策略，可选：javassist, jdk </td>
<td class="confluenceTd"> 2.0.2以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> client </td>
<td class="confluenceTd"> client </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 客户端传输类型设置，如Dubbo协议的netty或mina。 </td>
<td class="confluenceTd"> Dubbo2.0.0以上版本支持 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> registry </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省将从所有注册中心获服务列表后合并结果 </td>
<td class="confluenceTd"> 配置关联 </td>
<td class="confluenceTd"> 从指定注册中心注册获取服务列表，在多个注册中心时使用，值为&lt;dubbo:registry&gt;的id属性，多个注册中心ID用逗号分隔 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> owner </td>
<td class="confluenceTd"> owner </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 调用服务负责人，用于服务治理，请填写负责人公司邮箱前缀 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> actives </td>
<td class="confluenceTd"> actives </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 每服务消费者每服务每方法最大并发调用数 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> cluster </td>
<td class="confluenceTd"> cluster </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> failover </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 集群方式，可选：failover/failfast/failsafe/failback/forking </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> filter </td>
<td class="confluenceTd"> reference.filter </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> default </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务消费方远程调用过程拦截器名称，多个名称用逗号分隔 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> listener </td>
<td class="confluenceTd"> invoker.listener </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> default </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务消费方引用服务监听器名称，多个名称用逗号分隔 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> layer </td>
<td class="confluenceTd"> layer </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务调用者所在的分层。如：biz、dao、intl:web、china:acton。 </td>
<td class="confluenceTd"> 2.0.7以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> init </td>
<td class="confluenceTd"> init </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 是否在afterPropertiesSet()时饥饿初始化引用，否则等到有人注入或引用该实例时再初始化。 </td>
<td class="confluenceTd"> 2.0.10以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:reference&gt; </td>
<td class="confluenceTd"> protocol </td>
<td class="confluenceTd"> protocol </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服力治理 </td>
<td class="confluenceTd"> 只调用指定协议的服务提供方，其它协议忽略。 </td>
<td class="confluenceTd"> 2.2.0以上版本 </td>
</tr>
</tbody></table>
</div>

<h3><a name="UserGuide-zh-%3Cdubbo%3Aprotocol%2F%3E"></a>&lt;dubbo:protocol/&gt;</h3>

<p>(<a href="http://dubbo.io/Protocol+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Protocol+Config-zh" title="Protocol Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aprotocol%252F%253E">#</a>)</p>

<p>服务提供者协议配置：<br>
配置类：com.alibaba.dubbo.config.ProtocolConfig<br>
说明：如果需要支持多协议，可以声明多个&lt;dubbo:protocol&gt;标签，并在&lt;dubbo:service&gt;中通过protocol属性指定使用的协议。</p>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> 标签 </th>
<th class="confluenceTh"> 属性 </th>
<th class="confluenceTh"> 对应URL参数 </th>
<th class="confluenceTh"> 类型 </th>
<th class="confluenceTh"> 是否必填 </th>
<th class="confluenceTh"> 缺省值 </th>
<th class="confluenceTh"> 作用 </th>
<th class="confluenceTh"> 描述 </th>
<th class="confluenceTh"> 兼容性 </th>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> id </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo </td>
<td class="confluenceTd"> 配置关联 </td>
<td class="confluenceTd"> 协议BeanId，可以在&lt;dubbo:service protocol=""&gt;中引用此ID，如果ID不填，缺省和name属性值一样，重复则在name后加序号。 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> name </td>
<td class="confluenceTd"> &lt;protocol&gt; </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> <b>必填</b> </td>
<td class="confluenceTd"> dubbo </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 协议名称 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> port </td>
<td class="confluenceTd"> &lt;port&gt; </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo协议缺省端口为20880，rmi协议缺省端口为1099，http和hessian协议缺省端口为80 <br class="atl-forced-newline">
 如果配置为<b>-1</b> 或者 <b>没有</b>配置port，则会分配一个没有被占用的端口。Dubbo <font color="brown">2.4.0+</font>，分配的端口在协议缺省端口的基础上增长，确保端口段可控。 </td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 服务端口 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> host </td>
<td class="confluenceTd"> &lt;host&gt; </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 自动查找本机IP </td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> -服务主机名，多网卡选择或指定VIP及域名时使用，为空则自动查找本机IP，-<font color="red">建议不要配置，让Dubbo自动获取本机IP</font> </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> threadpool </td>
<td class="confluenceTd"> threadpool </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> fixed </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 线程池类型，可选：fixed/cached </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> threads </td>
<td class="confluenceTd"> threads </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 100 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务线程池大小(固定大小) </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> iothreads </td>
<td class="confluenceTd"> threads </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> cpu个数+1 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> io线程池大小(固定大小) </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> accepts </td>
<td class="confluenceTd"> accepts </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务提供方最大可接受连接数 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> payload </td>
<td class="confluenceTd"> payload </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 88388608(=8M) </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 请求及响应数据包大小限制，单位：字节 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> codec </td>
<td class="confluenceTd"> codec </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 协议编码方式 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> serialization </td>
<td class="confluenceTd"> serialization </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo协议缺省为hessian2，rmi协议缺省为java，http协议缺省为json </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 协议序列化方式，当协议支持多种序列化方式时使用，比如：dubbo协议的dubbo,hessian2,java,compactedjava，以及http协议的json等 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> accesslog </td>
<td class="confluenceTd"> accesslog </td>
<td class="confluenceTd"> string/boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 设为true，将向logger中输出访问日志，也可填写访问日志文件路径，直接把访问日志输出到指定文件 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> path </td>
<td class="confluenceTd"> &lt;path&gt; </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 提供者上下文路径，为服务path的前缀 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> transporter </td>
<td class="confluenceTd"> transporter </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo协议缺省为netty </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 协议的服务端和客户端实现类型，比如：dubbo协议的mina,netty等，可以分拆为server和client配置 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> server </td>
<td class="confluenceTd"> server </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo协议缺省为netty，http协议缺省为servlet </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 协议的服务器端实现类型，比如：dubbo协议的mina,netty等，http协议的jetty,servlet等 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> client </td>
<td class="confluenceTd"> client </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo协议缺省为netty </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 协议的客户端实现类型，比如：dubbo协议的mina,netty等 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> dispatcher </td>
<td class="confluenceTd"> dispatcher </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo协议缺省为all </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 协议的消息派发方式，用于指定线程模型，比如：dubbo协议的all, direct, message, execution, connection等 </td>
<td class="confluenceTd"> 2.1.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> queues </td>
<td class="confluenceTd"> queues </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 线程池队列大小，当线程池满时，排队等待执行的队列大小，建议不要设置，当线程程池时应立即失败，重试其它服务提供机器，而不是排队，除非有特殊需求。 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> charset </td>
<td class="confluenceTd"> charset </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> UTF-8 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 序列化编码 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> buffer </td>
<td class="confluenceTd"> buffer </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 8192 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 网络读写缓冲区大小 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> heartbeat </td>
<td class="confluenceTd"> heartbeat </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 心跳间隔，对于长连接，当物理层断开时，比如拔网线，TCP的FIN消息来不及发送，对方收不到断开事件，此时需要心跳来帮助检查连接是否已断开 </td>
<td class="confluenceTd"> 2.0.10以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> telnet </td>
<td class="confluenceTd"> telnet </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 所支持的telnet命令，多个命令用逗号分隔 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> register </td>
<td class="confluenceTd"> register </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> true </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 该协议的服务是否注册到注册中心 </td>
<td class="confluenceTd"> 2.0.8以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:protocol&gt; </td>
<td class="confluenceTd"> contextpath </td>
<td class="confluenceTd"> contextpath </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省为空串 </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 2.0.6以上版本 </td>
</tr>
</tbody></table>
</div>

<h3><a name="UserGuide-zh-%3Cdubbo%3Aregistry%2F%3E"></a>&lt;dubbo:registry/&gt;</h3>
<p>(<a href="http://dubbo.io/Registry+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Registry+Config-zh" title="Registry Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aregistry%252F%253E">#</a>)</p>

<p>注册中心配置：<br>
配置类：com.alibaba.dubbo.config.RegistryConfig<br>
说明：如果有多个不同的注册中心，可以声明多个&lt;dubbo:registry&gt;标签，并在&lt;dubbo:service&gt;或&lt;dubbo:reference&gt;的registry属性指定使用的注册中心。</p>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> 标签 </th>
<th class="confluenceTh"> 属性 </th>
<th class="confluenceTh"> 对应URL参数 </th>
<th class="confluenceTh"> 类型 </th>
<th class="confluenceTh"> 是否必填 </th>
<th class="confluenceTh"> 缺省值 </th>
<th class="confluenceTh"> 作用 </th>
<th class="confluenceTh"> 描述 </th>
<th class="confluenceTh"> 兼容性 </th>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> id </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 配置关联 </td>
<td class="confluenceTd"> 注册中心引用BeanId，可以在&lt;dubbo:service registry=""&gt;或&lt;dubbo:reference registry=""&gt;中引用此ID </td>
<td class="confluenceTd"> 1.0.16以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> address </td>
<td class="confluenceTd"> &lt;host:port&gt; </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> <b>必填</b> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 注册中心服务器地址，如果地址没有端口缺省为9090，同一集群内的多个地址用逗号分隔，如：ip:port,ip:port，不同集群的注册中心，请配置多个&lt;dubbo:registry&gt;标签 </td>
<td class="confluenceTd"> 1.0.16以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> protocol </td>
<td class="confluenceTd"> &lt;protocol&gt; </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo </td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 注同中心地址协议，支持dubbo, http, local三种协议，分别表示，dubbo地址，http地址，本地注册中心 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> port </td>
<td class="confluenceTd"> &lt;port&gt; </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 9090 </td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 注册中心缺省端口，当address没有带端口时使用此端口做为缺省值 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> username </td>
<td class="confluenceTd"> &lt;username&gt; </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 登录注册中心用户名，如果注册中心不需要验证可不填 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> password </td>
<td class="confluenceTd"> &lt;password&gt; </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 登录注册中心密码，如果注册中心不需要验证可不填 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> transport </td>
<td class="confluenceTd"> registry.transporter </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> netty </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 网络传输方式，可选mina,netty </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> timeout </td>
<td class="confluenceTd"> registry.timeout </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 5000 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 注册中心请求超时时间(毫秒) </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> session </td>
<td class="confluenceTd"> registry.session </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 60000 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 注册中心会话超时时间(毫秒)，用于检测提供者非正常断线后的脏数据，比如用心跳检测的实现，此时间就是心跳间隔，不同注册中心实现不一样。 </td>
<td class="confluenceTd"> 2.1.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> file </td>
<td class="confluenceTd"> registry.file </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 使用文件缓存注册中心地址列表及服务提供者列表，应用重启时将基于此文件恢复，<font color="#ff0000">注意：两个注册中心不能使用同一文件存储</font> </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> wait </td>
<td class="confluenceTd"> registry.wait </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 停止时等待通知完成时间(毫秒) </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> check </td>
<td class="confluenceTd"> check </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> true </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 注册中心不存在时，是否报错 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> register </td>
<td class="confluenceTd"> register </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> true </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 是否向此注册中心注册服务，如果设为false，将只订阅，不注册 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> subscribe </td>
<td class="confluenceTd"> subscribe </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> true </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 是否向此注册中心订阅服务，如果设为false，将只注册，不订阅 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:registry&gt; </td>
<td class="confluenceTd"> dynamic </td>
<td class="confluenceTd"> dynamic </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> true </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务是否动态注册，如果设为false，注册后将显示后disable状态，需人工启用，并且服务提供者停止时，也不会自动取消册，需人工禁用。 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
</tbody></table>
</div>

<h3><a name="UserGuide-zh-%3Cdubbo%3Amonitor%2F%3E"></a>&lt;dubbo:monitor/&gt;</h3>
<p>(<a href="http://dubbo.io/Monitor+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Monitor+Config-zh" title="Monitor Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Amonitor%252F%253E">#</a>)</p>

<p>监控中心配置：<br>
配置类：com.alibaba.dubbo.config.MonitorConfig</p>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> 标签 </th>
<th class="confluenceTh"> 属性 </th>
<th class="confluenceTh"> 对应URL参数 </th>
<th class="confluenceTh"> 类型 </th>
<th class="confluenceTh"> 是否必填 </th>
<th class="confluenceTh"> 缺省值 </th>
<th class="confluenceTh"> 作用 </th>
<th class="confluenceTh"> 描述 </th>
<th class="confluenceTh"> 兼容性 </th>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:monitor&gt; </td>
<td class="confluenceTd"> protocol </td>
<td class="confluenceTd"> protocol </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 监控中心协议，如果为protocol="registry"，表示从注册中心发现监控中心地址，否则直连监控中心。 </td>
<td class="confluenceTd"> 2.0.9以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:monitor&gt; </td>
<td class="confluenceTd"> address </td>
<td class="confluenceTd"> &lt;url&gt; </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> N/A </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 直连监控中心服务器地址，address="10.20.130.230:12080" </td>
<td class="confluenceTd"> 1.0.16以上版本 </td>
</tr>
</tbody></table>
</div>

<h3><a name="UserGuide-zh-%3Cdubbo%3Aapplication%2F%3E"></a>&lt;dubbo:application/&gt;</h3>
<p>(<a href="http://dubbo.io/Application+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Application+Config-zh" title="Application Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aapplication%252F%253E">#</a>)</p>

<p>应用信息配置：<br>
配置类：com.alibaba.dubbo.config.ApplicationConfig</p>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> 标签 </th>
<th class="confluenceTh"> 属性 </th>
<th class="confluenceTh"> 对应URL参数 </th>
<th class="confluenceTh"> 类型 </th>
<th class="confluenceTh"> 是否必填 </th>
<th class="confluenceTh"> 缺省值 </th>
<th class="confluenceTh"> 作用 </th>
<th class="confluenceTh"> 描述 </th>
<th class="confluenceTh"> 兼容性 </th>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:application&gt; </td>
<td class="confluenceTd"> name </td>
<td class="confluenceTd"> application </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> <b>必填</b> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 当前应用名称，用于注册中心计算应用间依赖关系，<font color="red">注意：消费者和提供者应用名不要一样，此参数不是匹配条件</font>，你当前项目叫什么名字就填什么，和提供者消费者角色无关，比如：kylin应用调用了morgan应用的服务，则kylin项目配成kylin，morgan项目配成morgan，可能kylin也提供其它服务给别人使用，但kylin项目永远配成kylin，这样注册中心将显示kylin依赖于morgan </td>
<td class="confluenceTd"> 1.0.16以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:application&gt; </td>
<td class="confluenceTd"> version </td>
<td class="confluenceTd"> application.version </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 当前应用的版本 </td>
<td class="confluenceTd"> 2.2.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:application&gt; </td>
<td class="confluenceTd"> owner </td>
<td class="confluenceTd"> owner </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 应用负责人，用于服务治理，请填写负责人公司邮箱前缀 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:application&gt; </td>
<td class="confluenceTd"> organization </td>
<td class="confluenceTd"> organization </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 组织名称(BU或部门)，用于注册中心区分服务来源，<font color="#009900">此配置项建议不要使用autoconfig，直接写死在配置中，比如china,intl,itu,crm,asc,dw,aliexpress等</font> </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:application&gt; </td>
<td class="confluenceTd"> architecture <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> architecture <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 用于服务分层对应的架构。如，intl、china。不同的架构使用不同的分层。 </td>
<td class="confluenceTd"> 2.0.7以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:application&gt; </td>
<td class="confluenceTd"> environment </td>
<td class="confluenceTd"> environment </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 应用环境，如：develop/test/product，不同环境使用不同的缺省值，以及作为只用于开发测试功能的限制条件 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:application&gt; </td>
<td class="confluenceTd"> compiler </td>
<td class="confluenceTd"> compiler </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> javassist </td>
<td class="confluenceTd"> 性能优化 </td>
<td class="confluenceTd"> Java字节码编译器，用于动态类的生成，可选：jdk或javassist </td>
<td class="confluenceTd"> 2.1.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:application&gt; </td>
<td class="confluenceTd"> logger </td>
<td class="confluenceTd"> logger </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> slf4j </td>
<td class="confluenceTd"> 性能优化 </td>
<td class="confluenceTd"> 日志输出方式，可选：slf4j,jcl,log4j,jdk </td>
<td class="confluenceTd"> 2.2.0以上版本 </td>
</tr>
</tbody></table>
</div>

<h3><a name="UserGuide-zh-%3Cdubbo%3Amodule%2F%3E"></a>&lt;dubbo:module/&gt;</h3>
<p>(<a href="http://dubbo.io/Module+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Module+Config-zh" title="Module Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Amodule%252F%253E">#</a>)</p>

<p>模块信息配置：<br>
配置类：com.alibaba.dubbo.config.ModuleConfig</p>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> 标签 </th>
<th class="confluenceTh"> 属性 </th>
<th class="confluenceTh"> 对应URL参数 </th>
<th class="confluenceTh"> 类型 </th>
<th class="confluenceTh"> 是否必填 </th>
<th class="confluenceTh"> 缺省值 </th>
<th class="confluenceTh"> 作用 </th>
<th class="confluenceTh"> 描述 </th>
<th class="confluenceTh"> 兼容性 </th>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:module&gt; </td>
<td class="confluenceTd"> name </td>
<td class="confluenceTd"> module </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> <b>必填</b> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 当前模块名称，用于注册中心计算模块间依赖关系 </td>
<td class="confluenceTd"> 2.2.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:module&gt; </td>
<td class="confluenceTd"> version </td>
<td class="confluenceTd"> module.version </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 当前模块的版本 </td>
<td class="confluenceTd"> 2.2.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:module&gt; </td>
<td class="confluenceTd"> owner </td>
<td class="confluenceTd"> owner </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 模块负责人，用于服务治理，请填写负责人公司邮箱前缀 </td>
<td class="confluenceTd"> 2.2.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:module&gt; </td>
<td class="confluenceTd"> organization </td>
<td class="confluenceTd"> organization </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 组织名称(BU或部门)，用于注册中心区分服务来源，<font color="#009900">此配置项建议不要使用autoconfig，直接写死在配置中，比如china,intl,itu,crm,asc,dw,aliexpress等</font> </td>
<td class="confluenceTd"> 2.2.0以上版本 </td>
</tr>
</tbody></table>
</div>

<h3><a name="UserGuide-zh-%3Cdubbo%3Aprovider%2F%3E"></a>&lt;dubbo:provider/&gt;</h3>
<p>(<a href="http://dubbo.io/Provider+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Provider+Config-zh" title="Provider Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aprovider%252F%253E">#</a>)</p>

<p>服务提供者缺省值配置：<br>
配置类：com.alibaba.dubbo.config.ProviderConfig<br>
说明：该标签为&lt;dubbo:service&gt;和&lt;dubbo:protocol&gt;标签的缺省值设置。</p>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> 标签 </th>
<th class="confluenceTh"> 属性 </th>
<th class="confluenceTh"> 对应URL参数 </th>
<th class="confluenceTh"> 类型 </th>
<th class="confluenceTh"> 是否必填 </th>
<th class="confluenceTh"> 缺省值 </th>
<th class="confluenceTh"> 作用 </th>
<th class="confluenceTh"> 描述 </th>
<th class="confluenceTh"> 兼容性 </th>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> id </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo </td>
<td class="confluenceTd"> 配置关联 </td>
<td class="confluenceTd"> 协议BeanId，可以在&lt;dubbo:service proivder=""&gt;中引用此ID </td>
<td class="confluenceTd"> 1.0.16以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> protocol </td>
<td class="confluenceTd"> &lt;protocol&gt; </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 协议名称 </td>
<td class="confluenceTd"> 1.0.16以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> host </td>
<td class="confluenceTd"> &lt;host&gt; </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 自动查找本机IP </td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 服务主机名，多网卡选择或指定VIP及域名时使用，为空则自动查找本机IP，<font color="red">建议不要配置，让Dubbo自动获取本机IP</font> </td>
<td class="confluenceTd"> 1.0.16以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> threads </td>
<td class="confluenceTd"> threads </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 100 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务线程池大小(固定大小) </td>
<td class="confluenceTd"> 1.0.16以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> payload </td>
<td class="confluenceTd"> payload </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 88388608(=8M) </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 请求及响应数据包大小限制，单位：字节 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> path </td>
<td class="confluenceTd"> &lt;path&gt; </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 提供者上下文路径，为服务path的前缀 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> server </td>
<td class="confluenceTd"> server </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo协议缺省为netty，http协议缺省为servlet </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 协议的服务器端实现类型，比如：dubbo协议的mina,netty等，http协议的jetty,servlet等 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> client </td>
<td class="confluenceTd"> client </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo协议缺省为netty </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 协议的客户端实现类型，比如：dubbo协议的mina,netty等 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> codec </td>
<td class="confluenceTd"> codec </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 协议编码方式 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> serialization </td>
<td class="confluenceTd"> serialization </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> dubbo协议缺省为hessian2，rmi协议缺省为java，http协议缺省为json </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 协议序列化方式，当协议支持多种序列化方式时使用，比如：dubbo协议的dubbo,hessian2,java,compactedjava，以及http协议的json,xml等 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> default </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 配置关联 </td>
<td class="confluenceTd"> 是否为缺省协议，用于多协议 </td>
<td class="confluenceTd"> 1.0.16以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> filter </td>
<td class="confluenceTd"> service.filter </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务提供方远程调用过程拦截器名称，多个名称用逗号分隔 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> listener </td>
<td class="confluenceTd"> exporter.listener </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务提供方导出服务监听器名称，多个名称用逗号分隔 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> threadpool </td>
<td class="confluenceTd"> threadpool </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> fixed </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 线程池类型，可选：fixed/cached </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> accepts </td>
<td class="confluenceTd"> accepts </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务提供者最大可接受连接数 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> version </td>
<td class="confluenceTd"> version </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0.0.0 </td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 服务版本，建议使用两位数字版本，如：1.0，通常在接口不兼容时版本号才需要升级 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> group </td>
<td class="confluenceTd"> group </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> &nbsp; </td>
<td class="confluenceTd"> 服务发现 </td>
<td class="confluenceTd"> 服务分组，当一个接口有多个实现，可以用分组区分 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> delay </td>
<td class="confluenceTd"> delay </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 延迟注册服务时间(毫秒)- ，设为-1时，表示延迟到Spring容器初始化完成时暴露服务 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> timeout </td>
<td class="confluenceTd"> default.timeout </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 1000 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 远程服务调用超时时间(毫秒) </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> retries </td>
<td class="confluenceTd"> default.retries </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 2 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 远程服务调用重试次数，不包括第一次调用，不需要重试请设为0 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> connections </td>
<td class="confluenceTd"> default.connections </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 对每个提供者的最大连接数，rmi、http、hessian等短连接协议表示限制连接数，dubbo等长连接协表示建立的长连接个数 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> loadbalance </td>
<td class="confluenceTd"> default.loadbalance </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> random </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 负载均衡策略，可选值：random,roundrobin,leastactive，分别表示：随机，轮循，最少活跃调用 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> async </td>
<td class="confluenceTd"> default.async </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 是否缺省异步执行，不可靠异步，只是忽略返回值，不阻塞执行线程 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> stub </td>
<td class="confluenceTd"> stub </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 设为true，表示使用缺省代理类名，即：接口名 + Local后缀。 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> mock </td>
<td class="confluenceTd"> mock </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 设为true，表示使用缺省Mock类名，即：接口名 + Mock后缀。 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> token </td>
<td class="confluenceTd"> token </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 令牌验证，为空表示不开启，如果为true，表示随机生成动态令牌 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> registry </td>
<td class="confluenceTd"> registry </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省向所有registry注册 </td>
<td class="confluenceTd"> 配置关联 </td>
<td class="confluenceTd"> 向指定注册中心注册，在多个注册中心时使用，值为&lt;dubbo:registry&gt;的id属性，多个注册中心ID用逗号分隔，如果不想将该服务注册到任何registry，可将值设为N/A </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> dynamic </td>
<td class="confluenceTd"> dynamic </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> true </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务是否动态注册，如果设为false，注册后将显示后disable状态，需人工启用，并且服务提供者停止时，也不会自动取消册，需人工禁用。 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> accesslog </td>
<td class="confluenceTd"> accesslog </td>
<td class="confluenceTd"> string/boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 设为true，将向logger中输出访问日志，也可填写访问日志文件路径，直接把访问日志输出到指定文件 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> owner </td>
<td class="confluenceTd"> owner </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务负责人，用于服务治理，请填写负责人公司邮箱前缀 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> document </td>
<td class="confluenceTd"> document </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务文档URL </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> weight </td>
<td class="confluenceTd"> weight </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务权重 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> executes </td>
<td class="confluenceTd"> executes </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务提供者每服务每方法最大可并行执行请求数 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> actives </td>
<td class="confluenceTd"> default.actives </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 每服务消费者每服务每方法最大并发调用数 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> proxy </td>
<td class="confluenceTd"> proxy </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> javassist </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 生成动态代理方式，可选：jdk/javassist </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> cluster </td>
<td class="confluenceTd"> default.cluster </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> failover </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 集群方式，可选：failover/failfast/failsafe/failback/forking </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> deprecated </td>
<td class="confluenceTd"> deprecated </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务是否过时，如果设为true，消费方引用时将打印服务过时警告error日志 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> queues </td>
<td class="confluenceTd"> queues </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 线程池队列大小，当线程池满时，排队等待执行的队列大小，建议不要设置，当线程程池时应立即失败，重试其它服务提供机器，而不是排队，除非有特殊需求。 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> charset </td>
<td class="confluenceTd"> charset </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> UTF-8 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 序列化编码 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> buffer </td>
<td class="confluenceTd"> buffer </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 8192 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 网络读写缓冲区大小 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> iothreads </td>
<td class="confluenceTd"> iothreads </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> CPU + 1 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> IO线程池，接收网络读写中断，以及序列化和反序列化，不处理业务，业务线程池参见threads配置，此线程池和CPU相关，不建议配置。 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> telnet </td>
<td class="confluenceTd"> telnet </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 所支持的telnet命令，多个命令用逗号分隔 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:service&gt; </td>
<td class="confluenceTd"> contextpath </td>
<td class="confluenceTd"> contextpath </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省为空串 </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 2.0.6以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:provider&gt; </td>
<td class="confluenceTd"> layer </td>
<td class="confluenceTd"> layer </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务提供者所在的分层。如：biz、dao、intl:web、china:acton。 </td>
<td class="confluenceTd"> 2.0.7以上版本 </td>
</tr>
</tbody></table>
</div>

<h3><a name="UserGuide-zh-%3Cdubbo%3Aconsumer%2F%3E"></a>&lt;dubbo:consumer/&gt;</h3>
<p>(<a href="http://dubbo.io/Consumer+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Consumer+Config-zh" title="Consumer Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aconsumer%252F%253E">#</a>)</p>

<p>服务消费者缺省值配置：<br>
配置类：com.alibaba.dubbo.config.ConsumerConfig<br>
说明：该标签为&lt;dubbo:reference&gt;标签的缺省值设置。</p>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> 标签 </th>
<th class="confluenceTh"> 属性 </th>
<th class="confluenceTh"> 对应URL参数 </th>
<th class="confluenceTh"> 类型 </th>
<th class="confluenceTh"> 是否必填 </th>
<th class="confluenceTh"> 缺省值 </th>
<th class="confluenceTh"> 作用 </th>
<th class="confluenceTh"> 描述 </th>
<th class="confluenceTh"> 兼容性 </th>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> timeout </td>
<td class="confluenceTd"> default.timeout </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 1000 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 远程服务调用超时时间(毫秒) </td>
<td class="confluenceTd"> 1.0.16以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> retries </td>
<td class="confluenceTd"> default.retries </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 2 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 远程服务调用重试次数，不包括第一次调用，不需要重试请设为0 </td>
<td class="confluenceTd"> 1.0.16以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> loadbalance </td>
<td class="confluenceTd"> default.loadbalance </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> random </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 负载均衡策略，可选值：random,roundrobin,leastactive，分别表示：随机，轮循，最少活跃调用 </td>
<td class="confluenceTd"> 1.0.16以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> async </td>
<td class="confluenceTd"> default.async </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 是否缺省异步执行，不可靠异步，只是忽略返回值，不阻塞执行线程 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> connections </td>
<td class="confluenceTd"> default.connections </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 100 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 每个服务对每个提供者的最大连接数，rmi、http、hessian等短连接协议支持此配置，dubbo协议长连接不支持此配置 </td>
<td class="confluenceTd"> 1.0.16以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> generic </td>
<td class="confluenceTd"> generic </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 是否缺省泛化接口，如果为泛化接口，将返回GenericService </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> check </td>
<td class="confluenceTd"> check </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> true </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 启动时检查提供者是否存在，true报错，false忽略 </td>
<td class="confluenceTd"> 1.0.16以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> proxy </td>
<td class="confluenceTd"> proxy </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> javassist </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 生成动态代理方式，可选：jdk/javassist </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> owner </td>
<td class="confluenceTd"> owner </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 调用服务负责人，用于服务治理，请填写负责人公司邮箱前缀 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> actives </td>
<td class="confluenceTd"> default.actives </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 每服务消费者每服务每方法最大并发调用数 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> cluster </td>
<td class="confluenceTd"> default.cluster </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> failover </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 集群方式，可选：failover/failfast/failsafe/failback/forking </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> filter </td>
<td class="confluenceTd"> reference.filter </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> &nbsp; </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务消费方远程调用过程拦截器名称，多个名称用逗号分隔 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> listener </td>
<td class="confluenceTd"> invoker.listener </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 服务消费方引用服务监听器名称，多个名称用逗号分隔 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> registry </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省向所有registry注册 </td>
<td class="confluenceTd"> 配置关联 </td>
<td class="confluenceTd"> 向指定注册中心注册，在多个注册中心时使用，值为&lt;dubbo:registry&gt;的id属性，多个注册中心ID用逗号分隔，如果不想将该服务注册到任何registry，可将值设为N/A </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> layer </td>
<td class="confluenceTd"> layer </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务调用者所在的分层。如：biz、dao、intl:web、china:acton。 </td>
<td class="confluenceTd"> 2.0.7以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> init </td>
<td class="confluenceTd"> init </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 是否在afterPropertiesSet()时饥饿初始化引用，否则等到有人注入或引用该实例时再初始化。 </td>
<td class="confluenceTd"> 2.0.10以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> cache </td>
<td class="confluenceTd"> cache </td>
<td class="confluenceTd"> string/boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 以调用参数为key，缓存返回结果，可选：lru, threadlocal, jcache等 </td>
<td class="confluenceTd"> Dubbo2.1.0及其以上版本支持 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:consumer&gt; </td>
<td class="confluenceTd"> validation </td>
<td class="confluenceTd"> validation </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 是否启用JSR303标准注解验证，如果启用，将对方法参数上的注解进行校验 </td>
<td class="confluenceTd"> Dubbo2.1.0及其以上版本支持 </td>
</tr>
</tbody></table>
</div>

<h3><a name="UserGuide-zh-%3Cdubbo%3Amethod%2F%3E"></a>&lt;dubbo:method/&gt;</h3>
<p>(<a href="http://dubbo.io/Method+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Method+Config-zh" title="Method Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Amethod%252F%253E">#</a>)</p>

<p>方法级配置：<br>
配置类：com.alibaba.dubbo.config.MethodConfig<br>
说明：该标签为&lt;dubbo:service&gt;或&lt;dubbo:reference&gt;的子标签，用于控制到方法级，</p>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> 标签 </th>
<th class="confluenceTh"> 属性 </th>
<th class="confluenceTh"> 对应URL参数 </th>
<th class="confluenceTh"> 类型 </th>
<th class="confluenceTh"> 是否必填 </th>
<th class="confluenceTh"> 缺省值 </th>
<th class="confluenceTh"> 作用 </th>
<th class="confluenceTh"> 描述 </th>
<th class="confluenceTh"> 兼容性 </th>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> name </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> <b>必填</b> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 标识 </td>
<td class="confluenceTd"> 方法名 </td>
<td class="confluenceTd"> 1.0.8以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> timeout </td>
<td class="confluenceTd"> &lt;metodName&gt;.timeout </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省为的timeout </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 方法调用超时时间(毫秒) </td>
<td class="confluenceTd"> 1.0.8以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> retries </td>
<td class="confluenceTd"> &lt;metodName&gt;.retries </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省为&lt;dubbo:reference&gt;的retries </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 远程服务调用重试次数，不包括第一次调用，不需要重试请设为0 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> loadbalance </td>
<td class="confluenceTd"> &lt;metodName&gt;.loadbalance </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省为的loadbalance </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 负载均衡策略，可选值：random,roundrobin,leastactive，分别表示：随机，轮循，最少活跃调用 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> async </td>
<td class="confluenceTd"> &lt;metodName&gt;.async </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 缺省为&lt;dubbo:reference&gt;的async </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 是否异步执行，不可靠异步，只是忽略返回值，不阻塞执行线程 </td>
<td class="confluenceTd"> 1.0.9以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> sent </td>
<td class="confluenceTd"> &lt;methodName&gt;.sent </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> true </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 异步调用时，标记sent=true时，表示网络已发出数据 </td>
<td class="confluenceTd"> 2.0.6以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> actives </td>
<td class="confluenceTd"> &lt;metodName&gt;.actives </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 每服务消费者最大并发调用限制 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> executes </td>
<td class="confluenceTd"> &lt;metodName&gt;.executes </td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> 0 </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 每服务每方法最大使用线程数限制- -，此属性只在&lt;dubbo:method&gt;作为&lt;dubbo:service&gt;子标签时有效 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> deprecated </td>
<td class="confluenceTd"> &lt;methodName&gt;.deprecated </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 服务方法是否过时，此属性只在&lt;dubbo:method&gt;作为&lt;dubbo:service&gt;子标签时有效 </td>
<td class="confluenceTd"> 2.0.5以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> sticky </td>
<td class="confluenceTd"> &lt;methodName&gt;.sticky </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> false </td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 设置true 该接口上的所有方法使用同一个provider.如果需要更复杂的规则，请使用用路由 </td>
<td class="confluenceTd"> 2.0.6以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> return </td>
<td class="confluenceTd"> &lt;methodName&gt;.return </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd"> true </td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 方法调用是否需要返回值,async设置为true时才生效，如果设置为true，则返回future，或回调onreturn等方法，如果设置为false，则请求发送成功后直接返回Null </td>
<td class="confluenceTd"> 2.0.6以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> oninvoke </td>
<td class="confluenceTd"> attribute属性，不在URL中体现 </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 方法执行前拦截 </td>
<td class="confluenceTd"> 2.0.6以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> onreturn </td>
<td class="confluenceTd"> attribute属性，不在URL中体现 </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 方法执行返回后拦截 </td>
<td class="confluenceTd"> 2.0.6以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> onthrow </td>
<td class="confluenceTd"> attribute属性，不在URL中体现 </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 性能调优 </td>
<td class="confluenceTd"> 方法执行有异常拦截 </td>
<td class="confluenceTd"> 2.0.6以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> cache </td>
<td class="confluenceTd"> &lt;methodName&gt;.cache </td>
<td class="confluenceTd"> string/boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 以调用参数为key，缓存返回结果，可选：lru, threadlocal, jcache等 </td>
<td class="confluenceTd"> Dubbo2.1.0及其以上版本支持 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:method&gt; </td>
<td class="confluenceTd"> validation </td>
<td class="confluenceTd"> &lt;methodName&gt;.validation </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 是否启用JSR303标准注解验证，如果启用，将对方法参数上的注解进行校验 </td>
<td class="confluenceTd"> Dubbo2.1.0及其以上版本支持 </td>
</tr>
</tbody></table>
</div>

<p>比如：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_191255" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.xxx.XxxService"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"findXxx"</code> <code class="xml color1">timeout</code><code class="xml plain">=</code><code class="xml string">"3000"</code> <code class="xml color1">retries</code><code class="xml plain">=</code><code class="xml string">"2"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:reference</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-%3Cdubbo%3Aargument%2F%3E"></a>&lt;dubbo:argument/&gt;</h3>
<p>(<a href="http://dubbo.io/Argument+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Argument+Config-zh" title="Argument Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aargumentn%252F%253E">#</a>)</p>

<p>方法参数配置：<br>
配置类：com.alibaba.dubbo.config.ArgumentConfig<br>
说明：该标签为&lt;dubbo:method&gt;的子标签，用于方法参数的特征描述，比如：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_476667" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"findXxx"</code> <code class="xml color1">timeout</code><code class="xml plain">=</code><code class="xml string">"3000"</code> <code class="xml color1">retries</code><code class="xml plain">=</code><code class="xml string">"2"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:argument</code> <code class="xml color1">index</code><code class="xml plain">=</code><code class="xml string">"0"</code> <code class="xml color1">callback</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> 标签 </th>
<th class="confluenceTh"> 属性 </th>
<th class="confluenceTh"> 对应URL参数 </th>
<th class="confluenceTh"> 类型 </th>
<th class="confluenceTh"> 是否必填 </th>
<th class="confluenceTh"> 缺省值 </th>
<th class="confluenceTh"> 作用 </th>
<th class="confluenceTh"> 描述 </th>
<th class="confluenceTh"> 兼容性 </th>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:argument&gt; </td>
<td class="confluenceTd"> index </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> int </td>
<td class="confluenceTd"> <b>必填</b> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 标识 </td>
<td class="confluenceTd"> 方法名 </td>
<td class="confluenceTd"> 2.0.6以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:argument&gt; </td>
<td class="confluenceTd"> type </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> 与index二选一 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 标识 </td>
<td class="confluenceTd"> 通过参数类型查找参数的index </td>
<td class="confluenceTd"> 2.0.6以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:argument&gt; </td>
<td class="confluenceTd"> callback </td>
<td class="confluenceTd"> &lt;metodName&gt;&lt;index&gt;.retries </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> 可选 </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 参数是否为callback接口，如果为callback，服务提供方将生成反向代理，可以从服务提供方反向调用消费方，通常用于事件推送. </td>
<td class="confluenceTd"> 2.0.6以上版本 </td>
</tr>
</tbody></table>
</div>

<h3><a name="UserGuide-zh-%3Cdubbo%3Aparameter%2F%3E"></a>&lt;dubbo:parameter/&gt;</h3>
<p>(<a href="http://dubbo.io/Parameter+Config-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Parameter+Config-zh" title="Parameter Config-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%253Cdubbo%253Aparameter%252F%253E">#</a>)</p>

<p>选项参数配置：<br>
配置类：java.util.Map<br>
说明：该标签为&lt;dubbo:protocol&gt;或&lt;dubbo:service&gt;或&lt;dubbo:provider&gt;或&lt;dubbo:reference&gt;或&lt;dubbo:consumer&gt;的子标签，用于配置自定义参数，该配置项将作为扩展点设置自定义参数使用。</p>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> 标签 </th>
<th class="confluenceTh"> 属性 </th>
<th class="confluenceTh"> 对应URL参数 </th>
<th class="confluenceTh"> 类型 </th>
<th class="confluenceTh"> 是否必填 </th>
<th class="confluenceTh"> 缺省值 </th>
<th class="confluenceTh"> 作用 </th>
<th class="confluenceTh"> 描述 </th>
<th class="confluenceTh"> 兼容性 </th>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:parameter&gt; </td>
<td class="confluenceTd"> key </td>
<td class="confluenceTd"> key </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> <b>必填</b> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 路由参数键 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
<tr>
<td class="confluenceTd"> &lt;dubbo:parameter&gt; </td>
<td class="confluenceTd"> value </td>
<td class="confluenceTd"> value </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> <b>必填</b> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> 服务治理 </td>
<td class="confluenceTd"> 路由参数值 </td>
<td class="confluenceTd"> 2.0.0以上版本 </td>
</tr>
</tbody></table>
</div>

<p>比如：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_125194" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"napoli"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:parameter</code> <code class="xml color1">key</code><code class="xml plain">=</code><code class="xml string">"<a href="http://10.20.160.198/wiki/display/dubbo/napoli.queue.name" "="">http://10.20.160.198/wiki/display/dubbo/napoli.queue.name"</a></code> <code class="xml color1">value</code><code class="xml plain">=</code><code class="xml string">"xxx"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:protocol</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>也可以：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_182529" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"jms"</code> <code class="xml color1">p:queue</code><code class="xml plain">=</code><code class="xml string">"xxx"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>详细参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B0" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh#UserGuide-zh-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B0">自定义参数</a></p>
<h2><a name="UserGuide-zh-%E5%8D%8F%E8%AE%AE%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C"></a>协议参考手册</h2>
<p>(<a href="http://dubbo.io/Protocol+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Protocol+Reference-zh" title="Protocol Reference-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%8D%8F%E8%AE%AE%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>推荐使用Dubbo协议</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>性能测试报告</b><br>各协议的性能情况，请参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A">性能测试报告</a> (<a href="http://dubbo.io/Performance+Test+Report-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Performance+Test+Report-zh" title="Performance Test Report-zh">+</a>)</td></tr></tbody></table></div>

<h3><a name="UserGuide-zh-dubbo%3A%2F%2F"></a>dubbo://</h3>
<p>(<a href="http://dubbo.io/Dubbo+Protocol-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Dubbo+Protocol-zh" title="Dubbo Protocol-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-dubbo%253A%252F%252F">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Dubbo缺省协议采用单一长连接和NIO异步通讯，适合于小数据量大并发的服务调用，以及服务消费者机器数远大于服务提供者机器数的情况。</td></tr></tbody></table></div>
<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Dubbo缺省协议不适合传送大数据量的服务，比如传文件，传视频等，除非请求量很低。</td></tr></tbody></table></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_971635" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"20880"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Set default protocol:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_609625" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:provider</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Set service protocol:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_700415" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Multi port:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_540822" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"dubbo1"</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"20880"</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"dubbo2"</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"20881"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Dubbo protocol options:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_127900" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml plain">name=“dubbo” port=“9090” server=“netty” client=“netty” codec=“dubbo” serialization=“hessian2” charset=“UTF-8” threadpool=“fixed” threads=“100” queues=“0” iothreads=“9” buffer=“8192” accepts=“1000” payload=“8388608” /&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/dubbo-protocol.jpg-version=1&modificationDate=1331068241000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6949458/dubbo-protocol.jpg?version=1&amp;modificationDate=1331068241000" style="border: 0px solid black"></span></p>
<ul>
	<li>Transporter
	<ul>
		<li>mina, netty, grizzy</li>
	</ul>
	</li>
	<li>Serialization
	<ul>
		<li>dubbo, hessian2, java, json</li>
	</ul>
	</li>
	<li>Dispatcher
	<ul>
		<li>all, direct, message, execution, connection</li>
	</ul>
	</li>
	<li>ThreadPool
	<ul>
		<li>fixed, cached</li>
	</ul>
	</li>
</ul>


<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Dubbo协议缺省每服务每提供者每消费者使用单一长连接，如果数据量较大，可以使用多个连接。</td></tr></tbody></table></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_170833" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">connections</code><code class="xml plain">=</code><code class="xml string">"2"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<ul>
	<li>&lt;dubbo:service connections=”0”&gt;或&lt;dubbo:reference connections=”0”&gt;表示该服务使用JVM共享长连接。(缺省)</li>
	<li>&lt;dubbo:service connections=”1”&gt;或&lt;dubbo:reference connections=”1”&gt;表示该服务使用独立长连接。</li>
	<li>&lt;dubbo:service connections=”2”&gt;或&lt;dubbo:reference connections=”2”&gt;表示该服务使用独立两条长连接。</li>
</ul>


<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>为防止被大量连接撑挂，可在服务提供方限制大接收连接数，以实现服务提供方自我保护。</td></tr></tbody></table></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_958436" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"dubbo"</code> <code class="xml color1">accepts</code><code class="xml plain">=</code><code class="xml string">"1000"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>缺省协议，使用基于mina1.1.7+hessian3.2.1的tbremoting交互。</p>
<ul>
	<li>连接个数：单连接</li>
	<li>连接方式：长连接</li>
	<li>传输协议：TCP</li>
	<li>传输方式：NIO异步传输</li>
	<li>序列化：Hessian二进制序列化</li>
	<li>适用范围：传入传出参数数据包较小（建议小于100K），消费者比提供者个数多，单一消费者无法压满提供者，<font color="red">尽量不要用dubbo协议传输大文件或超大字符串</font>。</li>
	<li>适用场景：常规远程服务方法调用</li>
</ul>


<p>为什么要消费者比提供者个数多：<br>
因dubbo协议采用单一长连接，<br>
假设网络为千兆网卡(1024Mbit=128MByte)，<br>
根据测试经验数据每条连接最多只能压满7MByte(不同的环境可能不一样，供参考)，<br>
理论上1个服务提供者需要20个服务消费者才能压满网卡。</p>

<p>为什么不能传大包：<br>
因dubbo协议采用单一长连接，<br>
如果每次请求的数据包大小为500KByte，假设网络为千兆网卡(1024Mbit=128MByte)，每条连接最大7MByte(不同的环境可能不一样，供参考)，<br>
单个服务提供者的TPS(每秒处理事务数)最大为：128MByte / 500KByte = 262。<br>
单个消费者调用单个服务提供者的TPS(每秒处理事务数)最大为：7MByte / 500KByte = 14。<br>
如果能接受，可以考虑使用，否则网络将成为瓶颈。</p>

<p>为什么采用异步单一长连接：<br>
因为服务的现状大都是服务提供者少，通常只有几台机器，<br>
而服务的消费者多，可能整个网站都在访问该服务，<br>
比如Morgan的提供者只有6台提供者，却有上百台消费者，每天有1.5亿次调用，<br>
如果采用常规的hessian服务，服务提供者很容易就被压跨，<br>
通过单一连接，保证单一消费者不会压死提供者，<br>
长连接，减少连接握手验证等，<br>
并使用异步IO，复用线程池，防止C10K问题。</p>

<p>(1) 约束：</p>
<ul>
	<li>参数及返回值需实现Serializable接口</li>
	<li>参数及返回值不能自定义实现List, Map, Number, Date, Calendar等接口，只能用JDK自带的实现，因为hessian会做特殊处理，自定义实现类中的属性值都会丢失。()</li>
	<li>Hessian序列化，只传成员属性值和值的类型，不传方法或静态变量，兼容情况：(由吴亚军提供)
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> 数据通讯 </th>
<th class="confluenceTh"> 情况 </th>
<th class="confluenceTh"> 结果 </th>
</tr>
<tr>
<td class="confluenceTd"> A-&gt;B </td>
<td class="confluenceTd"> 类A多一种 属性（或者说类B少一种 属性） </td>
<td class="confluenceTd"> 不抛异常，A多的那 个属性的值，B没有， 其他正常 </td>
</tr>
<tr>
<td class="confluenceTd"> A-&gt;B </td>
<td class="confluenceTd"> 枚举A多一种 枚举（或者说B少一种 枚举），A使用多 出来的枚举进行传输 </td>
<td class="confluenceTd"> 抛异常 </td>
</tr>
<tr>
<td class="confluenceTd"> A-&gt;B </td>
<td class="confluenceTd"> 枚举A多一种 枚举（或者说B少一种 枚举），A不使用 多出来的枚举进行传输 </td>
<td class="confluenceTd"> 不抛异常，B正常接 收数据 </td>
</tr>
<tr>
<td class="confluenceTd"> A-&gt;B </td>
<td class="confluenceTd"> A和B的属性 名相同，但类型不相同 </td>
<td class="confluenceTd"> 抛异常 </td>
</tr>
<tr>
<td class="confluenceTd"> A-&gt;B </td>
<td class="confluenceTd"> serialId 不相同 </td>
<td class="confluenceTd"> 正常传输 </td>
</tr>
</tbody></table>
</div>

<p>总结：会抛异常的情况：枚 举值一边多一种，一边少一种，正好使用了差别的那种，或者属性名相同，类型不同</p></li>
</ul>


<p>接口增加方法，对客户端无影响，如果该方法不是客户端需要的，客户端不需要重新部署；<br>
输入参数和结果集中增加属性，对客户端无影响，如果客户端并不需要新属性，不用重新<br>
部署；<br>
输入参数和结果集属性名变化，对客户端序列化无影响，但是如果客户端不重新部署，不管输入还是输出，属性名变化的属性值是获取不到的。<br>
总结：服务器端和客户端对领域对象并不需要完全一致，而是按照最大匹配原则。</p>

<p>(2) 配置：<br>
dubbo.properties：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_631096" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">dubbo.service.protocol=dubbo</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-rmi%3A%2F%2F"></a>rmi://</h3>
<p>(<a href="http://dubbo.io/Rmi+Protocol-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Rmi+Protocol-zh" title="Rmi Protocol-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-rmi%253A%252F%252F">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>RMI协议采用JDK标准的java.rmi.*实现，采用阻塞式短连接和JDK标准序列化方式。</td></tr></tbody></table></div>

<ul>
	<li>如果服务接口继承了java.rmi.Remote接口，可以和原生RMI互操作，即：
	<ul>
		<li>提供者用Dubbo的RMI协议暴露服务，消费者直接用标准RMI接口调用，</li>
		<li>或者提供方用标准RMI暴露服务，消费方用Dubbo的RMI协议调用。</li>
	</ul>
	</li>
	<li>如果服务接口<font color="red">没有</font>继承java.rmi.Remote接口，
	<ul>
		<li>缺省Dubbo将自动生成一个com.xxx.XxxService$Remote的接口，并继承java.rmi.Remote接口，并以此接口暴露服务，</li>
		<li>但如果设置了&lt;dubbo:protocol name="rmi" codec="spring" /&gt;，将不生成$Remote接口，而使用Spring的RmiInvocationHandler接口暴露服务，和Spring兼容。</li>
	</ul>
	</li>
</ul>


<p>Define rmi protocol:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_784953" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"rmi"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"1099"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Set default protocol:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_689180" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:provider</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"rmi"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Set service protocol:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_103706" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"rmi"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Multi port:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_877720" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"rmi1"</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"rmi"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"1099"</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"rmi2"</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"rmi"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"2099"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"rmi1"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Spring compatible:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_249174" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"rmi"</code> <code class="xml color1">codec</code><code class="xml plain">=</code><code class="xml string">"spring"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Java标准的远程调用协议。</p>
<ul>
	<li>连接个数：多连接</li>
	<li>连接方式：短连接</li>
	<li>传输协议：TCP</li>
	<li>传输方式：同步传输</li>
	<li>序列化：Java标准二进制序列化</li>
	<li>适用范围：传入传出参数数据包大小混合，消费者与提供者个数差不多，可传文件。</li>
	<li>适用场景：常规远程服务方法调用，与原生RMI服务互操作</li>
</ul>


<p>(1) 约束：</p>
<ul>
	<li>参数及返回值需实现Serializable接口</li>
	<li>dubbo配置中的超时时间对rmi无效，需使用java启动参数设置：-Dsun.rmi.transport.tcp.responseTimeout=3000，参见下面的RMI配置。</li>
</ul>


<p>(2) 配置：<br>
dubbo.properties：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_610093" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">dubbo.service.protocol=rmi</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>(3) RMI配置：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_30252" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">java -Dsun.rmi.transport.tcp.responseTimeout=</code><code class="java value">3000</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>更多RMI优化参数请查看：<br>
<a href="javascript:if(confirm(%27http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/technotes/guides/rmi/sunrmiproperties.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/technotes/guides/rmi/sunrmiproperties.html%27" tppabs="http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/technotes/guides/rmi/sunrmiproperties.html" class="external-link" rel="nofollow">http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/technotes/guides/rmi/sunrmiproperties.html</a></p>
<h3><a name="UserGuide-zh-hessian%3A%2F%2F"></a>hessian://</h3>
<p>(<a href="http://dubbo.io/Hessian+Protocol-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Hessian+Protocol-zh" title="Hessian Protocol-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-hessian%253A%252F%252F">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Hessian协议用于集成Hessian的服务，Hessian底层采用Http通讯，采用Servlet暴露服务，Dubbo缺省内嵌Jetty作为服务器实现。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Hessian是Caucho开源的一个RPC框架：<a href="javascript:if(confirm(%27http://hessian.caucho.com/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://hessian.caucho.com/%27" tppabs="http://hessian.caucho.com/" class="external-link" rel="nofollow">http://hessian.caucho.com</a>，其通讯效率高于WebService和Java自带的序列化。</td></tr></tbody></table></div>

<p>依赖：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_447703" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;com.caucho&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;hessian&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;4.0.7&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>可以和原生Hessian服务互操作，即：</p>
<ul>
	<li>提供者用Dubbo的Hessian协议暴露服务，消费者直接用标准Hessian接口调用，</li>
	<li>或者提供方用标准Hessian暴露服务，消费方用Dubbo的Hessian协议调用。</li>
</ul>


<p>基于Hessian的远程调用协议。</p>
<ul>
	<li>连接个数：多连接</li>
	<li>连接方式：短连接</li>
	<li>传输协议：HTTP</li>
	<li>传输方式：同步传输</li>
	<li>序列化：Hessian二进制序列化</li>
	<li>适用范围：传入传出参数数据包较大，提供者比消费者个数多，提供者压力较大，可传文件。</li>
	<li>适用场景：页面传输，文件传输，或与原生hessian服务互操作</li>
</ul>


<p>(1) 约束：</p>
<ul>
	<li>参数及返回值需实现Serializable接口</li>
	<li>参数及返回值不能自定义实现List, Map, Number, Date, Calendar等接口，只能用JDK自带的实现，因为hessian会做特殊处理，自定义实现类中的属性值都会丢失。</li>
</ul>


<p>(2) 配置：<br>
Define hessian protocol:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_910793" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hessian"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"8080"</code> <code class="xml color1">server</code><code class="xml plain">=</code><code class="xml string">"jetty"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Set default protocol:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_520107" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:provider</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"hessian"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Set service protocol:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_578297" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"hessian"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Multi port:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_763108" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"hessian1"</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hessian"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"8080"</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"hessian2"</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"hessian"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"8081"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Directly provider:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_983710" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"helloService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"HelloWorld"</code> <code class="xml color1">url</code><code class="xml plain">=</code><code class="xml string">"hessian://10.20.153.10:8080/helloWorld"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-JettyServer%3A%28default%29"></a>h4. Jetty Server: (default)</h4>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_386092" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml plain">... </code><code class="xml color1">server</code><code class="xml plain">=</code><code class="xml string">"jetty"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-ServletBridgeServer%3A%28%29"></a>h4. Servlet Bridge Server: (<font color="brown">recommend</font>)</h4>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_254829" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml plain">... </code><code class="xml color1">server</code><code class="xml plain">=</code><code class="xml string">"servlet"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>web.xml：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_542866" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">servlet</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">servlet-name</code><code class="xml plain">&gt;dubbo&lt;/</code><code class="xml keyword">servlet-name</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">servlet-class</code><code class="xml plain">&gt;com.alibaba.dubbo.remoting.http.servlet.DispatcherServlet&lt;/</code><code class="xml keyword">servlet-class</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">load-on-startup</code><code class="xml plain">&gt;1&lt;/</code><code class="xml keyword">load-on-startup</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">servlet</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">servlet-mapping</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">servlet-name</code><code class="xml plain">&gt;dubbo&lt;/</code><code class="xml keyword">servlet-name</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">url-pattern</code><code class="xml plain">&gt;/*&lt;/</code><code class="xml keyword">url-pattern</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">servlet-mapping</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>注意，如果使用servlet派发请求：</p>
<ul>
	<li>协议的端口&lt;dubbo:protocol port="8080" /&gt;必须与servlet容器的端口相同，</li>
	<li>协议的上下文路径&lt;dubbo:protocol contextpath="foo" /&gt;必须与servlet应用的上下文路径相同。</li>
</ul>

<h3><a name="UserGuide-zh-http%3A%2F%2F"></a>http://</h3>
<p>(<a href="http://dubbo.io/Http+Protocol-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Http+Protocol-zh" title="Http Protocol-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-http%253A%252F%252F">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>采用Spring的HttpInvoker实现</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>2.3.0以上版本支持</td></tr></tbody></table></div>

<p>基于http表单的远程调用协议。参见：<span class="error">[HTTP协议使用说明]</span></p>
<ul>
	<li>连接个数：多连接</li>
	<li>连接方式：短连接</li>
	<li>传输协议：HTTP</li>
	<li>传输方式：同步传输</li>
	<li>序列化：表单序列化</li>
	<li>适用范围：传入传出参数数据包大小混合，提供者比消费者个数多，可用浏览器查看，可用表单或URL传入参数，暂不支持传文件。</li>
	<li>适用场景：需同时给应用程序和浏览器JS使用的服务。</li>
</ul>


<p>(1) 约束：</p>
<ul>
	<li>参数及返回值需符合Bean规范</li>
</ul>


<p>(2) 配置：<br>
dubbo.xml：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_870857" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">&lt;dubbo:protocol name=</code><code class="java string">"http"</code> <code class="java plain">port=</code><code class="java string">"8080"</code> <code class="java plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-JettyServer%3A%28default%29"></a>h4. Jetty Server: (default)</h4>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_567804" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml plain">... </code><code class="xml color1">server</code><code class="xml plain">=</code><code class="xml string">"jetty"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-ServletBridgeServer%3A%28%29"></a>h4. Servlet Bridge Server: (<font color="brown">recommend</font>)</h4>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_579821" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml plain">... </code><code class="xml color1">server</code><code class="xml plain">=</code><code class="xml string">"servlet"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>web.xml：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_287834" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">servlet</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">servlet-name</code><code class="xml plain">&gt;dubbo&lt;/</code><code class="xml keyword">servlet-name</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">servlet-class</code><code class="xml plain">&gt;com.alibaba.dubbo.remoting.http.servlet.DispatcherServlet&lt;/</code><code class="xml keyword">servlet-class</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">load-on-startup</code><code class="xml plain">&gt;1&lt;/</code><code class="xml keyword">load-on-startup</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">servlet</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">servlet-mapping</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">servlet-name</code><code class="xml plain">&gt;dubbo&lt;/</code><code class="xml keyword">servlet-name</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">url-pattern</code><code class="xml plain">&gt;/*&lt;/</code><code class="xml keyword">url-pattern</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">servlet-mapping</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>注意，如果使用servlet派发请求：</p>
<ul>
	<li>协议的端口&lt;dubbo:protocol port="8080" /&gt;必须与servlet容器的端口相同，</li>
	<li>协议的上下文路径&lt;dubbo:protocol contextpath="foo" /&gt;必须与servlet应用的上下文路径相同。</li>
</ul>

<h3><a name="UserGuide-zh-webservice%3A%2F%2F"></a>webservice://</h3>
<p>(<a href="http://dubbo.io/WebService+Protocol.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/WebService+Protocol" title="WebService Protocol">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-webservice%253A%252F%252F">#</a>)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>2.3.0以上版本支持。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>基于CXF的<a href="javascript:if(confirm(%27http://search.maven.org/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22cxf-rt-frontend-simple%22%27" tppabs="http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22cxf-rt-frontend-simple%22" class="external-link" rel="nofollow">frontend-simple</a>和<a href="javascript:if(confirm(%27http://search.maven.org/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22cxf-rt-transports-http%22%27" tppabs="http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22cxf-rt-transports-http%22" class="external-link" rel="nofollow">transports-http</a>实现。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>CXF是Apache开源的一个RPC框架：<a href="javascript:if(confirm(%27http://cxf.apache.org/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://cxf.apache.org/%27" tppabs="http://cxf.apache.org/" class="external-link" rel="nofollow">http://cxf.apache.org</a>，由Xfire和Celtix合并而来 。</td></tr></tbody></table></div>

<p>依赖：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_672007" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;org.apache.cxf&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;cxf-rt-frontend-simple&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;2.6.1&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;org.apache.cxf&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;cxf-rt-transports-http&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;2.6.1&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>可以和原生WebService服务互操作，即：</p>
<ul>
	<li>提供者用Dubbo的WebService协议暴露服务，消费者直接用标准WebService接口调用，</li>
	<li>或者提供方用标准WebService暴露服务，消费方用Dubbo的WebService协议调用。</li>
</ul>


<p>基于WebService的远程调用协议。</p>
<ul>
	<li>连接个数：多连接</li>
	<li>连接方式：短连接</li>
	<li>传输协议：HTTP</li>
	<li>传输方式：同步传输</li>
	<li>序列化：SOAP文本序列化</li>
	<li>适用场景：系统集成，跨语言调用。</li>
</ul>


<p>(1) 约束：</p>
<ul>
	<li>参数及返回值需实现Serializable接口</li>
	<li>参数尽量使用基本类型和POJO。</li>
</ul>


<p>(2) 配置：<br>
Define hessian protocol:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_186364" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"webservice"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"8080"</code> <code class="xml color1">server</code><code class="xml plain">=</code><code class="xml string">"jetty"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Set default protocol:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_176179" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:provider</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"webservice"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Set service protocol:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_540230" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"webservice"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Multi port:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_254161" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"webservice1"</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"webservice"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"8080"</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"webservice2"</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"webservice"</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"8081"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Directly provider:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_480172" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"helloService"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"HelloWorld"</code> <code class="xml color1">url</code><code class="xml plain">=</code><code class="xml string">"webservice://10.20.153.10:8080/com.foo.HelloWorld"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>WSDL:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_419171" class="syntaxhighlighter nogutter  text"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="text plain"><a href="http://10.20.153.10:8080/com.foo.HelloWorld?wsdl">http://10.20.153.10:8080/com.foo.HelloWorld?wsdl</a></code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-JettyServer%3A%28default%29"></a>h4. Jetty Server: (default)</h4>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_567716" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml plain">... </code><code class="xml color1">server</code><code class="xml plain">=</code><code class="xml string">"jetty"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<h4><a name="UserGuide-zh-ServletBridgeServer%3A%28%29"></a>h4. Servlet Bridge Server: (<font color="brown">recommend</font>)</h4>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_804860" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml plain">... </code><code class="xml color1">server</code><code class="xml plain">=</code><code class="xml string">"servlet"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>web.xml：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_698081" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">servlet</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">servlet-name</code><code class="xml plain">&gt;dubbo&lt;/</code><code class="xml keyword">servlet-name</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">servlet-class</code><code class="xml plain">&gt;com.alibaba.dubbo.remoting.http.servlet.DispatcherServlet&lt;/</code><code class="xml keyword">servlet-class</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">load-on-startup</code><code class="xml plain">&gt;1&lt;/</code><code class="xml keyword">load-on-startup</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">servlet</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">servlet-mapping</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">servlet-name</code><code class="xml plain">&gt;dubbo&lt;/</code><code class="xml keyword">servlet-name</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">url-pattern</code><code class="xml plain">&gt;/*&lt;/</code><code class="xml keyword">url-pattern</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">servlet-mapping</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>注意，如果使用servlet派发请求：</p>
<ul>
	<li>协议的端口&lt;dubbo:protocol port="8080" /&gt;必须与servlet容器的端口相同，</li>
	<li>协议的上下文路径&lt;dubbo:protocol contextpath="foo" /&gt;必须与servlet应用的上下文路径相同。</li>
</ul>

<h3><a name="UserGuide-zh-thrift%3A%2F%2F"></a>thrift://</h3>
<p>(<a href="http://dubbo.io/Thrift+Protocol.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Thrift+Protocol" title="Thrift Protocol">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-thrift%253A%252F%252F">#</a>)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>2.3.0以上版本支持。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Thrift说明</b><br>Thrift是Facebook捐给Apache的一个RPC框架，参见：<a href="javascript:if(confirm(%27http://thrift.apache.org/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://thrift.apache.org/%27" tppabs="http://thrift.apache.org/" class="external-link" rel="nofollow">http://thrift.apache.org</a></td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>dubbo thrift协议</b><br>当前 dubbo 支持的 thrift 协议是对 thrift 原生协议的扩展，在原生协议的基础上添加了一些额外的头信息，比如service name，magic number等。使用dubbo thrift协议同样需要使用thrift的idl compiler编译生成相应的java代码，后续版本中会在这方面做一些增强。</td></tr></tbody></table></div>

<p>示例：<a href="javascript:if(confirm(%27https://github.com/alibaba/dubbo/tree/master/dubbo-rpc/dubbo-rpc-thrift/src/test/java/com/alibaba/dubbo/rpc/protocol/thrift/examples  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/alibaba/dubbo/tree/master/dubbo-rpc/dubbo-rpc-thrift/src/test/java/com/alibaba/dubbo/rpc/protocol/thrift/examples%27" tppabs="https://github.com/alibaba/dubbo/tree/master/dubbo-rpc/dubbo-rpc-thrift/src/test/java/com/alibaba/dubbo/rpc/protocol/thrift/examples" class="external-link" rel="nofollow">https://github.com/alibaba/dubbo/tree/master/dubbo-rpc/dubbo-rpc-thrift/src/test/java/com/alibaba/dubbo/rpc/protocol/thrift/examples</a></p>

<p>依赖：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_501797" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;org.apache.thrift&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;libthrift&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;0.8.0&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>所有服务共用一个端口：(与原生Thrift不兼容)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_380616" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">&lt;dubbo:protocol name=</code><code class="java string">"thrift"</code> <code class="java plain">port=</code><code class="java string">"3030"</code> <code class="java plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Thrift<font color="red">不支持</font>数据类型：</p>
<ul>
	<li>null值 (不能在协议中传递null值)</li>
</ul>

<h3><a name="UserGuide-zh-memcached%3A%2F%2F"></a>memcached://</h3>
<p>(<a href="http://dubbo.io/Memcached+Protocol.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Memcached+Protocol" title="Memcached Protocol">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-memcached%253A%252F%252F">#</a>)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>2.3.0以上版本支持。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Memcached说明</b><br>Memcached是一个高效的KV缓存服务器，参见：<a href="javascript:if(confirm(%27http://memcached.org/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://memcached.org/%27" tppabs="http://memcached.org/" class="external-link" rel="nofollow">http://memcached.org/</a></td></tr></tbody></table></div>

<p>可以通过脚本或监控中心手工填写表单注册memcached服务的地址：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_630723" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">RegistryFactory registryFactory = ExtensionLoader.getExtensionLoader(RegistryFactory.</code><code class="java keyword">class</code><code class="java plain">).getAdaptiveExtension();</code></div><div class="line number2 index1 alt1"><code class="java plain">Registry registry = registryFactory.getRegistry(URL.valueOf(</code><code class="java string">"zookeeper://10.20.153.10:2181"</code><code class="java plain">));</code></div><div class="line number3 index2 alt2"><code class="java plain">registry.register(URL.valueOf(</code><code class="java string">"memcached://10.20.153.11/com.foo.BarService?category=providers&amp;dynamic=false&amp;application=foo&amp;group=member&amp;loadbalance=consistenthash"</code><code class="java plain">));</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>然后在客户端使用时，不需要感知Memcached的地址：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_23200" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"cache"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"<a href="http://10.20.160.198/wiki/display/dubbo/java.util.Map" "="">http://10.20.160.198/wiki/display/dubbo/java.util.Map"</a></code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"member"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>或者，点对点直连：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_349801" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"cache"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"<a href="http://10.20.160.198/wiki/display/dubbo/java.util.Map" "="">http://10.20.160.198/wiki/display/dubbo/java.util.Map"</a></code> <code class="xml color1">url</code><code class="xml plain">=</code><code class="xml string">"memcached://10.20.153.10:11211"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>也可以使用自定义接口：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_764812" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"cache"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.CacheService"</code> <code class="xml color1">url</code><code class="xml plain">=</code><code class="xml string">"memcached://10.20.153.10:11211"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>方法名建议和memcached的标准方法名相同，即：get(key), set(key, value), delete(key)。</p>

<p>如果方法名和memcached的标准方法名不相同，则需要配置映射关系：(其中"p:xxx"为spring的标准p标签)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_458721" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"cache"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.CacheService"</code> <code class="xml color1">url</code><code class="xml plain">=</code><code class="xml string">"memcached://10.20.153.10:11211"</code> <code class="xml color1">p:set</code><code class="xml plain">=</code><code class="xml string">"putFoo"</code> <code class="xml color1">p:get</code><code class="xml plain">=</code><code class="xml string">"getFoo"</code> <code class="xml color1">p:delete</code><code class="xml plain">=</code><code class="xml string">"removeFoo"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-redis%3A%2F%2F"></a>redis://</h3>
<p>(<a href="http://dubbo.io/Redis+Protocol.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Redis+Protocol" title="Redis Protocol">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-redis%253A%252F%252F">#</a>)</p>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>2.3.0以上版本支持。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Redis说明</b><br>Redis是一个高效的KV存储服务器，参见：<a href="javascript:if(confirm(%27http://redis.io/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://redis.io/%27" tppabs="http://redis.io/" class="external-link" rel="nofollow">http://redis.io</a></td></tr></tbody></table></div>

<p>可以通过脚本或监控中心手工填写表单注册redis服务的地址：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_746611" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">RegistryFactory registryFactory = ExtensionLoader.getExtensionLoader(RegistryFactory.</code><code class="java keyword">class</code><code class="java plain">).getAdaptiveExtension();</code></div><div class="line number2 index1 alt1"><code class="java plain">Registry registry = registryFactory.getRegistry(URL.valueOf(</code><code class="java string">"zookeeper://10.20.153.10:2181"</code><code class="java plain">));</code></div><div class="line number3 index2 alt2"><code class="java plain">registry.register(URL.valueOf(</code><code class="java string">"redis://10.20.153.11/com.foo.BarService?category=providers&amp;dynamic=false&amp;application=foo&amp;group=member&amp;loadbalance=consistenthash"</code><code class="java plain">));</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>然后在客户端使用时，不需要感知Redis的地址：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_275332" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"store"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"<a href="http://10.20.160.198/wiki/display/dubbo/java.util.Map" "="">http://10.20.160.198/wiki/display/dubbo/java.util.Map"</a></code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"member"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>或者，点对点直连：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_397910" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"store"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"<a href="http://10.20.160.198/wiki/display/dubbo/java.util.Map" "="">http://10.20.160.198/wiki/display/dubbo/java.util.Map"</a></code> <code class="xml color1">url</code><code class="xml plain">=</code><code class="xml string">"redis://10.20.153.10:6379"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>也可以使用自定义接口：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_274814" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"store"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.StoreService"</code> <code class="xml color1">url</code><code class="xml plain">=</code><code class="xml string">"redis://10.20.153.10:6379"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>方法名建议和redis的标准方法名相同，即：get(key), set(key, value), delete(key)。</p>

<p>如果方法名和redis的标准方法名不相同，则需要配置映射关系：(其中"p:xxx"为spring的标准p标签)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_948037" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"cache"</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.foo.CacheService"</code> <code class="xml color1">url</code><code class="xml plain">=</code><code class="xml string">"memcached://10.20.153.10:11211"</code> <code class="xml color1">p:set</code><code class="xml plain">=</code><code class="xml string">"putFoo"</code> <code class="xml color1">p:get</code><code class="xml plain">=</code><code class="xml string">"getFoo"</code> <code class="xml color1">p:delete</code><code class="xml plain">=</code><code class="xml string">"removeFoo"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h2><a name="UserGuide-zh-%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C"></a>注册中心参考手册</h2>
<p>(<a href="http://dubbo.io/Registry+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Registry+Reference-zh" title="Registry Reference-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>推荐使用Zookeeper注册中心</td></tr></tbody></table></div>

<h3><a name="UserGuide-zh-Multicast%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"></a>Multicast注册中心</h3>
<p>(<a href="http://dubbo.io/Multicast+Registry-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Multicast+Registry-zh" title="Multicast Registry-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Multicast%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>不需要启动任何中心节点，只要广播地址一样，就可以互相发现</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>组播受网络结构限制，只适合小规模应用或开发阶段使用。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>组播地址段: 224.0.0.0 - 239.255.255.255</td></tr></tbody></table></div>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/multicast.jpg-version=1&modificationDate=1320417810000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6949468/multicast.jpg?version=1&amp;modificationDate=1320417810000" style="border: 0px solid black"></span></p>
<ol>
	<li>提供方启动时广播自己的地址。</li>
	<li>消费方启动时广播订阅请求。</li>
	<li>提供方收到订阅请求时，单播自己的地址给订阅者，如果设置了unicast=false，则广播给订阅者。</li>
	<li>消费方收到提供方地址时，连接该地址进行RPC调用。</li>
</ol>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_30622" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"multicast://224.5.6.7:1234"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Or:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_143460" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"multicast"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"224.5.6.7:1234"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>为了减少广播量，Dubbo缺省使用单播发送提供者地址信息给消费者，<br>
如果一个机器上同时启了多个消费者进程，消费者需声明unicast=false，否则只会有一个消费者能收到消息：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_373637" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"multicast://224.5.6.7:1234?unicast=false"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Or:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_529033" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"multicast"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"224.5.6.7:1234"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:parameter</code> <code class="xml color1">key</code><code class="xml plain">=</code><code class="xml string">"unicast"</code> <code class="xml color1">value</code><code class="xml plain">=</code><code class="xml string">"false"</code> <code class="xml plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:registry</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-Zookeeper%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"></a>Zookeeper注册中心</h3>
<p>(<a href="http://dubbo.io/Zookeeper+Registry-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Zookeeper+Registry-zh" title="Zookeeper Registry-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Zookeeper%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>建议使用dubbo-2.3.3以上版本的zookeeper注册中心客户端</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Zookeeper说明</b><br>Zookeeper是Apacahe Hadoop的子项目，是一个树型的目录服务，支持变更推送，适合作为Dubbo服务的注册中心，工业强度较高，可用于生产环境，并推荐使用，参见：<a href="javascript:if(confirm(%27http://zookeeper.apache.org/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://zookeeper.apache.org/%27" tppabs="http://zookeeper.apache.org/" class="external-link" rel="nofollow">http://zookeeper.apache.org</a></td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Zookeeper安装</b><br>安装方式参见: <a href="http://dubbo.io/Administrator+Guide.htm#AdministratorGuide-ZookeeperRegistryInstallation" tppabs="http://10.20.160.198/wiki/display/dubbo/Administrator+Guide#AdministratorGuide-ZookeeperRegistryInstallation">Zookeeper安装手册</a>，只需搭一个原生的Zookeeper服务器，并将<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-QuickStart">Quick Start</a>中Provider和Consumer里的conf/dubbo.properties中的dubbo.registry.addrss的值改为zookeeper://127.0.0.1:2181即可使用</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>可靠性声明</b><br>阿里内部并没有采用Zookeeper做为注册中心，而是使用自己实现的基于数据库的注册中心，即：Zookeeper注册中心并没有在阿里内部长时间运行的可靠性保障，此Zookeeper桥接实现只为开源版本提供，其可靠性依赖于Zookeeper本身的可靠性。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>兼容性声明</b><br>因2.0.8最初设计的zookeeper存储结构不能扩充不同类型的数据，2.0.9版本做了调整，所以不兼容，需全部改用2.0.9版本才行，以后的版本会保持兼容2.0.9。<br>
2.2.0版本改为基于zkclient实现，需增加zkclient的依赖包，2.3.0版本增加了基于curator的实现，作为可选实现策略。</td></tr></tbody></table></div>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/zookeeper.jpg-version=1&modificationDate=1323255359000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6949466/zookeeper.jpg?version=1&amp;modificationDate=1323255359000" style="border: 0px solid black"></span></p>

<p>流程说明：</p>
<ul>
	<li>服务提供者启动时
	<ul>
		<li>向/dubbo/com.foo.BarService/providers目录下写入自己的URL地址。</li>
	</ul>
	</li>
	<li>服务消费者启动时
	<ul>
		<li>订阅/dubbo/com.foo.BarService/providers目录下的提供者URL地址。</li>
		<li>并向/dubbo/com.foo.BarService/consumers目录下写入自己的URL地址。</li>
	</ul>
	</li>
	<li>监控中心启动时
	<ul>
		<li>订阅/dubbo/com.foo.BarService目录下的所有提供者和消费者URL地址。</li>
	</ul>
	</li>
</ul>


<p>支持以下功能：</p>
<ul>
	<li>当提供者出现断电等异常停机时，注册中心能自动删除提供者信息。</li>
	<li>当注册中心重启时，能自动恢复注册数据，以及订阅请求。</li>
	<li>当会话过期时，能自动恢复注册数据，以及订阅请求。</li>
	<li>当设置&lt;dubbo:registry check="false" /&gt;时，记录失败注册和订阅请求，后台定时重试。</li>
	<li>可通过&lt;dubbo:registry username="admin" password="1234" /&gt;设置zookeeper登录信息。</li>
	<li>可通过&lt;dubbo:registry group="dubbo" /&gt;设置zookeeper的根节点，不设置将使用无根树。</li>
	<li>支持*号通配符&lt;dubbo:reference group="*" version="*" /&gt;，可订阅服务的所有分组和所有版本的提供者。</li>
</ul>


<p>在provider和consumer中增加zookeeper客户端jar包依赖：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_373353" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;org.apache.zookeeper&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;zookeeper&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;3.3.3&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或直接下载：<a href="javascript:if(confirm(%27http://repo1.maven.org/maven2/org/apache/zookeeper/zookeeper  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://repo1.maven.org/maven2/org/apache/zookeeper/zookeeper%27" tppabs="http://repo1.maven.org/maven2/org/apache/zookeeper/zookeeper" class="external-link" rel="nofollow">http://repo1.maven.org/maven2/org/apache/zookeeper/zookeeper</a></p>

<p>支持zkclient和curator两种Zookeeper客户端实现：</p>

<h4><a name="UserGuide-zh-ZKClientZookeeperRegistry"></a>ZKClient Zookeeper Registry</h4>

<p>从2.2.0版本开始缺省为zkclient实现，以提升zookeeper客户端的健状性。</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>ZKClient是Datameer开源的一个Zookeeper客户端实现，开源比较早，参见：<a href="javascript:if(confirm(%27https://github.com/sgroschupf/zkclient  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/sgroschupf/zkclient%27" tppabs="https://github.com/sgroschupf/zkclient" class="external-link" rel="nofollow">https://github.com/sgroschupf/zkclient</a></td></tr></tbody></table></div>

<p>缺省配置：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_683025" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml plain">... </code><code class="xml color1">client</code><code class="xml plain">=</code><code class="xml string">"zkclient"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_843623" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">dubbo.registry.client=zkclient</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_524362" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">zookeeper://10.20.153.10:2181?client=zkclient</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>需依赖：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_317183" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;com.github.sgroschupf&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;zkclient&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;0.1&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或直接下载：<a href="javascript:if(confirm(%27http://repo1.maven.org/maven2/com/github/sgroschupf/zkclient  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://repo1.maven.org/maven2/com/github/sgroschupf/zkclient%27" tppabs="http://repo1.maven.org/maven2/com/github/sgroschupf/zkclient" class="external-link" rel="nofollow">http://repo1.maven.org/maven2/com/github/sgroschupf/zkclient</a></p>

<h4><a name="UserGuide-zh-CuratorZookeeperRegistry"></a>Curator Zookeeper Registry</h4>

<p>从2.3.0版本开始支持可选curator实现。</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Curator是Netflix开源的一个Zookeeper客户端实现，比较活跃，参见：<a href="javascript:if(confirm(%27https://github.com/Netflix/curator  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/Netflix/curator%27" tppabs="https://github.com/Netflix/curator" class="external-link" rel="nofollow">https://github.com/Netflix/curator</a></td></tr></tbody></table></div>

<p>如果需要改为curator实现，请配置：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_704747" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml plain">... </code><code class="xml color1">client</code><code class="xml plain">=</code><code class="xml string">"curator"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_593307" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">dubbo.registry.client=curator</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_252900" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">zookeeper://10.20.153.10:2181?client=curator</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>需依赖：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_935264" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;com.netflix.curator&lt;/</code><code class="xml keyword">groupId</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;curator-framework&lt;/</code><code class="xml keyword">artifactId</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">version</code><code class="xml plain">&gt;1.1.10&lt;/</code><code class="xml keyword">version</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">dependency</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或直接下载：<a href="javascript:if(confirm(%27http://repo1.maven.org/maven2/com/netflix/curator/curator-framework  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://repo1.maven.org/maven2/com/netflix/curator/curator-framework%27" tppabs="http://repo1.maven.org/maven2/com/netflix/curator/curator-framework" class="external-link" rel="nofollow">http://repo1.maven.org/maven2/com/netflix/curator/curator-framework</a></p>

<p>Zookeeper单机配置:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_752532" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"zookeeper://10.20.153.10:2181"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Or:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_151440" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"zookeeper"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.153.10:2181"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Zookeeper集群配置:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_457892" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"zookeeper://10.20.153.10:2181?backup=10.20.153.11:2181,10.20.153.12:2181"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Or:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_721601" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"zookeeper"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.153.10:2181,10.20.153.11:2181,10.20.153.12:2181"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>同一Zookeeper，分成多组注册中心:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_360045" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"chinaRegistry"</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"zookeeper"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.153.10:2181"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"china"</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"intlRegistry"</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"zookeeper"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.153.10:2181"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"intl"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-Redis%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"></a>Redis注册中心</h3>
<p>(<a href="http://dubbo.io/Redis+Registry-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Redis+Registry-zh" title="Redis Registry-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Redis%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Redis说明</b><br>Redis是一个高效的KV存储服务器，参见：<a href="javascript:if(confirm(%27http://redis.io/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://redis.io/%27" tppabs="http://redis.io/" class="external-link" rel="nofollow">http://redis.io</a></td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Redis安装</b><br>安装方式参见: <a href="http://dubbo.io/Administrator+Guide.htm#AdministratorGuide-RedisRegistryInstallation" tppabs="http://10.20.160.198/wiki/display/dubbo/Administrator+Guide#AdministratorGuide-RedisRegistryInstallation">Redis安装手册</a>，只需搭一个原生的Redis服务器，并将<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-QuickStart">Quick Start</a>中Provider和Consumer里的conf/dubbo.properties中的dubbo.registry.addrss的值改为redis://127.0.0.1:6379即可使用</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Redis过期数据</b><br>通过心跳的方式检测脏数据，服务器时间必须相同，并且对服务器有一定压力。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>可靠性声明</b><br>阿里内部并没有采用Redis做为注册中心，而是使用自己实现的基于数据库的注册中心，即：Redis注册中心并没有在阿里内部长时间运行的可靠性保障，此Redis桥接实现只为开源版本提供，其可靠性依赖于Redis本身的可靠性。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>从2.1.0版本开始支持</td></tr></tbody></table></div>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/dubbo-redis-registry.jpg-version=1&modificationDate=1331396413000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/7668007/dubbo-redis-registry.jpg?version=1&amp;modificationDate=1331396413000" style="border: 0px solid black"></span></p>

<p>数据结构：</p>
<ul>
	<li>使用Redis的Key/Map结构存储数据。
	<ul>
		<li>主Key为服务名和类型。</li>
		<li>Map中的Key为URL地址。</li>
		<li>Map中的Value为过期时间，用于判断脏数据，脏数据由监控中心删除。<font color="red">(注意：服务器时间必需同步，否则过期检测会不准确)</font></li>
	</ul>
	</li>
	<li>使用Redis的Publish/Subscribe事件通知数据变更。
	<ul>
		<li>通过事件的值区分事件类型：register, unregister, subscribe, unsubscribe。</li>
		<li>普通消费者直接订阅指定服务提供者的Key，只会收到指定服务的register, unregister事件。</li>
		<li>监控中心通过psubscribe功能订阅/dubbo/*，会收到所有服务的所有变更事件。</li>
	</ul>
	</li>
</ul>


<p>调用过程：</p>
<ol>
	<li>服务提供方启动时，向Key:/dubbo/com.foo.BarService/providers下，添加当前提供者的地址。</li>
	<li>并向Channel:/dubbo/com.foo.BarService/providers发送register事件。</li>
	<li>服务消费方启动时，从Channel:/dubbo/com.foo.BarService/providers订阅register和unregister事件。</li>
	<li>并向Key:/dubbo/com.foo.BarService/providers下，添加当前消费者的地址。</li>
	<li>服务消费方收到register和unregister事件后，从Key:/dubbo/com.foo.BarService/providers下获取提供者地址列表。</li>
	<li>服务监控中心启动时，从Channel:/dubbo/*订阅register和unregister，以及subscribe和unsubsribe事件。</li>
	<li>服务监控中心收到register和unregister事件后，从Key:/dubbo/com.foo.BarService/providers下获取提供者地址列表。</li>
	<li>服务监控中心收到subscribe和unsubsribe事件后，从Key:/dubbo/com.foo.BarService/consumers下获取消费者地址列表。</li>
</ol>


<p>选项：</p>
<ul>
	<li>可通过&lt;dubbo:registry group="dubbo" /&gt;设置redis中key的前缀，缺省为dubbo。</li>
	<li>可通过&lt;dubbo:registry cluster="replicate" /&gt;设置redis集群策略，缺省为failover。
	<ul>
		<li>failover: 只写入和读取任意一台，失败时重试另一台，需要服务器端自行配置数据同步。</li>
		<li>replicate: 在客户端同时写入所有服务器，只读取单台，服务器端不需要同步，注册中心集群增大，性能压力也会更大。</li>
	</ul>
	</li>
</ul>


<p>Config redis registry:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_559762" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"redis://10.20.153.10:6379"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Or:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_453171" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"redis://10.20.153.10:6379?backup=10.20.153.11:6379,10.20.153.12:6379"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Or:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_823102" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"redis"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.153.10:6379"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Or:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_430156" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"redis"</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"10.20.153.10:6379,10.20.153.11:6379,10.20.153.12:6379"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-Simple%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"></a>Simple注册中心</h3>

<p>(<a href="http://dubbo.io/Simple+Registry-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Simple+Registry-zh" title="Simple Registry-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Simple%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Dogfooding</b><br>注册中心本身就是一个普通的Dubbo服务，可以减少第三方依赖，使整体通讯方式一致。</td></tr></tbody></table></div>
<div class="panelMacro"><table class="noteMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/warning-3.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>适用性说明</b><br>此SimpleRegistryService只是简单实现，不支持集群，可作为自定义注册中心的参考，但不适合直接用于生产环境。</td></tr></tbody></table></div>

<p>Export simple registry service:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_745556" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;?</code><code class="xml keyword">xml</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0"</code> <code class="xml color1">encoding</code><code class="xml plain">=</code><code class="xml string">"UTF-8"</code><code class="xml plain">?&gt;</code></div><div class="line number2 index1 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">beans</code> <code class="xml color1">xmlns</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beans" "="">http://www.springframework.org/schema/beans"</a></code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:xsi</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.w3.org/2001/XMLSchema-instance" "="">http://www.w3.org/2001/XMLSchema-instance"</a></code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:dubbo</code><code class="xml plain">=</code><code class="xml string">"<a href="http://code.alibabatech.com/schema/dubbo" "="">http://code.alibabatech.com/schema/dubbo"</a></code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xsi:schemaLocation</code><code class="xml plain">=</code><code class="xml string">"<a href=""></a>http://www.springframework.org/schema/beans <a href=""></a>http://www.springframework.org/schema/beans/spring-beans-2.5.xsdhttp://code.alibabatech.com/schema/dubbo <a href="http://code.alibabatech.com/schema/dubbo/dubbo.xsd" "="">http://code.alibabatech.com/schema/dubbo/dubbo.xsd"</a></code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 当前应用信息配置 --&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"simple-registry"</code> <code class="xml plain">/&gt;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 暴露服务协议配置 --&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"9090"</code> <code class="xml plain">/&gt;</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 暴露服务配置 --&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.registry.RegistryService"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"registryService"</code> <code class="xml color1">registry</code><code class="xml plain">=</code><code class="xml string">"N/A"</code> <code class="xml color1">ondisconnect</code><code class="xml plain">=</code><code class="xml string">"disconnect"</code> <code class="xml color1">callbacks</code><code class="xml plain">=</code><code class="xml string">"1000"</code><code class="xml plain">&gt;</code></div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"subscribe"</code><code class="xml plain">&gt;&lt;</code><code class="xml keyword">dubbo:argument</code> <code class="xml color1">index</code><code class="xml plain">=</code><code class="xml string">"1"</code> <code class="xml color1">callback</code><code class="xml plain">=</code><code class="xml string">"true"</code> <code class="xml plain">/&gt;&lt;/</code><code class="xml keyword">dubbo:method</code><code class="xml plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"unsubscribe"</code><code class="xml plain">&gt;&lt;</code><code class="xml keyword">dubbo:argument</code> <code class="xml color1">index</code><code class="xml plain">=</code><code class="xml string">"1"</code> <code class="xml color1">callback</code><code class="xml plain">=</code><code class="xml string">"false"</code> <code class="xml plain">/&gt;&lt;/</code><code class="xml keyword">dubbo:method</code><code class="xml plain">&gt;</code></div><div class="line number17 index16 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:service</code><code class="xml plain">&gt;</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 简单注册中心实现，可自行扩展实现集群和状态同步 --&gt;</code></div><div class="line number20 index19 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">bean</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"registryService"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.registry.simple.SimpleRegistryService"</code> <code class="xml plain">/&gt;</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">beans</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Reference the simple registry service:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_284472" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"127.0.0.1:9090"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Or:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_192085" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.registry.RegistryService"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"simple"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml plain">... &gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_238055" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"127.0.0.1:9090"</code> <code class="xml color1">group</code><code class="xml plain">=</code><code class="xml string">"simple"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<h3><a name="UserGuide-zh-Simple%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83"></a>Simple监控中心</h3>
<p>(<a href="http://dubbo.io/Simple+Monitor-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Simple+Monitor-zh" title="Simple Monitor-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Simple%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83">#</a>)</p>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>监控中心也是一个标准的Dubbo服务，可以通过注册中心发现，也可以直连。</td></tr></tbody></table></div>

<div class="panelMacro"><table class="tipMacro"><colgroup><col width="24"><col></colgroup><tbody><tr><td valign="top"><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/check.gif" tppabs="http://10.20.160.198/wiki/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><a href="http://dubbo.io/Administrator+Guide-zh.htm#AdministratorGuide-zh-%E7%AE%80%E6%98%93%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%AE%89%E8%A3%85" tppabs="http://10.20.160.198/wiki/display/dubbo/Administrator+Guide-zh#AdministratorGuide-zh-%E7%AE%80%E6%98%93%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%AE%89%E8%A3%85">简易注册中心安装</a></td></tr></tbody></table></div>

<p>1.1 暴露一个简单监控中心服务到注册中心: (如果是用安装包，不需要自己写这个配置，如果是自己实现监控中心，则需要)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_137049" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">beans</code> <code class="xml color1">xmlns</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beans" "="">http://www.springframework.org/schema/beans"</a></code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:xsi</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.w3.org/2001/XMLSchema-instance" "="">http://www.w3.org/2001/XMLSchema-instance"</a></code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:dubbo</code><code class="xml plain">=</code><code class="xml string">"<a href="http://code.alibabatech.com/schema/dubbo" "="">http://code.alibabatech.com/schema/dubbo"</a></code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xsi:schemaLocation</code><code class="xml plain">=</code><code class="xml string">"<a href=""></a>http://www.springframework.org/schema/beans <a href=""></a>http://www.springframework.org/schema/beans/spring-beans-2.5.xsdhttp://code.alibabatech.com/schema/dubbo <a href="http://code.alibabatech.com/schema/dubbo/dubbo.xsd" "="">http://code.alibabatech.com/schema/dubbo/dubbo.xsd"</a></code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 当前应用信息配置 --&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"simple-monitor"</code> <code class="xml plain">/&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 连接注册中心配置 --&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"127.0.0.1:9090"</code> <code class="xml plain">/&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 暴露服务协议配置 --&gt;</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"7070"</code> <code class="xml plain">/&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 暴露服务配置 --&gt;</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.monitor.MonitorService"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"monitorService"</code> <code class="xml plain">/&gt;</code></div><div class="line number17 index16 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number18 index17 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">bean</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"monitorService"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.monitor.simple.SimpleMonitorService"</code> <code class="xml plain">/&gt;</code></div><div class="line number19 index18 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number20 index19 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">beans</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>1.2 通过注册中心发现监控中心服务:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_882001" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:monitor</code> <code class="xml color1">protocol</code><code class="xml plain">=</code><code class="xml string">"registry"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>dubbo.properties</b></div><div class="codeContent panelContent">
<div><div id="highlighter_290817" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">dubbo.monitor.protocol=registry</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>2.1 暴露一个简单监控中心服务，但不注册到注册中心: (如果是用安装包，不需要自己写这个配置，如果是自己实现监控中心，则需要)</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_402746" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">beans</code> <code class="xml color1">xmlns</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.springframework.org/schema/beans" "="">http://www.springframework.org/schema/beans"</a></code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:xsi</code><code class="xml plain">=</code><code class="xml string">"<a href="http://www.w3.org/2001/XMLSchema-instance" "="">http://www.w3.org/2001/XMLSchema-instance"</a></code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xmlns:dubbo</code><code class="xml plain">=</code><code class="xml string">"<a href="http://code.alibabatech.com/schema/dubbo" "="">http://code.alibabatech.com/schema/dubbo"</a></code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">xsi:schemaLocation</code><code class="xml plain">=</code><code class="xml string">"<a href=""></a>http://www.springframework.org/schema/beans <a href=""></a>http://www.springframework.org/schema/beans/spring-beans-2.5.xsdhttp://code.alibabatech.com/schema/dubbo <a href="http://code.alibabatech.com/schema/dubbo/dubbo.xsd" "="">http://code.alibabatech.com/schema/dubbo/dubbo.xsd"</a></code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 当前应用信息配置 --&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"simple-monitor"</code> <code class="xml plain">/&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 暴露服务协议配置 --&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">port</code><code class="xml plain">=</code><code class="xml string">"7070"</code> <code class="xml plain">/&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml comments">&lt;!-- 暴露服务配置 --&gt;</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.monitor.MonitorService"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"monitorService"</code> <code class="xml color1">registry</code><code class="xml plain">=</code><code class="xml string">"N/A"</code> <code class="xml plain">/&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">bean</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"monitorService"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.dubbo.monitor.simple.SimpleMonitorService"</code> <code class="xml plain">/&gt;</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number17 index16 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">beans</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>2.2 直连监控中心服务:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_490838" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:monitor</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"dubbo://127.0.0.1:7070/com.alibaba.dubbo.monitor.MonitorService"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_766106" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:monitor</code> <code class="xml color1">address</code><code class="xml plain">=</code><code class="xml string">"127.0.0.1:7070"</code> <code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>或：</p>
<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>dubbo.properties</b></div><div class="codeContent panelContent">
<div><div id="highlighter_882379" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">dubbo.monitor.address=</code><code class="java value">127.0</code><code class="java plain">.</code><code class="java value">0.1</code><code class="java plain">:</code><code class="java value">7070</code></div></div></td></tr></tbody></table></div></div>
</div></div>


<h2><a name="UserGuide-zh-Telnet%E5%91%BD%E4%BB%A4%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C"></a>Telnet命令参考手册</h2>
<p>(<a href="http://dubbo.io/Telnet+Command+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Telnet+Command+Reference-zh" title="Telnet Command Reference-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Telnet%E5%91%BD%E4%BB%A4%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C">#</a>)</p>

<p>Dubbo2.0.5以上版本服务提供端口支持telnet命令，<br>
使用如：</p>
<div class="panel" style="background-color: black;border-width: 1px;"><div class="panelContent" style="background-color: black;">
<p><font color="white">telnet localhost 20880</font></p>
</div></div>
<p>或者：</p>
<div class="panel" style="background-color: black;border-width: 1px;"><div class="panelContent" style="background-color: black;">
<p><font color="white">echo status | nc -i 1 localhost 20880</font></p>
</div></div>

<p>telnet命令可以扩展，参见：<a href="javascript:if(confirm(%27http://b2b-doc.alibaba-inc.com/display/RC/Dubbo_SPI_Reference  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://b2b-doc.alibaba-inc.com/display/RC/Dubbo_SPI_Reference%27" tppabs="http://b2b-doc.alibaba-inc.com/display/RC/Dubbo_SPI_Reference" class="external-link" rel="nofollow">扩展参考手册</a>第6条。<br>
status命令所检查的资源也可以扩展，参见：<a href="javascript:if(confirm(%27http://b2b-doc.alibaba-inc.com/display/RC/Dubbo_SPI_Reference  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://b2b-doc.alibaba-inc.com/display/RC/Dubbo_SPI_Reference%27" tppabs="http://b2b-doc.alibaba-inc.com/display/RC/Dubbo_SPI_Reference" class="external-link" rel="nofollow">扩展参考手册</a>第5条。</p>

<h3><a name="UserGuide-zh-ls"></a>ls</h3>
<p>(list services and methods)</p>

<p>ls</p>

<p>显示服务列表。</p>

<p>ls -l </p>

<p>显示服务详细信息列表。</p>

<p>ls XxxService</p>

<p>显示服务的方法列表。</p>

<p>ls -l XxxService</p>

<p>显示服务的方法详细信息列表。</p>

<h3><a name="UserGuide-zh-ps"></a>ps</h3>
<p>(print server ports and connections)</p>

<p>ps</p>

<p>显示服务端口列表。</p>

<p>ps -l </p>

<p>显示服务地址列表。</p>

<p>ps 20880</p>

<p>显示端口上的连接信息。</p>

<p>ps -l 20880</p>

<p>显示端口上的连接详细信息。</p>

<h3><a name="UserGuide-zh-cd"></a>cd</h3>
<p>(change default service)</p>

<p>cd XxxService</p>

<p>改变缺省服务，当设置了缺省服务，凡是需要输入服务名作为参数的命令，都可以省略服务参数。</p>

<p>cd /</p>

<p>取消缺省服务。</p>

<h3><a name="UserGuide-zh-pwd"></a>pwd</h3>
<p>(print working default service)</p>

<p>pwd</p>

<p>显示当前缺省服务。</p>

<h3><a name="UserGuide-zh-trace"></a>trace</h3>

<p>trace XxxService</p>

<p>跟踪1次服务任意方法的调用情况。</p>

<p>trace XxxService 10</p>

<p>跟踪10次服务任意方法的调用情况。</p>

<p>trace XxxService xxxMethod</p>

<p>跟踪1次服务方法的调用情况</p>

<p>trace XxxService xxxMethod 10</p>

<p>跟踪10次服务方法的调用情况。</p>

<h3><a name="UserGuide-zh-count"></a>count</h3>

<p>count XxxService</p>

<p>统计1次服务任意方法的调用情况。</p>

<p>count XxxService 10</p>

<p>统计10次服务任意方法的调用情况。</p>

<p>count XxxService xxxMethod</p>

<p>统计1次服务方法的调用情况。</p>

<p>count XxxService xxxMethod 10</p>

<p>统计10次服务方法的调用情况。</p>

<h3><a name="UserGuide-zh-invoke"></a>invoke</h3>

<p>invoke XxxService.xxxMethod({"prop": "value"})</p>

<p>调用服务的方法。</p>

<p>invoke xxxMethod({"prop": "value"})</p>

<p>调用服务的方法(自动查找包含此方法的服务)。</p>

<h3><a name="UserGuide-zh-status"></a>status </h3>

<p>status</p>

<p>显示汇总状态，该状态将汇总所有资源的状态，当全部OK时则显示OK，只要有一个ERROR则显示ERROR，只要有一个WARN则显示WARN。</p>

<p>status -l</p>

<p>显示状态列表。</p>

<h3><a name="UserGuide-zh-log"></a>log</h3>
<p><em>2.0.6以上版本支持</em></p>

<p>log debug <br>
修改dubbo logger的日志级别</p>

<p>log 100<br>
查看file logger的最后100字符的日志</p>

<h3><a name="UserGuide-zh-help"></a>help</h3>

<p>help</p>

<p>显示telnet命帮助信息。</p>

<p>help xxx</p>

<p>显示xxx命令的详细帮助信息。</p>

<h3><a name="UserGuide-zh-clear"></a>clear</h3>

<p>clear</p>

<p>清除屏幕上的内容。</p>

<p>clear 100</p>

<p>清除屏幕上的指定行数的内容。</p>

<h3><a name="UserGuide-zh-exit"></a>exit</h3>

<p>exit</p>

<p>退出当前telnet命令行。</p>
<h2><a name="UserGuide-zh-Maven%E6%8F%92%E4%BB%B6%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C"></a>Maven插件参考手册</h2>
<p>(<a href="http://dubbo.io/Maven+Plugin+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Maven+Plugin+Reference-zh" title="Maven Plugin Reference-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-Maven%E6%8F%92%E4%BB%B6%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C">#</a>)</p>

<h3><a name="UserGuide-zh-mvndubbo%3Aregistry"></a>mvn dubbo:registry</h3>

<p>mvn dubbo:registry<br>
以缺省的9090端口启动一个简易注册中心</p>

<p>mvn dubbo:registry -Dport=9099<br>
以指定的9099端口启动一个简易注册中心</p>

<h3><a name="UserGuide-zh-mvndubbo%3Acreate"></a>mvn dubbo:create</h3>
<p><font color="red">(尚未发布)</font></p>

<p>mvn dubbo:create<br>
生成demo服务提供者应用</p>

<p>mvn dubbo:create -Dapplication=xxx -Dpackage=com.alibaba.xxx -Dservice=XxxService,YyyService -Dversion=1.0.0<br>
生成指定接口和版本的服务提供者应用</p>
<h2><a name="UserGuide-zh-%E6%9C%8D%E5%8A%A1%E5%8C%96%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"></a>服务化最佳实践</h2>

<p>(<a href="http://dubbo.io/Service+Best+Practices-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Service+Best+Practices-zh" title="Service Best Practices-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%9C%8D%E5%8A%A1%E5%8C%96%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">#</a>)</p>

<h3><a name="UserGuide-zh-%E5%88%86%E5%8C%85"></a>分包</h3>

<ul>
	<li>建议将服务接口，服务模型，服务异常等均放在API包中，因为服务模型及异常也是API的一部分，<br>
同时，这样做也符合分包原则：重用发布等价原则(REP)，共同重用原则(CRP)</li>
	<li>如果需要，也可以考虑在API包中放置一份spring的引用配置，这样使用方，只需在Spring加载过程中引用此配置即可，<br>
配置建议放在模块的包目录下，以免冲突，如：com/alibaba/china/xxx/dubbo-reference.xml</li>
</ul>


<h3><a name="UserGuide-zh-%E7%B2%92%E5%BA%A6"></a>粒度</h3>

<ul>
	<li>服务接口尽可能大粒度，每个服务方法应代表一个功能，而不是某功能的一个步骤，否则将面临分布式事务问题，Dubbo暂未提供分布式事务支持。</li>
	<li>服务接口建议以业务场景为单位划分，并对相近业务做抽象，防止接口数量爆炸</li>
	<li>不建议使用过于抽象的通用接口，如：Map query(Map)，这样的接口没有明确语义，会给后期维护带来不便。</li>
</ul>


<h3><a name="UserGuide-zh-%E7%89%88%E6%9C%AC"></a>版本</h3>

<ul>
	<li>每个接口都应定义版本号，为后续不兼容升级提供可能，如：&lt;dubbo:service interface="com.xxx.XxxService" version="1.0" /&gt;</li>
	<li>建议使用两位版本号，因为第三位版本号通常表示兼容升级，只有不兼容时才需要变更服务版本。</li>
	<li>当不兼容时，先升级一半提供者为新版本，再将消费者全部升为新版本，然后将剩下的一半提供者升为新版本。</li>
</ul>


<h3><a name="UserGuide-zh-%E5%85%BC%E5%AE%B9%E6%80%A7"></a>兼容性</h3>

<ul>
	<li>服务接口增加方法，或服务模型增加字段，可向后兼容，删除方法或删除字段，将不兼容，枚举类型新增字段也不兼容，需通过变更版本号升级。</li>
	<li>各协议的兼容性不同，参见： <a href="http://dubbo.io/Protocol+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Protocol+Reference-zh" title="Protocol Reference-zh">服务协议</a></li>
</ul>


<h3><a name="UserGuide-zh-%E6%9E%9A%E4%B8%BE%E5%80%BC"></a>枚举值</h3>

<ul>
	<li>如果是完备集，可以用Enum，比如：ENABLE, DISABLE。</li>
	<li>如果是业务种类，以后明显会有类型增加，不建议用Enum，可以用String代替。</li>
	<li>如果是在返回值中用了Enum，并新增了Enum值，建议先升级服务消费方，这样服务提供方不会返回新值。</li>
	<li>如果是在传入参数中用了Enum，并新增了Enum值，建议先升级服务提供方，这样服务消费方不会传入新值。</li>
</ul>


<h3><a name="UserGuide-zh-%E5%BA%8F%E5%88%97%E5%8C%96"></a>序列化</h3>

<ul>
	<li>服务参数及返回值建议使用POJO对象，即通过set,get方法表示属性的对象。</li>
	<li>服务参数及返回值不建议使用接口，因为数据模型抽象的意义不大，并且序列化需要接口实现类的元信息，并不能起到隐藏实现的意图。</li>
	<li>服务参数及返回值都必需是byValue的，而不能是byRef的，消费方和提供方的参数或返回值引用并不是同一个，只是值相同，Dubbo不支持引用远程对象。</li>
</ul>


<h3><a name="UserGuide-zh-%E5%BC%82%E5%B8%B8"></a>异常</h3>

<ul>
	<li>建议使用异常汇报错误，而不是返回错误码，异常信息能携带更多信息，以及语义更友好，</li>
	<li>如果担心性能问题，在必要时，可以通过override掉异常类的fillInStackTrace()方法为空方法，使其不拷贝栈信息，</li>
	<li>查询方法不建议抛出checked异常，否则调用方在查询时将过多的try...catch，并且不能进行有效处理，</li>
	<li>服务提供方不应将DAO或SQL等异常抛给消费方，应在服务实现中对消费方不关心的异常进行包装，否则可能出现消费方无法反序列化相应异常。</li>
</ul>


<h3><a name="UserGuide-zh-%E8%B0%83%E7%94%A8"></a>调用</h3>

<ul>
	<li>不要只是因为是Dubbo调用，而把调用Try-Catch起来。Try-Catch应该加上合适的回滚边界上。</li>
	<li>对于输入参数的校验逻辑在Provider端要有。如有性能上的考虑，服务实现者可以考虑在API包上加上服务Stub类来完成检验。</li>
</ul>

<h2><a name="UserGuide-zh-%E6%8E%A8%E8%8D%90%E7%94%A8%E6%B3%95"></a>推荐用法</h2>
<p>(<a href="http://dubbo.io/Recommended+Usage-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Recommended+Usage-zh" title="Recommended Usage-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%8E%A8%E8%8D%90%E7%94%A8%E6%B3%95">#</a>)</p>

<h4><a name="UserGuide-zh-%E5%9C%A8Provider%E4%B8%8A%E5%B0%BD%E9%87%8F%E5%A4%9A%E9%85%8D%E7%BD%AEConsumer%E7%AB%AF%E5%B1%9E%E6%80%A7"></a>在Provider上尽量多配置Consumer端属性</h4>

<p>原因如下：</p>
<ol>
	<li>作服务的提供者，比服务使用方<font color="red">更清楚</font>服务性能参数，如调用的超时时间，合理的重试次数，等等</li>
	<li>在Provider配置后，Consumer不配置则会使用Provider的配置值，即Provider配置可以作为Consumer的缺省值。<br>
否则，Consumer会使用<font color="brown">Consumer端的全局设置</font>，这对于Provider<font color="red"><b>不可控的</b></font>，并且往往是<font color="red"><b>不合理的</b></font>。<br>
PS: 配置的覆盖规则：1) 方法级配置别优于接口级别，即小Scope优先 2) Consumer端配置 优于 Provider配置 优于 全局配置，最后是Dubbo Hard Code的配置值（见配置文档）<br>
配置的覆盖规则详见： <a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-ConfigurationReference">Dubbo配置参考手册</a></li>
</ol>



<p>Provider上尽量多配置Consumer端的属性，让Provider实现者一开始就思考Provider服务特点、服务质量的问题。</p>

<p>示例：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_341779" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.hello.api.HelloService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"helloService"</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">timeout</code><code class="xml plain">=</code><code class="xml string">"300"</code> <code class="xml color1">retry</code><code class="xml plain">=</code><code class="xml string">"2"</code> <code class="xml color1">loadbalance</code><code class="xml plain">=</code><code class="xml string">"random"</code> <code class="xml color1">actives</code><code class="xml plain">=</code><code class="xml string">"0"</code></div><div class="line number3 index2 alt2"><code class="xml plain">/&gt;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.hello.api.WorldService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"helloService"</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">timeout</code><code class="xml plain">=</code><code class="xml string">"300"</code> <code class="xml color1">retry</code><code class="xml plain">=</code><code class="xml string">"2"</code> <code class="xml color1">loadbalance</code><code class="xml plain">=</code><code class="xml string">"random"</code> <code class="xml color1">actives</code><code class="xml plain">=</code><code class="xml string">"0"</code> <code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"findAllPerson"</code> <code class="xml color1">timeout</code><code class="xml plain">=</code><code class="xml string">"10000"</code> <code class="xml color1">retries</code><code class="xml plain">=</code><code class="xml string">"9"</code> <code class="xml color1">loadbalance</code><code class="xml plain">=</code><code class="xml string">"leastactive"</code> <code class="xml color1">actives</code><code class="xml plain">=</code><code class="xml string">"5"</code> <code class="xml plain">/&gt;</code></div><div class="line number8 index7 alt1"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code><code class="xml plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>在Provider可以配置的Consumer端属性有：</p>

<ol>
	<li><b>timeout</b>，方法调用超时</li>
	<li><b>retries</b>，失败重试次数，缺省是2（表示加上第一次调用，会调用3次）</li>
	<li><b>loadbalance</b>，负载均衡算法（有多个Provider时，如何挑选Provider调用），缺省是随机（random）。<br>
还可以有轮训(roundrobin)、最不活跃优先（leastactive，指从Consumer端并发调用最好的Provider，可以减少的反应慢的Provider的调用，因为反应更容易累积并发的调用）</li>
	<li><b>actives</b>，消费者端，最大并发调用限制，即当Consumer对一个服务的并发调用到上限后，新调用会Wait直到超时。<br>
在方法上配置（dubbo:method ）则并发限制针对方法，在接口上配置（dubbo:service），则并发限制针对服务。</li>
</ol>


<p>详细配置说明参见：<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-ConfigurationReference">Dubbo配置参考手册</a>&nbsp;</p>

<h4><a name="UserGuide-zh-Provider%E4%B8%8A%E9%85%8D%E7%BD%AE%E5%90%88%E7%90%86%E7%9A%84Provider%E7%AB%AF%E5%B1%9E%E6%80%A7"></a>Provider上配置合理的Provider端属性</h4>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_290176" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:protocol</code> <code class="xml color1">threads</code><code class="xml plain">=</code><code class="xml string">"200"</code> <code class="xml plain">/&gt;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml color1">interface</code><code class="xml plain">=</code><code class="xml string">"com.alibaba.hello.api.HelloService"</code> <code class="xml color1">version</code><code class="xml plain">=</code><code class="xml string">"1.0.0"</code> <code class="xml color1">ref</code><code class="xml plain">=</code><code class="xml string">"helloService"</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml color1">executes</code><code class="xml plain">=</code><code class="xml string">"200"</code> <code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:method</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"findAllPerson"</code> <code class="xml color1">executes</code><code class="xml plain">=</code><code class="xml string">"50"</code> <code class="xml plain">/&gt;</code></div><div class="line number6 index5 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">dubbo:service</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>Provider上可以配置的Provider端属性有：</p>

<ol>
	<li><b>threads</b>，服务线程池大小</li>
	<li><b>executes</b>，一个服务提供者并行执行请求上限，即当Provider对一个服务的并发调用到上限后，新调用会Wait（Consumer可能到超时）。在方法上配置（dubbo:method ）则并发限制针对方法，在接口上配置（dubbo:service），则并发限制针对服务。</li>
</ol>


<h4><a name="UserGuide-zh-%E9%85%8D%E7%BD%AE%E4%B8%8A%E7%AE%A1%E7%90%86%E4%BF%A1%E6%81%AF"></a>配置上管理信息</h4>

<p>目前有<font color="red"><b>负责人</b></font>信息和<font color="red"><b>组织</b></font>信息（用于区分站点）。</p>

<p>有问题时便于的找到服务的负责人，至少写<b>两个人</b>以便备份。</p>

<p>负责人和组织的信息可以在注册中心的上看到。</p>

<p>示例：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>应用配置负责人、组织</b></div><div class="codeContent panelContent">
<div><div id="highlighter_974377" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:application</code> <code class="xml plain">owner=”ding.lid,william.liangf” organization=”intl” /&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>service配置负责人</b></div><div class="codeContent panelContent">
<div><div id="highlighter_885008" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:service</code> <code class="xml plain">owner=”ding.lid,william.liangf” /&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>reference配置负责人</b></div><div class="codeContent panelContent">
<div><div id="highlighter_719010" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:reference</code> <code class="xml plain">owner=”ding.lid,william.liangf” /&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>dubbo:service、dubbo:reference没有配置负责人，则使用dubbo:application设置的负责人。</p>

<h4><a name="UserGuide-zh-%E9%85%8D%E7%BD%AE%E4%B8%8ADubbo%E7%BC%93%E5%AD%98%E6%96%87%E4%BB%B6"></a>配置上Dubbo缓存文件</h4>

<p>配置方法如下：</p>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>提供者列表缓存文件</b></div><div class="codeContent panelContent">
<div><div id="highlighter_982955" class="syntaxhighlighter nogutter  xml"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">dubbo:registry</code> <code class="xml plain">file=”${user.home}/output/dubbo.cache” /&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>注意：</p>

<ol>
	<li>文件的路径，应用可以根据需要调整，保证这个文件<font color="red">不会</font>在发布过程中被清除。</li>
	<li>如果有多个应用进程注意不要使用同一个文件，避免内容被<font color="red">覆盖</font>。</li>
</ol>


<p>这个文件会缓存：</p>

<ol>
	<li>注册中心的列表</li>
	<li>服务提供者列表</li>
</ol>


<p>有了这项配置后，当应用重启过程中，Dubbo注册中心不可用时则应用会从这个缓存文件读取服务提供者列表的信息，进一步保证应用可靠性。</p>

<h4><a name="UserGuide-zh-%E7%9B%91%E6%8E%A7%E9%85%8D%E7%BD%AE"></a>监控配置</h4>


<h5><a name="UserGuide-zh-1.%E4%BD%BF%E7%94%A8%E5%9B%BA%E5%AE%9A%E7%AB%AF%E5%8F%A3%E6%9A%B4%E9%9C%B2%E6%9C%8D%E5%8A%A1%EF%BC%8C%E8%80%8C%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8%E9%9A%8F%E6%9C%BA%E7%AB%AF%E5%8F%A3"></a>1. 使用固定端口暴露服务，而不要使用随机端口</h5>

<p>这样在注册中心推送有延迟的情况下，消费者通过缓存列表也能调用到原地址，保证调用成功。</p>


<h5><a name="UserGuide-zh-3.%E4%BD%BF%E7%94%A8Dragoon%E7%9A%84http%E7%9B%91%E6%8E%A7%E9%A1%B9%E7%9B%91%E6%8E%A7%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E4%B8%8A%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E6%96%B9"></a>3. 使用Dragoon的http监控项监控注册中心上服务提供方</h5>

<p>Dragoon监控服务在注册中心上的状态：<a href="javascript:if(confirm(%27http://dubbo-reg1.hst.xyi.cn.alidc.net:8080/status/com.alibaba.morgan.member.MemberService:1.0.5  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://dubbo-reg1.hst.xyi.cn.alidc.net:8080/status/com.alibaba.morgan.member.MemberService:1.0.5%27" tppabs="http://dubbo-reg1.hst.xyi.cn.alidc.net:8080/status/com.alibaba.morgan.member.MemberService:1.0.5" class="external-link" rel="nofollow">http://dubbo-reg1.hst.xyi.cn.alidc.net:8080/status/com.alibaba.morgan.member.MemberService:1.0.5</a>，确保注册中心上有该服务的存在。</p>

<h5><a name="UserGuide-zh-4.%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E6%96%B9%EF%BC%8C%E4%BD%BF%E7%94%A8Dragoon%E7%9A%84telnet%E6%88%96shell%E7%9B%91%E6%8E%A7%E9%A1%B9"></a>4. 服务提供方，使用Dragoon的telnet或shell监控项</h5>

<p>监控服务提供者端口状态：echo status | nc --i 1 20880 | grep OK | wc --l，其中的20880为服务端口</p>

<h5><a name="UserGuide-zh-5.%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E6%96%B9%EF%BC%8C%E9%80%9A%E8%BF%87%E5%B0%86%E6%9C%8D%E5%8A%A1%E5%BC%BA%E5%88%B6%E8%BD%AC%E5%9E%8B%E4%B8%BAEchoService%EF%BC%8C%E5%B9%B6%E8%B0%83%E7%94%A8%24echo%28%29%E6%B5%8B%E8%AF%95%E8%AF%A5%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%8F%90%E4%BE%9B%E8%80%85%E6%98%AF%E5%8F%AF%E7%94%A8"></a>5. 服务消费方，通过将服务强制转型为EchoService，并调用$echo()测试该服务的提供者是可用</h5>

<p>如 assertEqauls(“OK”, ((EchoService)memberService).$echo(“OK”));</p>


<h4><a name="UserGuide-zh-%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8dubbo.properties%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE%EF%BC%8C%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%E5%AF%B9%E5%BA%94XML%E9%85%8D%E7%BD%AE"></a>不要使用dubbo.properties文件配置，推荐使用对应XML配置</h4>

<p>Dubbo2中所有的配置项都可以Spring配置中，并且可以针对单个服务配置。</p>

<p># 如完全不配置使用Dubbo缺省值，参见<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-ConfigurationReference">Dubbo配置参考手册</a>中的说明。</p>

<p>在Dubbo1中需要在dubbo.properties文件中的配置项，Dubbo2中配置示例如下：</p>

<h5><a name="UserGuide-zh-1.%E5%BA%94%E7%94%A8%E5%90%8D%26nbsp%3B"></a>1. 应用名&nbsp;</h5>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_618156" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">&lt;dubbo:application name=</code><code class="java string">"myalibaba"</code> <code class="java plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>对应dubbo.properties中的Key名dubbo.application.name</p>

<h5><a name="UserGuide-zh-2.%26nbsp%3B%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%9C%B0%E5%9D%80"></a>2.&nbsp;注册中心地址</h5>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_493355" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">&lt;dubbo:registry address=</code><code class="java string">"11.22.33.44:9090"</code> <code class="java plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>对应dubbo.properties中的Key名dubbo.registry.address</p>

<h5><a name="UserGuide-zh-3.%E8%B0%83%E7%94%A8%E8%B6%85%E6%97%B6"></a>3. 调用超时</h5>

<p>可以在多个配置项设置超时，由上至下<font color="#ff0000"><b>覆盖</b></font>（即上面的优先），示例如下：</p>

<p># 其它的参数（retries、loadbalance、actives等）的覆盖策略也一样。</p>

<p>提供者端特定方法的配置</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_219509" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">&lt;dubbo:service </code><code class="java keyword">interface</code><code class="java plain">=</code><code class="java string">"com.alibaba.xxx.XxxService"</code> <code class="java plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">&lt;dubbo:method name=</code><code class="java string">"findPerson"</code> <code class="java plain">timeout=</code><code class="java string">"1000"</code> <code class="java plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="java plain">&lt;/dubbo:service&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>提供者端特定接口的配置</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_678914" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">&lt;dubbo:service </code><code class="java keyword">interface</code><code class="java plain">=</code><code class="java string">"com.alibaba.xxx.XxxService"</code> <code class="java plain">timeout=</code><code class="java string">"200"</code> <code class="java plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p># timeout可以在多处设置，配置项及覆盖规则详见：&nbsp;<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-ConfigurationReference">Dubbo配置参考手册</a></p>

<p>全局配置项值，对应dubbo.properties中的Key名dubbo.service.invoke.timeout</p>

<h5><a name="UserGuide-zh-5.%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%E5%8D%8F%E8%AE%AE%E3%80%81%E6%9C%8D%E5%8A%A1%E7%9A%84%E7%9B%91%E5%90%AC%E7%AB%AF%E5%8F%A3"></a>5. 服务提供者协议、服务的监听端口</h5>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_795093" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">&lt;dubbo:protocol name=</code><code class="java string">"dubbo"</code> <code class="java plain">port=</code><code class="java string">"20880"</code> <code class="java plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>对应dubbo.properties中的Key名dubbo.service.protocol、dubbo.service.server.port</p>

<h5><a name="UserGuide-zh-4.%26nbsp%3B%E6%9C%8D%E5%8A%A1%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%A4%A7%E5%B0%8F"></a>4.&nbsp;服务线程池大小</h5>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_654450" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">&lt;dubbo:protocol threads=</code><code class="java string">"100"</code> <code class="java plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>

<p>对应dubbo.properties中的Key名dubbo.service.max.thread.threads.size</p>

<h5><a name="UserGuide-zh-6.%E6%B6%88%E8%B4%B9%E8%80%85%E5%90%AF%E5%8A%A8%E6%97%B6%EF%BC%8C%E6%B2%A1%E6%9C%89%E6%8F%90%E4%BE%9B%E8%80%85%E6%98%AF%E5%90%A6%E6%8A%9B%E5%BC%82%E5%B8%B8FastFail"></a>6. 消费者启动时，没有提供者是否抛异常Fast-Fail</h5>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_942555" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">&lt;dubbo:reference </code><code class="java keyword">interface</code><code class="java plain">=</code><code class="java string">"com.alibaba.xxx.XxxService"</code> <code class="java plain">check=</code><code class="java string">"false"</code> <code class="java plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>


<p>对应dubbo.properties中的Key名alibaba.intl.commons.dubbo.service.allow.no.provider</p>
<h2><a name="UserGuide-zh-%E5%AE%B9%E9%87%8F%E8%A7%84%E5%88%92"></a>容量规划</h2>
<p>(<a href="http://dubbo.io/Capacity+Estimated-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Capacity+Estimated-zh" title="Capacity Estimated-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%AE%B9%E9%87%8F%E8%A7%84%E5%88%92">#</a>)</p>

<p>以下数据供参考：</p>

<h4><a name="UserGuide-zh-%E4%BD%BF%E7%94%A8Dubbo%E7%9A%84%E4%BC%9A%E5%91%98%E6%9C%8D%E5%8A%A1%E9%A1%B9%E7%9B%AE"></a>使用Dubbo的会员服务项目</h4>

<ul>
	<li>每天接收4亿次远程调用</li>
	<li>使用12台网站标配机器提供服务(8核CPU,8G内存)</li>
	<li>平均负载在1以下(对于8核CPU负载很低)</li>
	<li>平均响应时间2.3到2.5毫秒，网络开销约占1.5到1.6毫秒(和数据包大小有关)</li>
</ul>


<h4><a name="UserGuide-zh-%E4%BD%BF%E7%94%A8Dubbo%E7%9A%84%E4%BA%A7%E5%93%81%E6%8E%88%E6%9D%83%E6%9C%8D%E5%8A%A1%E9%A1%B9%E7%9B%AE"></a>使用Dubbo的产品授权服务项目</h4>

<ul>
	<li>每天接收3亿次远程调用</li>
	<li>使用8台网站标配机器提供服务(8核CPU,8G内存)</li>
	<li>平均负载在1以下(对于8核CPU负载很低)</li>
	<li>平均响应时间1.4到2.8毫秒，网络开销约占1.0到1.1毫秒(和数据包大小有关)</li>
</ul>

<h2><a name="UserGuide-zh-%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E5%8C%85"></a>基准测试工具包</h2>
<p>(<a href="http://dubbo.io/Benchmark+Test+Toolkit-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Benchmark+Test+Toolkit-zh" title="Benchmark Test Toolkit-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E5%8C%85">#</a>)</p>

<h4><a name="UserGuide-zh-%E4%B8%8B%E8%BD%BDbenchmark%E5%8E%8B%E7%BC%A9%E5%8C%85%EF%BC%8C%E5%B9%B6%E8%A7%A3%E5%8E%8B"></a>下载benchmark压缩包，并解压</h4>
<p><a href="javascript:if(confirm(%27http://code.alibabatech.com/wiki/download/attachments/7669075/dubbo.benchmark-2.0.14.tar.gz  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://code.alibabatech.com/wiki/download/attachments/7669075/dubbo.benchmark-2.0.14.tar.gz%27" tppabs="http://code.alibabatech.com/wiki/download/attachments/7669075/dubbo.benchmark-2.0.14.tar.gz" class="external-link" rel="nofollow">dubbo.benchmark-2.0.14.tar.gz</a></p>

<h4><a name="UserGuide-zh-%E9%98%85%E8%AF%BBReadMe.txt%EF%BC%88%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B%EF%BC%8C%E8%AF%B7%E4%BB%A5%E5%8E%8B%E7%BC%A9%E5%8C%85%E5%86%85%E7%9A%84%E4%B8%BA%E5%87%86%EF%BC%89"></a>阅读ReadMe.txt（内容如下，请以压缩包内的为准）</h4>
<p>一、新建一个benchmark工程，如demo.benchmark<br>
二、导入自己服务的接口api包和dubbo.benchmark.jar(解压dubbo.benchmark.tar.gz，在lib目录下)<br>
三、新建一个类，实现AbstractClientRunnable<br>
    a、实现父类的构造函数<br>
	b、实现invoke方法，通过serviceFactory创建本地接口代理，并实现自己的业务逻辑，如下</p>
        <div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_368430" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">public</code> <code class="java plain">Object invoke(ServiceFactory serviceFactory) {</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">DemoService demoService = (DemoService) serviceFactory.get(DemoService.</code><code class="java keyword">class</code><code class="java plain">);</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">return</code> <code class="java plain">demoService.sendRequest(</code><code class="java string">"hello"</code><code class="java plain">);</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>四、将自己的benchmark工程打成jar包,如demo.benchmark.jar<br>
五、将demo.benchmark.jar 和服务的api包放到dubbo.benchmark/lib目录下<br>
六、配置duubo.properties<br>
七、运行run.bat(windows)或run.sh(linux)</p>

<p>如想测试dubbo的不同版本，直接替换lib下的dubbo的jar包即可。</p>
<h2><a name="UserGuide-zh-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A"></a>性能测试报告</h2>
<p>(<a href="http://dubbo.io/Performance+Test+Report-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Performance+Test+Report-zh" title="Performance Test Report-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A">#</a>)</p>

<h3><a name="UserGuide-zh-%E6%B5%8B%E8%AF%95%E8%AF%B4%E6%98%8E"></a>测试说明</h3>

<p>a、本次性能测试，测试了dubbo2.0所有支持的协议在不同大小和数据类型下的表现，并与dubbo1.0进行了对比。</p>

<p>b、整体性能相比1.0有了提升，平均提升10%，使用dubbo2.0新增的dubbo序列化还能获得10%~50%的性能提升，详见下面的性能数据。</p>

<p>c、稳定性测试中由于将底层通信框架从mina换成netty，old区对象的增长大大减少，50小时运行，增长不到200m，无fullgc。（可以确认为mina在高并发下的设计缺陷）</p>

<p>d、存在的问题：在50k数据的时候2.0性能不如1.0，怀疑可能是缓冲区设置的问题，下版本会进一步确认。
<br class="atl-forced-newline"></p>

<h3><a name="UserGuide-zh-%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83"></a>测试环境</h3>

<h4><a name="UserGuide-zh-"></a><font color="#000000">2.1</font> <font color="#000000">硬件部署与参数调整</font></h4>

<p>主机/ip<br>
硬件配置<br>
操作系统及参数调整</p>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd"> <font color="black">10.20.153.11</font> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> <font color="black">机型</font> </td>
<td class="confluenceTd"> <font color="black">Tecal&nbsp;BH620</font> </td>
</tr>
<tr>
<td class="confluenceTd"> <font color="black">CPU</font> </td>
<td class="confluenceTd"> <font color="black">model&nbsp;name :&nbsp;Intel(R)&nbsp;Xeon(R)&nbsp;CPU&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E5520&nbsp;&nbsp;@&nbsp;2.27GHz cache&nbsp;size :&nbsp;8192&nbsp;KB processor_count&nbsp;:&nbsp;16</font> </td>
</tr>
<tr>
<td class="confluenceTd"> <font color="black">内存</font> </td>
<td class="confluenceTd"> <font color="black">Total&nbsp;System&nbsp;Memory:&nbsp;6G Hardware&nbsp;Memory&nbsp;Info:&nbsp; Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown</font> </td>
</tr>
<tr>
<td class="confluenceTd"> <font color="black">网络</font> </td>
<td class="confluenceTd"> <font color="black">Total&nbsp;System&nbsp;Memory:&nbsp;6G Hardware&nbsp;Memory&nbsp;Info:&nbsp; Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown</font> </td>
</tr>
<tr>
<td class="confluenceTd"> <font color="black">磁盘</font> </td>
<td class="confluenceTd"> <font color="black">/dev/sda:&nbsp;597.9&nbsp;GB,</font> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> <font color="black">2.6.18-128.el5xen&nbsp;x86_64</font> </td>
</tr>
<tr>
<td class="confluenceTd"> <font color="black">10.20.153.10</font> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> <font color="black">机型</font> </td>
<td class="confluenceTd"> <font color="black">Tecal&nbsp;BH620</font> </td>
</tr>
<tr>
<td class="confluenceTd"> <font color="black">CPU</font> </td>
<td class="confluenceTd"> <font color="black">model&nbsp;name :&nbsp;Intel(R)&nbsp;Xeon(R)&nbsp;CPU&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E5520&nbsp;&nbsp;@&nbsp;2.27GHz cache&nbsp;size :&nbsp;8192&nbsp;KB processor_count&nbsp;:&nbsp;16</font> </td>
</tr>
<tr>
<td class="confluenceTd"> <font color="black">内存</font> </td>
<td class="confluenceTd"> <font color="black">Total&nbsp;System&nbsp;Memory:&nbsp;6G Hardware&nbsp;Memory&nbsp;Info:&nbsp; Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown Size:&nbsp;4096MB,&nbsp;1066MHz(0.9ns) Size:&nbsp;NoModule,&nbsp;Unknown</font> </td>
</tr>
<tr>
<td class="confluenceTd"> <font color="black">网络</font> </td>
<td class="confluenceTd"> <font color="black">eth0:&nbsp;Link&nbsp;is&nbsp;up&nbsp;at&nbsp;1000&nbsp;Mbps,&nbsp;full&nbsp;duplex.&nbsp;peth0:&nbsp;Link&nbsp;is&nbsp;up&nbsp;at&nbsp;1000&nbsp;Mbps,&nbsp;full&nbsp;duplex.</font> </td>
</tr>
<tr>
<td class="confluenceTd"> <font color="black">磁盘</font> </td>
<td class="confluenceTd"> <font color="black">/dev/sda:&nbsp;597.9&nbsp;GB,</font> </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> <font color="black">2.6.18-128.el5xen&nbsp;x86_64</font> </td>
</tr>
</tbody></table>
</div>

<p><br class="atl-forced-newline"></p>

<h4><a name="UserGuide-zh-"></a><font color="#000000">2.2</font> <font color="#000000">软件架构</font></h4>

<p>主机/ip<br>
软件名称及版本<br>
关键参数</p>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> <font color="black">java&nbsp;version&nbsp;"1.6.0_18" Java(TM)&nbsp;SE&nbsp;Runtime&nbsp;Environment&nbsp;(build&nbsp;1.6.0_18-b07) Java&nbsp;HotSpot(TM)&nbsp;64-Bit&nbsp;Server&nbsp;VM&nbsp;(build&nbsp;16.0-b13,&nbsp;mixed&nbsp;mode)</font> </td>
<td class="confluenceTd"> <font color="black">-server&nbsp;-Xmx2g&nbsp;-Xms2g&nbsp;-Xmn256m&nbsp;-XX:PermSize=128m&nbsp;-Xss256k&nbsp;-XX:+DisableExplicitGC&nbsp;-XX:+UseConcMarkSweepGC&nbsp;-XX:+CMSParallelRemarkEnabled&nbsp;-XX:+UseCMSCompactAtFullCollection&nbsp;-XX:LargePageSizeInBytes=128m&nbsp;-XX:+UseFastAccessorMethods&nbsp;-XX:+UseCMSInitiatingOccupancyOnly&nbsp;-XX:CMSInitiatingOccupancyFraction=70</font> </td>
</tr>
<tr>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> <font color="black">jboss-4.0.5.GA</font> </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> <font color="black">httpd-2.0.61</font> </td>
<td class="confluenceTd"> <font color="black">KeepAlive&nbsp;On MaxKeepAliveRequests&nbsp;100000 KeepAliveTimeout&nbsp;180 MaxRequestsPerChild&nbsp;1000000 &lt;IfModule&nbsp;worker.c&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StartServers&nbsp;5 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MaxClients&nbsp;1024 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MinSpareThreads&nbsp;25 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MaxSpareThreads&nbsp;75 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ThreadsPerChild&nbsp;64 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ThreadLimit&nbsp;128 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ServerLimit&nbsp;16 &lt;/IfModule&gt;</font> </td>
</tr>
</tbody></table>
</div>

<p><br class="atl-forced-newline"></p>

<h3><a name="UserGuide-zh-%E6%B5%8B%E8%AF%95%E7%9B%AE%E7%9A%84"></a>测试目的</h3>

<p><br class="atl-forced-newline"></p>

<h4><a name="UserGuide-zh-"></a><font color="#000000">3.1</font> <font color="#000000">期望性能指标</font><font color="#000000">(</font><font color="#000000">量化</font><font color="#000000">)</font></h4>

<p>场景名称<br>
对应指标名称<br>
期望值范围<br>
实际值<br>
是否满足期望(是/否)</p>
<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd"> 1k数据 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 响应时间 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 0.9ms <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 0.79ms <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 是 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> 1k数据 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> TPS <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 10000 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 11994 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 是 <br class="atl-forced-newline"> </td>
</tr>
</tbody></table>
</div>

<p><br class="atl-forced-newline"></p>

<h4><a name="UserGuide-zh-"></a><font color="#000000">3.2</font> <font color="#000000">期望运行状况</font><font color="#000000">(</font><font color="#000000">非量化，可选</font><font color="#000000">)</font></h4>

<p>2.0性能不低于1.0,2.0和1.0互调用的性能无明显下降。 除了50k string其余皆通过<br>
JVM内存运行稳定，无OOM，堆内存中无不合理的大对象的占用。通过<br>
CPU、内存、网络、磁盘、文件句柄占用平稳。通过<br>
无频繁线程锁，线程数平稳。通过<br>
业务线程负载均衡。通过<br>
&nbsp;</p>

<h3><a name="UserGuide-zh-%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC"></a>测试脚本</h3>

<p>1、性能测试场景（10并发）</p>

<p>a、传入1kString，不做任何处理，原样返回</p>

<p>b、传入50kString，不做任何处理，原样返回</p>

<p>c、传入200kString，不做任何处理，原样返回</p>

<p>d、传入1k pojo（嵌套的复杂person对象），不做任何处理，原样返回</p>

<p>上述场景在dubbo1.0\dubbo2.0(hessian2序列化)\dubbo2.0(dubbo序列化)\rmi\hessian3.2.0\http(json序列化)进行10分钟的性能测试。 主要考察序列化和网络IO的性能，因此服务端无任何业务逻辑。取10并发是考虑到http协议在高并发下对CPU的使用率较高可能会先打到瓶颈。
<br class="atl-forced-newline"></p>

<p>2、并发场景（20并发）</p>

<p>传入1kString，在服务器段循环1w次，每次重新生成一个随机数然后进行拼装。</p>

<p>考察业务线程是否能够分配到每个CPU上。
<br class="atl-forced-newline"></p>

<p>3、稳定性场景（20并发）</p>

<p>同时调用1个参数为String（5k）方法，1个参数为person对象的方法，1个参数为map（值为3个person）的方法，持续运行50小时。
<br class="atl-forced-newline"></p>

<p>4、高压力场景（20并发）</p>

<p>在稳定性场景的基础上，将提供者和消费者布置成均为2台（一台机器2个实例），且String的参数从20byte到200k，每隔10分钟随机变换。
<br class="atl-forced-newline"></p>

<h3><a name="UserGuide-zh-%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C"></a>测试结果</h3>

<h4><a name="UserGuide-zh-"></a><font color="#000000">5.1</font> <font color="#000000">场景名称：</font><font color="#000000">pojo</font> <font color="#000000">场景</font></h4>

<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> TPS成功平均值 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 响应时间成功平均值(ms) <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo1 <br class="atl-forced-newline">
（hessian2序列化+mina） <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 10813.5 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 0.9 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo2 <br class="atl-forced-newline">
(hessian2序列化+netty) <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 11994 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 0.79 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo2 <br class="atl-forced-newline">
(dubbo序列化+netty) <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 13620 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 0.67 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> rmi <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 2461.79 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 4 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> hessian <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 2417.7 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 4.1 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> http（json序列化） <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 8179.08 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 1.15 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> 2.0和1.0默认 <br class="atl-forced-newline">
对比百分比 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 10.92 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> -12.22 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo序列化相比hessian2序列化百分比 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 13.56 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> -15.19 <br class="atl-forced-newline"> </td>
</tr>
</tbody></table>
</div>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/pojotps.png-version=1&modificationDate=1317388356000.png" tppabs="http://10.20.160.198/wiki/download/attachments/6947356/pojotps.png?version=1&amp;modificationDate=1317388356000" style="border: 0px solid black"></span> <span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/pojores.png-version=1&modificationDate=1317388349000.png" tppabs="http://10.20.160.198/wiki/download/attachments/6947356/pojores.png?version=1&amp;modificationDate=1317388349000" style="border: 0px solid black"></span></p>

<h4><a name="UserGuide-zh-%5C"></a><font color="#000000">5.2</font> <font color="#000000">场景名称：</font><font color="#000000">1k string</font> <font color="#000000">场景</font><font color="#000000">&nbsp;</font> |</h4>

<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd"> 　 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> TPS成功平均值 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 响应时间成功平均值(ms) <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo1 <br class="atl-forced-newline">
（hessian2序列化+mina） <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 11940 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 0.8 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo2 <br class="atl-forced-newline">
(hessian2序列化+netty) <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 14402 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 0.64 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo2 <br class="atl-forced-newline">
(dubbo序列化+netty) <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 15096 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 0.6 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> rmi <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 11136.02 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 0.81 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> hessian <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 11426.83 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 0.79 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> http（json序列化） <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 8919.27 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 1.04 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> 2.0和1.0默认 <br class="atl-forced-newline">
对比百分比 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 20.62 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> -20.00 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo序列化相比hessian2序列化百分比 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 4.82 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> -6.25 <br class="atl-forced-newline"> </td>
</tr>
</tbody></table>
</div>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/1ktps.png-version=1&modificationDate=1317388345000.png" tppabs="http://10.20.160.198/wiki/download/attachments/6947356/1ktps.png?version=1&amp;modificationDate=1317388345000" style="border: 0px solid black"></span> <span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/1kres.png-version=1&modificationDate=1317388329000.png" tppabs="http://10.20.160.198/wiki/download/attachments/6947356/1kres.png?version=1&amp;modificationDate=1317388329000" style="border: 0px solid black"></span></p>
<h4><a name="UserGuide-zh-%5C"></a><font color="#000000">5.3</font> <font color="#000000">场景名称：</font><font color="#000000">50k string</font><font color="#000000">场景</font><font color="#000000">&nbsp;</font> |</h4>

<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd"> 　 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> TPS成功平均值 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 响应时间成功平均值(ms) <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo1 <br class="atl-forced-newline">
（hessian2序列化+mina） <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 1962.7 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 5.1 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo2 <br class="atl-forced-newline">
(hessian2序列化+netty) <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 1293 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 5.03 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo2 <br class="atl-forced-newline">
(dubbo序列化+netty) <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 1966 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 7.68 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> rmi <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 3349.88 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 2.9 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> hessian <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 1925.33 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 5.13 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> http（json序列化） <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 3247.1 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 3 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> 2.0和1.0默认 <br class="atl-forced-newline">
对比百分比 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> -34.12 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> -1.37 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo序列化相比hessian2序列化百分比 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 52.05 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 52.68 <br class="atl-forced-newline"> </td>
</tr>
</tbody></table>
</div>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/50ktps.png-version=1&modificationDate=1317388345000.png" tppabs="http://10.20.160.198/wiki/download/attachments/6947356/50ktps.png?version=1&amp;modificationDate=1317388345000" style="border: 0px solid black"></span> <span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/50kres.png-version=1&modificationDate=1317388345000.png" tppabs="http://10.20.160.198/wiki/download/attachments/6947356/50kres.png?version=1&amp;modificationDate=1317388345000" style="border: 0px solid black"></span></p>
<h4><a name="UserGuide-zh-%5C"></a><font color="#000000">5.4</font> <font color="#000000">场景名称：</font><font color="#000000">200k string</font> <font color="#000000">场景</font><font color="#000000">&nbsp;</font> |</h4>

<div class="table-wrap">
<table class="confluenceTable"><tbody>
<tr>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> TPS成功平均值 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 响应时间成功平均值(ms) <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo1 <br class="atl-forced-newline">
（hessian2序列化+mina） <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 324.2 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 30.8 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo2 <br class="atl-forced-newline">
(hessian2序列化+netty) <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 362.92 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 27.49 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo2 <br class="atl-forced-newline">
(dubbo序列化+netty) <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 569.5 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 17.51 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> rmi <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 1031.28 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 9.61 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> hessian <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 628.06 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 15.83 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> http（json序列化） <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 1011.97 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 9.79 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> 2.0和1.0默认 <br class="atl-forced-newline">
对比百分比 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 11.94 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> -10.75 <br class="atl-forced-newline"> </td>
</tr>
<tr>
<td class="confluenceTd"> dubbo序列化相比hessian2序列化百分比 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> 56.92 <br class="atl-forced-newline"> </td>
<td class="confluenceTd"> -36.30 <br class="atl-forced-newline"> </td>
</tr>
</tbody></table>
</div>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/200ktps.png-version=1&modificationDate=1317388345000.png" tppabs="http://10.20.160.198/wiki/download/attachments/6947356/200ktps.png?version=1&amp;modificationDate=1317388345000" style="border: 0px solid black"></span> <span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/200kres.png-version=1&modificationDate=1317388345000.png" tppabs="http://10.20.160.198/wiki/download/attachments/6947356/200kres.png?version=1&amp;modificationDate=1317388345000" style="border: 0px solid black"></span></p>

<h3><a name="UserGuide-zh-%E6%B5%8B%E8%AF%95%E5%88%86%E6%9E%90"></a>测试分析</h3>

<p><br class="atl-forced-newline"></p>

<h4><a name="UserGuide-zh-"></a><font color="#000000">6.1</font> <font color="#000000">性能分析评估</font></h4>

<p>&nbsp; Dubbo2.0的性能测试结论为通过，从性能、内存占用和稳定性上都有了提高和改进。由其是内存管理由于将mina换成netty，大大减少了1.0版本在高并发大数据下的内存大锯齿。如下图：</p>

<h4><a name="UserGuide-zh-"></a><font color="#000000">6.2</font> <font color="#000000">性能对比分析</font><font color="#000000">(</font><font color="#000000">新旧环境、不同数据量级等</font><font color="#000000">)</font></h4>

<p>Dubbo2.0相比较Dubbo1.0（默认使用的都是hessian2序列化）性能均有提升（除了50k String），详见第五章的性能数据。</p>

<p>出于兼容性考虑默认的序列化方式和1.0保持一致使用hessian2，如对性能有更高要求可以使用dubbo序列化，由其是在处理复杂对象时，在大数据量下能获得50%的提升（但此时已不建议使用Dubbo协议）。</p>

<p>Dubbo的设计目的是为了满足高并发小数据量的rpc调用，在大数据量下的性能表现并不好，建议使用rmi或http协议。</p>

<h4><a name="UserGuide-zh-"></a><font color="#000000">6.3</font> <font color="#000000">测试局限性分析（可选）</font></h4>


<p><font color="#000000">本次性能测试考察的是</font><font color="#000000">dubbo</font><font color="#000000">本身的性能，实际使用过程中的性能有待应用来验证。</font></p>


<p><font color="#000000">由于</font><font color="#000000">dubbo</font><font color="#000000">本身的性能占用都在毫秒级，占的基数很小，</font>性能提升可能对应用整体的性能变化不大<font color="#000000">。</font></p>


<p><font color="#000000">由于邮件篇幅所限没有列出所有的监控图，如需获得可在大力神平台上查询。</font></p>
<h2><a name="UserGuide-zh-%E6%B5%8B%E8%AF%95%E8%A6%86%E7%9B%96%E7%8E%87%E6%8A%A5%E5%91%8A"></a>测试覆盖率报告</h2>
<p>(<a href="http://dubbo.io/Code+Coverage+Report-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Code+Coverage+Report-zh" title="Code Coverage Report-zh">+</a>) (<a href="http://dubbo.io/User+Guide-zh.htm#UserGuide-zh-%E6%B5%8B%E8%AF%95%E8%A6%86%E7%9B%96%E7%8E%87%E6%8A%A5%E5%91%8A">#</a>)</p>

<p>统计于 2012-02-03 (2.0.12)</p>

<p><span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/code-quality1.jpg-version=1&modificationDate=1328239751000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6947669/code-quality1.jpg?version=1&amp;modificationDate=1328239751000" style="border: 0px solid black"></span><br>
<span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/code-quality2.jpg-version=1&modificationDate=1328239559000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6947669/code-quality2.jpg?version=1&amp;modificationDate=1328239559000" style="border: 0px solid black"></span><br>
<span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/code-coverage.jpg-version=1&modificationDate=1328239005000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6947669/code-coverage.jpg?version=1&amp;modificationDate=1328239005000" style="border: 0px solid black"></span><br>
<span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/code-tendency.jpg-version=1&modificationDate=1328239564000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6947669/code-tendency.jpg?version=1&amp;modificationDate=1328239564000" style="border: 0px solid black"></span><br>
<span class="image-wrap" style=""><img src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/code-dependency.jpg-version=1&modificationDate=1328239550000.jpg" tppabs="http://10.20.160.198/wiki/download/attachments/6947669/code-dependency.jpg?version=1&amp;modificationDate=1328239550000" style="border: 0px solid black"></span></p>
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/6948813"/>
</rdf:RDF>
-->

            
    


<fieldset class="hidden parameters">
    <legend>Labels parameters</legend>
    <input type="hidden" id="domainName" value="http://code.alibabatech.com/wiki">
    <input type="hidden" id="pageId" value="6948813">
    <input type="hidden" id="spaceKey" value="dubbo">
</fieldset>

<div id="labels-section" class="pageSection">
    <div class="labels-editor">
        <span id="labels-section-title" class="label-title">
            <b>Labels:</b>
        </span>
        <div id="labels-section-content" class="content-column">
            <span id="labels-section-title-none" class="label-title none ">
                None
            </span>

            <div id="labelsList" class="label-list">
                            </div>

                    </div>

        <span class="errorMessage error" id="errorSpan"></span>
        <form method="GET" action="" id="add-labels-form">
            <div id="labelInputSpan" class="labels-input">
                <div id="labelOperationErrorContainer" class="hidden">
                    <span class="error"><span class="errorMessage" id="labelOperationErrorMessage"></span></span>
                </div>

                <div class="caption">Enter labels to add to this page:</div>
                <div id="label-input-fields">
                    <input autocomplete="off" id="labelsString" name="labelsString" value="" size="40">
                    <input id="add-labels-editor-button" type="submit" class="add-labels" value="Add">
                    <input id="close-labels-editor-button" type="submit" class="hide-labels-editor" value="Done">
                </div>
                <div id="waitImageAndStatus">
                    <img class="waiting" alt="Please wait" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/wait.gif" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/wait.gif">&nbsp;
                    <span id="labelOperationStatus" class="smalltext"></span>
                </div>
                <div id="labelsAutocompleteList" class="aui-dd-parent"></div>
                <div class="labels-tip">
                    <div id="suggestedLabelsSpan"></div>
                    Looking for a label? Just start typing.
                </div>
            </div>
        </form>
    </div>
</div>

                    <div id="children-section" class="pageSection children-showing">
                
        <div class="section-header ">
            <h2 id="children-section-title" class="section-title">
                <a href="http://dubbo.io/User+Guide-zh-showChildren=false.htm#children" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?showChildren=false#children" class="children-show-hide">
                                            19 Child Pages
                                    </a>
            </h2>

            <a href="http://dubbo.io/User+Guide-zh-showChildren=false.htm#children" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?showChildren=false#children" class="children-show-hide icon"></a>

            <span class="noprint grey">
                <a class="children-subtitle" href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/listpages-dirview.action?key=dubbo&openId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/listpages-dirview.action?key=dubbo&openId=6948813#selectedPageInHierarchy%27" tppabs="http://10.20.160.198/wiki/pages/listpages-dirview.action?key=dubbo&amp;openId=6948813#selectedPageInHierarchy">Reorder Pages</a>
                            </span>
        </div>
        <div id="page-children" class="pageSectionBody children-loaded">
                                        <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/API+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/API+Reference-zh">API Reference-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Benchmark+Test+Toolkit-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Benchmark+Test+Toolkit-zh">Benchmark Test Toolkit-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Capacity+Estimated-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Capacity+Estimated-zh">Capacity Estimated-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Code+Coverage+Report-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Code+Coverage+Report-zh">Code Coverage Report-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Configs-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Configs-zh">Configs-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Configuration+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Configuration+Reference-zh">Configuration Reference-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Dependencies-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Dependencies-zh">Dependencies-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Examples-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Examples-zh">Examples-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Getting+Started-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Getting+Started-zh">Getting Started-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Maturity-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Maturity-zh">Maturity-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Maven+Plugin+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Maven+Plugin+Reference-zh">Maven Plugin Reference-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Performance+Test+Report-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Performance+Test+Report-zh">Performance Test Report-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Protocol+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Protocol+Reference-zh">Protocol Reference-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Quick+Start-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Quick+Start-zh">Quick Start-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Recommended+Usage-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Recommended+Usage-zh">Recommended Usage-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Registry+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Registry+Reference-zh">Registry Reference-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Serialization+Issues-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Serialization+Issues-zh">Serialization Issues-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Service+Best+Practices-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Service+Best+Practices-zh">Service Best Practices-zh</a>
                         </span>
                            <span class="child-display">
                                     <span class="icon icon-page" title="Page">Page:</span>
                         <a href="http://dubbo.io/Telnet+Command+Reference-zh.htm" tppabs="http://10.20.160.198/wiki/display/dubbo/Telnet+Command+Reference-zh">Telnet Command Reference-zh</a>
                         </span>
                                </div>
        </div>
    
            




            
    

        
<fieldset class="parameters hidden">
    <input type="hidden" id="deleteCommentConfirmMessage" value="Are you sure you want to remove the comment?">
    <input type="hidden" id="collapseTooltip" value="Click to toggle the display of this comment.">
        </fieldset>

<fieldset class="hidden parameters i18n">
        <input type="hidden" title="i18n.cancel.name" value="Cancel">
</fieldset>






<div id="comments-section" class="pageSection">
    
            <div class="section-header ">
            <h2 id="comments-section-title" class="section-title">
                <a href="http://dubbo.io/User+Guide-zh.htm#" class="comments-show-hide comments-showing" name="comments">
                                            33 Comments
                                    </a>
            </h2>
            <a title="comments.show.hide" href="http://dubbo.io/User+Guide-zh.htm#" class="comments-show-hide icon comments-showing icon-section-opened">
               comments.show.hide
            </a>
        </div>
    
    
                            <ol class="comment-threads top-level " id="page-comments">
                        <li id="comment-thread-7669897" class="comment-thread">
                    <div class="comment  " id="comment-7669897">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="四月 26, 2012 19:02">
                    四月 26, 2012
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>不晓得你们是拿什么测的，我的小PC测试jdk rmi。1kb字符串测试结果如下：<br>
TPS:61840，我的服务也是在本机的，没有走网络。</p>

<p>服务器我也测过，byte<span class="error">[1024]</span>大概在50632.94TPS，瓶颈是咱的千兆网卡，而不是协议。而你们测出来的是1W左右的TPS...<br>
不晓得你们是用的Spring配置的Rmi吗，那个有性能Bug。</p>

<p>我的服务器空请求RMI是20W的TPS,Jetty Htpp是2.5WTPS。RMI跟HTTP根本不是一个级别的。你们的Http json竟然比RMI高那么多，匪夷所思。<br>
Java序列化跟FastJson的POJO序列化性能对比我也做过，FastJson要差一大截呀：
<a href="javascript:if(confirm(%27http://www.iteye.com/topic/1113183?page=7  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.iteye.com/topic/1113183?page=7%27" tppabs="http://www.iteye.com/topic/1113183?page=7" class="external-link" rel="nofollow">http://www.iteye.com/topic/1113183?page=7</a> (见huhang1986的回帖)</p>


<p>我的测试工具在这里：<a href="javascript:if(confirm(%27http://code.google.com/p/xiaohanghu-stress-tester/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://code.google.com/p/xiaohanghu-stress-tester/%27" tppabs="http://code.google.com/p/xiaohanghu-stress-tester/" class="external-link" rel="nofollow">http://code.google.com/p/xiaohanghu-stress-tester/</a><br>
测试详细结果：<br>
=========================================================<br>
jdk rmi test result:<br>
 Service result:aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<br>
 Service Name:	<br>
 Concurrency Level:	100<br>
 Time taken for tests:	323.41052 ms<br>
 Complete Requests:	20000<br>
 Failed Requests:	0<br>
 Requests per second:	61840.906<br>
 Time per request:	0.63578355 ms<br>
 Shortest request:	0.079317 ms<br>
 Percentage of the requests served within a certain time (ms)<br>
  50%	0.108318<br>
  66%	0.126821<br>
  75%	0.14599<br>
  80%	0.169226<br>
  90%	0.708724<br>
  95%	2.524907<br>
  98%	8.090869<br>
  99%	12.26876<br>
 100%	79.32993 (longest request)</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=7669897.htm#comment-7669897" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7669897#comment-7669897" id="comment-permalink-7669897"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7669897&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7669897&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=7669897&amp;pageId=6948813" id="reply-comment-7669897"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7669897#comment-7669897"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7669897#comment-7669897"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/7669897"/>
</rdf:RDF>
-->

                    
                                    <ol class="comment-threads">
                                        <li id="comment-thread-7669900" class="comment-thread">
                    <div class="comment   odd" id="comment-7669900">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="四月 28, 2012 13:56">
                    四月 28, 2012
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>1w的tps是在默认单连接的情况下，如果开启了多连接tps可以达到12w。这个性能数据有些旧了，5.1回来我更新下。<br>
fastjson的性能在<a href="javascript:if(confirm(%27https://github.com/eishay/jvm-serializers/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/eishay/jvm-serializers/%27" tppabs="https://github.com/eishay/jvm-serializers/" class="external-link" rel="nofollow">https://github.com/eishay/jvm-serializers/</a> 上的结果还是有较大的优势的。</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=7669900.htm#comment-7669900" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7669900#comment-7669900" id="comment-permalink-7669900"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7669900&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7669900&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=7669900&amp;pageId=6948813" id="reply-comment-7669900"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7669900#comment-7669900"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7669900#comment-7669900"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/7669900"/>
</rdf:RDF>
-->

                    
                                </li>
                                </ol>
                        </li>
                        <li id="comment-thread-7672087" class="comment-thread">
                    <div class="comment  " id="comment-7672087">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="六月 20, 2012 17:40">
                    六月 20, 2012
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>分组聚合里面的 例子写的好像不对</p>

<p>&lt;dubbo:reference interface="com.xxx.MenuService" group="*"&gt;<br>
    &lt;dubbo:method name="getMenuItems" merger="true" /&gt;<br>
&lt;/dubbo:service&gt;</p>

<p>下面的&lt;/dubbo:service&gt; 应该是&lt;/dubbo:reference&gt;，照上面的办法试了，也试了自己写merger，都不能用，返回的始终是一台机器的结果。能不能有个例子。这样的配置 好像不能用，我是配置在consumer.xml里的</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=7672087.htm#comment-7672087" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7672087#comment-7672087" id="comment-permalink-7672087"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7672087&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7672087&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=7672087&amp;pageId=6948813" id="reply-comment-7672087"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7672087#comment-7672087"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7672087#comment-7672087"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/7672087"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-7673407" class="comment-thread">
                    <div class="comment   odd" id="comment-7673407">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="七月 25, 2012 17:07">
                    七月 25, 2012
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>问题一：按用户指南配置的，架包也是下载默认的，启动时一直显示Soap 1.1 endpoint already registered on address /com.alibaba.dubbo.demo.provider.DemoWebService 的错误，不知道是哪配置错了。</p>

<p>问题二：服务端通过webservice方式启动后，消费者直接用标准WebService接口调用。这里的本地路径是不是“http:\\127.0.0.1：8081\demoWebService” ?</p>

<p>在dubbo-demo-provider.xml文件中配置</p>

<p>    &lt;!-- 使用zk广播注册中心暴露服务地址 --&gt;<br>
    &lt;dubbo:registry address="zookeeper://127.0.0.1:2181" /&gt;</p>

<p>    &lt;!-- 用webservice协议在8081端口暴露服务   --&gt;<br>
    &lt;dubbo:protocol name="webservice" port="8081" server="jetty" /&gt;</p>

<p>    &lt;bean id="demoWebService" class="com.alibaba.dubbo.demo.provider.DemoWebServiceImpl" /&gt;</p>

<p>    &lt;dubbo:service interface="com.alibaba.dubbo.demo.provider.DemoWebService" ref="demoWebService" /&gt;</p>


<p>启动后提示错误：<br>
2012-7-25 16:53:11 org.apache.cxf.service.factory.ReflectionServiceFactoryBean buildServiceFromClass<br>
信息: Creating Service </p>
<div class="error"><span class="error">Unknown macro: {http}</span> </div>
<p>DemoWebService from class com.alibaba.dubbo.demo.provider.DemoWebService<br>
2012-7-25 16:53:11 org.apache.cxf.endpoint.ServerImpl initDestination<br>
信息: Setting the server's publish address to be /com.alibaba.dubbo.demo.provider.DemoWebService<br>
2012-07-25 16:53:11,577 ERROR <span class="error">[main]</span> <span class="error">[FailbackRegistry.java:232]</span> -  <span class="error">[DUBBO]</span> Failed to notify for subscribe provider://192.168.1.200:8081/com.alibaba.dubbo.demo.provider.DemoWebService?anyhost=true&amp;application=demo-service-app&amp;category=configurators&amp;check=false&amp;dubbo=2.3.1&amp;interface=com.alibaba.dubbo.demo.provider.DemoWebService&amp;methods=sayHello1&amp;pid=14196&amp;server=jetty&amp;side=provider&amp;timestamp=1343206383871, waiting for retry, cause: Soap 1.1 endpoint already registered on address /com.alibaba.dubbo.demo.provider.DemoWebService, dubbo version: 2.3.1, current host: 192.168.1.200<br>
java.lang.RuntimeException: Soap 1.1 endpoint already registered on address /com.alibaba.dubbo.demo.provider.DemoWebService<br>
	at org.apache.cxf.binding.soap.SoapBindingFactory.addListener(SoapBindingFactory.java:862)<br>
	at org.apache.cxf.endpoint.ServerImpl.start(ServerImpl.java:131)</p>


                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=7673407.htm#comment-7673407" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7673407#comment-7673407" id="comment-permalink-7673407"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7673407&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7673407&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=7673407&amp;pageId=6948813" id="reply-comment-7673407"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7673407#comment-7673407"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7673407#comment-7673407"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/7673407"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-7673805" class="comment-thread">
                    <div class="comment  " id="comment-7673805">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="八月 17, 2012 11:26">
                    八月 17, 2012
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>如何进行服务编排？有没有对应的示例？服务提供者如何写组合服务的脚本，服务调用者如何调用？编排的引擎是什么？</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=7673805.htm#comment-7673805" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7673805#comment-7673805" id="comment-permalink-7673805"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7673805&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7673805&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=7673805&amp;pageId=6948813" id="reply-comment-7673805"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7673805#comment-7673805"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7673805#comment-7673805"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/7673805"/>
</rdf:RDF>
-->

                    
                                    <ol class="comment-threads">
                                        <li id="comment-thread-7674498" class="comment-thread">
                    <div class="comment   odd" id="comment-7674498">
                <p class="comment-user-logo">
                    <a class="userLogoLink userlink-1" data-username="ding.lid" href="javascript:if(confirm(%27http://10.20.160.198/wiki/display/~ding.lid  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/display/~ding.lid%27" tppabs="http://10.20.160.198/wiki/display/~ding.lid" title="" data-user-hover-bound="true">
               <img class="userLogo logo" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/ding.lid-48669-pp-face_nj.jpg-version=1&modificationDate=1319433483000.png" tppabs="http://10.20.160.198/wiki/download/attachments/6947428/ding.lid-48669-pp-face_nj.jpg?version=1&amp;modificationDate=1319433483000" alt="User icon: ding.lid" title="">
           </a>                </p>
                <p class="date" title="十一月 08, 2012 15:54">
                    十一月 08, 2012
                </p>
                <div class="comment-header">
                    <h4 class="author"><a href="javascript:if(confirm(%27http://10.20.160.198/wiki/display/~ding.lid  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/display/~ding.lid%27" tppabs="http://10.20.160.198/wiki/display/~ding.lid" class="url fn confluence-userlink userlink-1" data-username="ding.lid" title="" data-user-hover-bound="true">李 鼎</a></h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>这个目前版本（2.5）中还没有实现。可以通过第三方来实现。</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=7674498.htm#comment-7674498" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7674498#comment-7674498" id="comment-permalink-7674498"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7674498&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7674498&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=7674498&amp;pageId=6948813" id="reply-comment-7674498"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7674498#comment-7674498"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7674498#comment-7674498"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/7674498"/>
</rdf:RDF>
-->

                    
                                </li>
                                </ol>
                        </li>
                        <li id="comment-thread-7673818" class="comment-thread">
                    <div class="comment  " id="comment-7673818">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="八月 21, 2012 11:44">
                    八月 21, 2012
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>如果模型里面有UUID字段，Hessian反序列化的时会抛出空指针异常,我们通过增加UUID的序列化器解决，建议框架默认增加此功能<br>
ExtSerializerFactory factory = new ExtSerializerFactory();<br>
        factory.addDeserializer(UUID.class, new UUIDDeserializer());<br>
        factory.addSerializer(UUID.class, new UUIDSerializer());</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=7673818.htm#comment-7673818" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7673818#comment-7673818" id="comment-permalink-7673818"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7673818&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7673818&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=7673818&amp;pageId=6948813" id="reply-comment-7673818"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7673818#comment-7673818"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7673818#comment-7673818"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/7673818"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-7674464" class="comment-thread">
                    <div class="comment   odd" id="comment-7674464">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="十一月 06, 2012 16:27">
                    十一月 06, 2012
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>为什么管理员端禁用了服务后，服务消费者仍然能接入服务。<br>
禁用后，服务提供方被调用时，出现异常如下：<br>
16:22:52.782 <span class="error">[31173113@qtp-9815532-195]</span> DEBUG org.mortbay.log - EXCEPTION <br>
java.io.IOException: 您的主机中的软件中止了一个已建立的连接。<br>
	at sun.nio.ch.SocketDispatcher.read0(Native Method) ~<span class="error">[na:1.6.0\_10\-rc2]</span><br>
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:25) ~<span class="error">[na:1.6.0\_10\-rc2]</span><br>
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:233) ~<span class="error">[na:1.6.0\_10\-rc2]</span><br>
	at sun.nio.ch.IOUtil.read(IOUtil.java:206) ~<span class="error">[na:1.6.0\_10\-rc2]</span><br>
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:236) ~<span class="error">[na:1.6.0\_10\-rc2]</span><br>
	at org.mortbay.io.nio.ChannelEndPoint.fill(ChannelEndPoint.java:132) ~<span class="error">[jetty\-6.1.26.jar:6.1.26]</span><br>
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:290) <span class="error">[jetty\-6.1.26.jar:6.1.26]</span><br>
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212) <span class="error">[jetty\-6.1.26.jar:6.1.26]</span><br>
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) <span class="error">[jetty\-6.1.26.jar:6.1.26]</span><br>
	at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410) <span class="error">[jetty\-6.1.26.jar:6.1.26]</span><br>
	at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) <span class="error">[jetty\-util\-6.1.26.jar:6.1.26]</span><br>
16:22:52.783 <span class="error">[31173113@qtp-9815532-195]</span> DEBUG org.mortbay.log - EOF</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=7674464.htm#comment-7674464" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7674464#comment-7674464" id="comment-permalink-7674464"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7674464&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7674464&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=7674464&amp;pageId=6948813" id="reply-comment-7674464"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7674464#comment-7674464"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7674464#comment-7674464"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/7674464"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-7674573" class="comment-thread">
                    <div class="comment  " id="comment-7674573">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="十一月 16, 2012 18:00">
                    十一月 16, 2012
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>用户手册我看了好几遍,都没能找到使用HTTP协议的具体操作.<br>
我们当前已经存在一个提供HTTP服务的服务端,该服务器可以提供我们所需的所有操作.<br>
现在需要提供集群管理,该HTTP服务端如何接入到DUBBO中<br>
我按照Hessian的样子写了一个接口Business,提供方法String getResult(String requestStr)<br>
在服务端实现了一个类public class BusinessImplServlet extends HessianServlet implements Business<br>
现在问题是这个服务端是独立运行在TOMCAT上的,怎么和DUBBO结合在一起<br>
测试客户端使用API的方式实现的<br>
调用方式和其他协议的调用方是一样的,调用方是否需要有特殊配置来适应该协议.<br>
谢谢</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=7674573.htm#comment-7674573" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7674573#comment-7674573" id="comment-permalink-7674573"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7674573&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=7674573&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=7674573&amp;pageId=6948813" id="reply-comment-7674573"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7674573#comment-7674573"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=7674573#comment-7674573"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/7674573"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8355913" class="comment-thread">
                    <div class="comment   odd" id="comment-8355913">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="十二月 03, 2012 14:50">
                    十二月 03, 2012
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>请问一下，消费者可以使用.NET吗？</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8355913.htm#comment-8355913" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355913#comment-8355913" id="comment-permalink-8355913"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355913&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355913&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355913&amp;pageId=6948813" id="reply-comment-8355913"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355913#comment-8355913"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355913#comment-8355913"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8355913"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8355935" class="comment-thread">
                    <div class="comment  " id="comment-8355935">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="十二月 10, 2012 17:46">
                    十二月 10, 2012
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>您好，我们现在正用贵公司的DUBBO，有个问题希望请教下。问题是这样的：我们需要根据代码逻辑的不同参数调用不同的提供者，但是当我用实例代码把路由规则写入注册中心（zookeeper）以后，管理页面中路由规则页面报错，我想知道路由规则存放在那里的呢。</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8355935.htm#comment-8355935" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355935#comment-8355935" id="comment-permalink-8355935"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355935&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355935&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355935&amp;pageId=6948813" id="reply-comment-8355935"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355935#comment-8355935"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355935#comment-8355935"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8355935"/>
</rdf:RDF>
-->

                    
                                    <ol class="comment-threads">
                                        <li id="comment-thread-8781939" class="comment-thread">
                    <div class="comment   odd" id="comment-8781939">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="三月 26, 2013 17:42">
                    三月 26, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>同问，同一个消费根据不同的参数去调用不同的提供者</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8781939.htm#comment-8781939" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8781939#comment-8781939" id="comment-permalink-8781939"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8781939&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8781939&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8781939&amp;pageId=6948813" id="reply-comment-8781939"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8781939#comment-8781939"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8781939#comment-8781939"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8781939"/>
</rdf:RDF>
-->

                    
                                </li>
                                </ol>
                        </li>
                        <li id="comment-thread-8355945" class="comment-thread">
                    <div class="comment  " id="comment-8355945">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="十二月 13, 2012 10:47">
                    十二月 13, 2012
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>你好！现在dubbo里面thrift做服务端,用thrift原生client是否支持调用？</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8355945.htm#comment-8355945" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355945#comment-8355945" id="comment-permalink-8355945"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355945&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355945&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355945&amp;pageId=6948813" id="reply-comment-8355945"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355945#comment-8355945"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355945#comment-8355945"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8355945"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8355994" class="comment-thread">
                    <div class="comment   odd" id="comment-8355994">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="一月 05, 2013 16:39">
                    一月 05, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>哪位大师给我解释一下，<br>
&lt;dubbo:reference url="dubbo://ip:port"/&gt;<br>
采用直连方式的时候，这个标签的url中，可以写两个IP和端口么，即连多个地址？</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8355994.htm#comment-8355994" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355994#comment-8355994" id="comment-permalink-8355994"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355994&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355994&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355994&amp;pageId=6948813" id="reply-comment-8355994"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355994#comment-8355994"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355994#comment-8355994"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8355994"/>
</rdf:RDF>
-->

                    
                                    <ol class="comment-threads">
                                        <li id="comment-thread-8355995" class="comment-thread">
                    <div class="comment  " id="comment-8355995">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="一月 06, 2013 11:35">
                    一月 06, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>应该类似这样<br>
url="dubbo://10.10.224.193:36069;dubbo://10.10.224.194:36069"<br>
而不是：url="dubbo://ip:port,ip:port"</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8355995.htm#comment-8355995" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355995#comment-8355995" id="comment-permalink-8355995"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355995&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355995&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8355995&amp;pageId=6948813" id="reply-comment-8355995"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355995#comment-8355995"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8355995#comment-8355995"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8355995"/>
</rdf:RDF>
-->

                    
                                </li>
                                </ol>
                        </li>
                        <li id="comment-thread-8356002" class="comment-thread">
                    <div class="comment   odd" id="comment-8356002">
                <p class="comment-user-logo">
                    <a class="userLogoLink userlink-2" data-username="bigben" href="javascript:if(confirm(%27http://10.20.160.198/wiki/display/~bigben  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/display/~bigben%27" tppabs="http://10.20.160.198/wiki/display/~bigben" title="" data-user-hover-bound="true">
               <img class="userLogo logo" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/default.gif" tppabs="http://10.20.160.198/wiki/images/icons/profilepics/default.gif" alt="User icon: bigben" title="">
           </a>                </p>
                <p class="date" title="一月 07, 2013 13:43">
                    一月 07, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author"><a href="javascript:if(confirm(%27http://10.20.160.198/wiki/display/~bigben  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/display/~bigben%27" tppabs="http://10.20.160.198/wiki/display/~bigben" class="url fn confluence-userlink userlink-2" data-username="bigben" title="" data-user-hover-bound="true">alex.liang</a></h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>全局设置开启令牌验证：&lt;dubbo:provider interface="com.foo.BarService" token="true" /&gt;<br>
这句话是不是错了dubbo:provider元素没有interface属性吧</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8356002.htm#comment-8356002" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8356002#comment-8356002" id="comment-permalink-8356002"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8356002&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8356002&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8356002&amp;pageId=6948813" id="reply-comment-8356002"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8356002#comment-8356002"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8356002#comment-8356002"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8356002"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8356007" class="comment-thread">
                    <div class="comment  " id="comment-8356007">
                <p class="comment-user-logo">
                    <a class="userLogoLink userlink-2" data-username="bigben" href="javascript:if(confirm(%27http://10.20.160.198/wiki/display/~bigben  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/display/~bigben%27" tppabs="http://10.20.160.198/wiki/display/~bigben" title="" data-user-hover-bound="true">
               <img class="userLogo logo" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/default.gif" tppabs="http://10.20.160.198/wiki/images/icons/profilepics/default.gif" alt="User icon: bigben" title="">
           </a>                </p>
                <p class="date" title="一月 09, 2013 14:19">
                    一月 09, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author"><a href="javascript:if(confirm(%27http://10.20.160.198/wiki/display/~bigben  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/display/~bigben%27" tppabs="http://10.20.160.198/wiki/display/~bigben" class="url fn confluence-userlink userlink-2" data-username="bigben" title="" data-user-hover-bound="true">alex.liang</a></h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>String clientIP = RpcContext.getContext().getRemoteHost(); // 获取调用方IP地址</p>

<p>如果客户端与服务器不在同一个网段时有问题的</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8356007.htm#comment-8356007" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8356007#comment-8356007" id="comment-permalink-8356007"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8356007&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8356007&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8356007&amp;pageId=6948813" id="reply-comment-8356007"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8356007#comment-8356007"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8356007#comment-8356007"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8356007"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8356020" class="comment-thread">
                    <div class="comment   odd" id="comment-8356020">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="一月 17, 2013 10:16">
                    一月 17, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>本地存根那个部分的示例代码</p>

<div class="code panel" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>BarServiceStub.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_934340" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.foo</code></div><div class="line number2 index1 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">BarServiceStub </code><code class="java keyword">implements</code> <code class="java plain">BarService {</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">final</code> <code class="java plain">BarService barService;</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// 构造函数传入真正的远程代理对象</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">(BarService barService) {</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.barService = barService;</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>中的构造函数写的不正确吧。感觉应该是</p>
<div class="code panel" style="border-style: solid;border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;border-bottom-style: solid;"><b>BarServiceStub.java</b></div><div class="codeContent panelContent">
<div><div id="highlighter_2228" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java keyword">package</code> <code class="java plain">com.foo</code></div><div class="line number2 index1 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">BarServiceStub </code><code class="java keyword">implements</code> <code class="java plain">BarService {</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">final</code> <code class="java plain">BarService barService;</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// 构造函数传入真正的远程代理对象</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java plain">BarServiceStub(BarService barService) {</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">this</code><code class="java plain">.barService = barService;</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div>
<p>另外如何注册成本wiki是否对外开放。可否自由注册！谢谢</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8356020.htm#comment-8356020" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8356020#comment-8356020" id="comment-permalink-8356020"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8356020&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8356020&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8356020&amp;pageId=6948813" id="reply-comment-8356020"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8356020#comment-8356020"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8356020#comment-8356020"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8356020"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8356022" class="comment-thread">
                    <div class="comment  " id="comment-8356022">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="一月 17, 2013 16:46">
                    一月 17, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>第一次使用,出现点问题.麻烦看下,谢谢.<br>
Exception: 下面这段信息会一直刷屏.</p>

<p><span class="error">[WARN]</span> - 2013-01-17 16:35:29,272 : Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect  (org.apache.zookeeper.ClientCnxn$SendThread:run-ClientCnxn.java:1161)    <br>
java.net.ConnectException: Connection refused: no further information<br>
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)<br>
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:574)<br>
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119)<br>
<span class="error">[INFO]</span> - 2013-01-17 16:35:30,651 : Opening socket connection to server 192.168.10.13/192.168.10.13:2181  (org.apache.zookeeper.ClientCnxn$SendThread:startConnect-ClientCnxn.java:1041)    <br>
<span class="error">[WARN]</span> - 2013-01-17 16:35:31,652 : Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect  (org.apache.zookeeper.ClientCnxn$SendThread:run-ClientCnxn.java:1161)    <br>
java.net.ConnectException: Connection refused: no further information<br>
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)<br>
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:574)<br>
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119)</p>


<p>Java Code<br>
	public static void main(String[] args) throws IOException<br>
	{<br>
		ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(new String[]</p>
<div class="error"><span class="error">Unknown macro: { "dubbo-service.xml" }</span> </div>
<p>);<br>
		context.start();<br>
		System.in.read(); // 按任意键退出<br>
        }<br>
XML:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div><div id="highlighter_423988" class="syntaxhighlighter nogutter  java"><div class="toolbar"><span><a href="http://dubbo.io/User+Guide-zh.htm#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">&lt;!-- 提供方应用信息，用于计算依赖关系 --&gt;</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">&lt;dubbo:application name=</code><code class="java string">"service1"</code>&nbsp; <code class="java plain">/&gt;</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">&lt;!-- 使用 zookeeper --&gt;</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">&lt;dubbo:registry protocol=</code><code class="java string">"zookeeper"</code> <code class="java plain">address=</code><code class="java string">"192.168.10.13:2181"</code> <code class="java plain">/&gt;</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">&lt;!-- 用dubbo协议在</code><code class="java value">10001</code><code class="java plain">端口暴露服务 --&gt;</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">&lt;dubbo:protocol name=</code><code class="java string">"dubbo"</code> <code class="java plain">port=</code><code class="java string">"10001"</code> <code class="java plain">/&gt;</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">&lt;!-- 声明需要暴露的服务接口 --&gt;</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">&lt;dubbo:service </code><code class="java keyword">interface</code><code class="java plain">=</code><code class="java string">"org.e.test.dubbo.service.TestService"</code> <code class="java plain">ref=</code><code class="java string">"testService"</code> <code class="java plain">/&gt;</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;</code>&nbsp;</div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">&lt;!-- 和本地bean一样实现服务 --&gt;</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">&lt;bean id=</code><code class="java string">"testService"</code> <code class="java keyword">class</code><code class="java plain">=</code><code class="java string">"org.e.test.dubbo.service.impl.TestServiceImpl"</code> <code class="java plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>
</div></div>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8356022.htm#comment-8356022" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8356022#comment-8356022" id="comment-permalink-8356022"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8356022&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8356022&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8356022&amp;pageId=6948813" id="reply-comment-8356022"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8356022#comment-8356022"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8356022#comment-8356022"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8356022"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8781896" class="comment-thread">
                    <div class="comment   odd" id="comment-8781896">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="二月 28, 2013 13:42">
                    二月 28, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>请问,dubbo所依赖的spring能升级成3.x吗？</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8781896.htm#comment-8781896" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8781896#comment-8781896" id="comment-permalink-8781896"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8781896&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8781896&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8781896&amp;pageId=6948813" id="reply-comment-8781896"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8781896#comment-8781896"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8781896#comment-8781896"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8781896"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8782010" class="comment-thread">
                    <div class="comment  " id="comment-8782010">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="五月 03, 2013 15:40">
                    五月 03, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>请问如何在服务提供者中获取服务消费者的消息，就是我想知道是那个消费者调用了我</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8782010.htm#comment-8782010" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782010#comment-8782010" id="comment-permalink-8782010"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782010&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782010&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782010&amp;pageId=6948813" id="reply-comment-8782010"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782010#comment-8782010"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782010#comment-8782010"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8782010"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8782039" class="comment-thread">
                    <div class="comment   odd" id="comment-8782039">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="五月 14, 2013 14:01">
                    五月 14, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>请问我可以自己命名服务名吗？默认的是包名+类名，能改吗？</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8782039.htm#comment-8782039" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782039#comment-8782039" id="comment-permalink-8782039"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782039&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782039&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782039&amp;pageId=6948813" id="reply-comment-8782039"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782039#comment-8782039"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782039#comment-8782039"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8782039"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8782091" class="comment-thread">
                    <div class="comment  " id="comment-8782091">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="六月 21, 2013 10:55">
                    六月 21, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>关闭服务提供者怎么抛出下列异常，请帮忙看一下:<br>
Caused by: com.alibaba.dubbo.remoting.RemotingException: com.alibaba.dubbo.remoting.RemotingException: Not found exported service: com.alibaba.dubbo.registry.NotifyListener.25001087:2323 in <span class="error">[com.alibaba.dubbo.registry.NotifyListener.5329507:2323, com.alibaba.dubbo.registry.RegistryService:9090]</span>, may be version or group mismatch , channel: consumer: /192.168.62.99:9090 --&gt; provider: /192.168.62.99:2323, message:RpcInvocation [methodName=notify, parameterTypes=<span class="error">[interface java.util.List]</span>, arguments=[[]], attachments=</p>

<p>Unknown macro: </p>
<div class="error"><span class="error">Unknown macro: {dubbo=2.4.9, input=266, _isCallBackServiceInvoke=true, sys_callback_arg-1=25001087, path=com.alibaba.dubbo.registry.NotifyListener, callback.service.instid=25001087, interface=com.alibaba.dubbo.registry.RegistryService, version=null}</span> </div>
<p>]<br>
com.alibaba.dubbo.remoting.RemotingException: Not found exported service: com.alibaba.dubbo.registry.NotifyListener.25001087:2323 in <span class="error">[com.alibaba.dubbo.registry.NotifyListener.5329507:2323, com.alibaba.dubbo.registry.RegistryService:9090]</span>, may be version or group mismatch , channel: consumer: /192.168.62.99:9090 --&gt; provider: /192.168.62.99:2323, message:RpcInvocation [methodName=notify, parameterTypes=<span class="error">[interface java.util.List]</span>, arguments=[[]], attachments=</p>

<p>]</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8782091.htm#comment-8782091" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782091#comment-8782091" id="comment-permalink-8782091"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782091&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782091&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782091&amp;pageId=6948813" id="reply-comment-8782091"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782091#comment-8782091"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782091#comment-8782091"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8782091"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8782116" class="comment-thread">
                    <div class="comment   odd" id="comment-8782116">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="七月 05, 2013 10:59">
                    七月 05, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>运行性能测试时</p>


<p>public class Test extends AbstractClientRunnable {<br>
&nbsp;&nbsp; &nbsp;public Test(String arg0, int arg1, int arg2, int arg3, CyclicBarrier arg4,<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;CountDownLatch arg5, long arg6, long arg7) </p>
<div class="error"><span class="error">Unknown macro: {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;super(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7);&nbsp;&nbsp; &nbsp;}</span> </div>

<p>&nbsp;&nbsp; &nbsp;@Override<br>
&nbsp;&nbsp; &nbsp;public Object invoke(ServiceFactory serviceFactory) </p>
<div class="error"><span class="error">Unknown macro: {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;DemoService demoService = (DemoService) serviceFactory&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;.get(DemoService.class);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return demoService.sendRequest("hello");&nbsp;&nbsp; &nbsp;}</span> </div>

<p>}</p>

<p>run.bat</p>

<p>Exception in thread "main" java.lang.reflect.InvocationTargetException<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at java.lang.reflect.Constructor.newInstance(Constructor.java:526)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at com.alibaba.dubbo.rpc.benchmark.RpcBenchmarkClient.getClientRunnable(RpcBenchmarkClient.java:18)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at com.alibaba.dubbo.rpc.benchmark.AbstractBenchmarkClient.run(AbstractBenchmarkClient.java:109)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at com.alibaba.dubbo.rpc.benchmark.RpcBenchmarkClient.main(RpcBenchmarkClient.java:22)<br>
Caused by: java.lang.NegativeArraySizeException<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at com.alibaba.dubbo.rpc.benchmark.AbstractClientRunnable.&lt;init&gt;(AbstractClientRunnable.java:66)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at com.alibaba.dubbo.rpc.benchmark.Test.&lt;init&gt;(Test.java:12)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ... 7 more</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8782116.htm#comment-8782116" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782116#comment-8782116" id="comment-permalink-8782116"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782116&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782116&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782116&amp;pageId=6948813" id="reply-comment-8782116"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782116#comment-8782116"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782116#comment-8782116"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8782116"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8782329" class="comment-thread">
                    <div class="comment  " id="comment-8782329">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="八月 30, 2013 13:17">
                    八月 30, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>服务提供方设置<br>
&lt;dubbo:provider timeout="10000"/&gt;<br>
将导至服务启动变慢,启动时间与 timeout 的大小相关，<br>
如果设置<br>
&lt;dubbo:provider timeout="1000"/&gt;  后服务启动明显加快。不知道是什么原因？</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8782329.htm#comment-8782329" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782329#comment-8782329" id="comment-permalink-8782329"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782329&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782329&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782329&amp;pageId=6948813" id="reply-comment-8782329"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782329#comment-8782329"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782329#comment-8782329"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8782329"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8782396" class="comment-thread">
                    <div class="comment   odd" id="comment-8782396">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="九月 23, 2013 19:49">
                    九月 23, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>梁飞，您好！<br>
我想咨询下，我想提供一个服务给php调用，所以打算采用http的协议+json的序列化，但是我配置了&lt;dubbo:protocol name="http" port="20880" serialization="fastjson" /&gt;后，协议是采用http协议了，但是没有按照json序列话，我看http post的Content-Type: application/x-java-serialized-object，怎么会这样呢？</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8782396.htm#comment-8782396" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782396#comment-8782396" id="comment-permalink-8782396"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782396&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782396&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782396&amp;pageId=6948813" id="reply-comment-8782396"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782396#comment-8782396"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782396#comment-8782396"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8782396"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8782399" class="comment-thread">
                    <div class="comment  " id="comment-8782399">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="九月 24, 2013 16:42">
                    九月 24, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>使用的dubbo版本是2.5.4，注册中心用zookeeper。<br>
使用6000并发ramp20s请求consumer端，协议使用hessian，使用5台tomcat做service容器，每台1200maxthread，consumer端也部署在tomcat上maxthread6000。<br>
测试的时候，有时会出现<br>
com.alibaba.dubbo.rpc.RpcException: Forbid consumer 192.168.50.214 access service xx.xxx.xxxx from registry 192.168.52.144:2181 use dubbo version 2.5.4-SNAPSHOT, Please check registry access list (whitelist/blacklist).<br>
跟了代码到com.alibaba.dubbo.registry.integration.RegistryDirectory : RegistryDirectory.java  :211 : refreshInvoker 里返回的invokeUrl列表是empty://192.168.52.143/.......<br>
进入if块：<br>
            this.forbidden = true; // 禁止访问<br>
            this.methodInvokerMap = null; // 置空列表<br>
            destroyAllInvokers(); // 关闭所有Invoker<br>
使得不能访问service，这个情况只出现几秒后，又正常了，但是这几秒内的service请求就没掉了。这是因为什么?是tomcat太忙导致？是session过期，还是其他什么。</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8782399.htm#comment-8782399" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782399#comment-8782399" id="comment-permalink-8782399"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782399&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782399&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782399&amp;pageId=6948813" id="reply-comment-8782399"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782399#comment-8782399"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782399#comment-8782399"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8782399"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8782426" class="comment-thread">
                    <div class="comment   odd" id="comment-8782426">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="十月 18, 2013 11:07">
                    十月 18, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>dubbo团队你们好，初次使用dubbo，有几个问题<br>
如果外部想通过http url的形式访问dubbo服务，对应的dubbo服务要使用http协议么。<br>
如果使用url的形式调用dubbo服务，服务有多个提供着并且分布在多个主机上，如何调用。<br>
用dubbo搭建的服务群如何给外部提供统一的http调用api。<br>
望解答，谢谢</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8782426.htm#comment-8782426" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782426#comment-8782426" id="comment-permalink-8782426"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782426&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782426&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782426&amp;pageId=6948813" id="reply-comment-8782426"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782426#comment-8782426"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782426#comment-8782426"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8782426"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-8782468" class="comment-thread">
                    <div class="comment  " id="comment-8782468">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="十一月 12, 2013 10:48">
                    十一月 12, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>webservice 里面<br>
协议的上下文路径&lt;dubbo:protocol contextpath="foo" /&gt;必须与servlet应用的上下文路径相同。</p>

<p>这里好像不对啊 cxf里面 用request.getPathInfo() 只取web.xml里面配置的url-pattern后面的值</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=8782468.htm#comment-8782468" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782468#comment-8782468" id="comment-permalink-8782468"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782468&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782468&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=8782468&amp;pageId=6948813" id="reply-comment-8782468"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782468#comment-8782468"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=8782468#comment-8782468"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/8782468"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-9338893" class="comment-thread">
                    <div class="comment   odd" id="comment-9338893">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="十二月 04, 2013 11:06">
                    十二月 04, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>为什么不加一个 集群配置手册？ 纯新手看这东西还是 很费劲的。看了2天了。只能在myeclipse完成一个本地测试，怎么搭建集群。部署到服务器，完全没有头绪</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=9338893.htm#comment-9338893" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=9338893#comment-9338893" id="comment-permalink-9338893"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=9338893&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=9338893&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=9338893&amp;pageId=6948813" id="reply-comment-9338893"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=9338893#comment-9338893"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=9338893#comment-9338893"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/9338893"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-9338899" class="comment-thread">
                    <div class="comment  " id="comment-9338899">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="十二月 05, 2013 11:02">
                    十二月 05, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>静态服务为啥不起作用呢，配置了dynamic=false，结果状态不是禁用状态</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=9338899.htm#comment-9338899" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=9338899#comment-9338899" id="comment-permalink-9338899"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=9338899&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=9338899&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=9338899&amp;pageId=6948813" id="reply-comment-9338899"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=9338899#comment-9338899"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=9338899#comment-9338899"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/9338899"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-9338919" class="comment-thread">
                    <div class="comment   odd" id="comment-9338919">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="十二月 13, 2013 11:52">
                    十二月 13, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>能不能写本书比如 dubbo in action之类的，学习起来也比较方便</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=9338919.htm#comment-9338919" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=9338919#comment-9338919" id="comment-permalink-9338919"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=9338919&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=9338919&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=9338919&amp;pageId=6948813" id="reply-comment-9338919"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=9338919#comment-9338919"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=9338919#comment-9338919"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/9338919"/>
</rdf:RDF>
-->

                    
                                </li>
                        <li id="comment-thread-9633822" class="comment-thread">
                    <div class="comment  " id="comment-9633822">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="./User Guide-zh - Dubbo - Alibaba Open Sesame_files/anonymous.png" tppabs="http://10.20.160.198/wiki/s/en/2166/34/_/images/icons/profilepics/anonymous.png" alt="User icon: Anonymous" title="Anonymous">                </p>
                <p class="date" title="十二月 27, 2013 10:07">
                    十二月 27, 2013
                </p>
                <div class="comment-header">
                    <h4 class="author">Anonymous</h4>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>局域网内多台机器搭建dubbo，不能使用   multicast   么？<br>
为什么我的provider  <br>
Start NettyServer bind /0.0.0.0:20880, export /61.0.0.22:20880, dubbo version: 2.4.9, current host: 127.0.0.1<br>
为什么会变成这样呢？</p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="http://dubbo.io/User+Guide-zh-focusedCommentId=9633822.htm#comment-9633822" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?focusedCommentId=9633822#comment-9633822" id="comment-permalink-9633822"><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
                                                          <li class="first action-reply-comment">
            <a href="javascript:if(confirm(%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=9633822&pageId=6948813  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://10.20.160.198/wiki/pages/replycomment.action?commentId=9633822&pageId=6948813%27" tppabs="http://10.20.160.198/wiki/pages/replycomment.action?commentId=9633822&amp;pageId=6948813" id="reply-comment-9633822"><span>Reply</span></a></li>
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=9633822#comment-9633822"
    dc:identifier="http://code.alibabatech.com/wiki/display/dubbo/User+Guide-zh?focusedCommentId=9633822#comment-9633822"
    dc:title="User Guide-zh"
    trackback:ping="http://code.alibabatech.com/wiki/rpc/trackback/9633822"/>
</rdf:RDF>
-->

                    
                                </li>
                </ol>
    
                                        <a id="add-comment-bottom" href="http://dubbo.io/User+Guide-zh-showComments=true&showCommentArea=true.htm#addcomment" tppabs="http://10.20.160.198/wiki/display/dubbo/User+Guide-zh?showComments=true&amp;showCommentArea=true#addcomment">
                    Add Comment
                </a>
                        </div>


            
</div>


    



    
    

    
    
    


<script type="text/x-template" title="manage-watchers-dialog">
<div class="dialog-content">
    <div class="column page-watchers">
        <h3>Watching this page</h3>
        <p class="description">These people are notified when the page is changed. You can add or remove people from this list.</p>
        <form action="/wiki/json/addwatch.action" method="POST">
                <input type="hidden" name="atl_token" value="c116db80711201b36e2067aa83f3b044c2d5a30e">
            <input type="hidden" name="pageId" value="6948813"/>
            <input type="hidden" id="add-watcher-username" name="username" value=""/>
            <label for="add-watcher-user">User</label>
            <input id="add-watcher-user" name="userFullName" type="search" class="autocomplete-user"
               value="" placeholder="Full name or username" autocomplete="off"
               data-max="10" data-target="#add-watcher-username" data-dropdown-target="#add-watcher-dropdown"
               data-template="{title}" data-none-message="No matching users found.">
            <input id="add-watcher-submit" type="submit" name="add" value="Add">
            <div id="add-watcher-dropdown" class="aui-dd-parent autocomplete"></div>
            <div class="status hidden"></div>
        </form>
        <ul class="user-list">
            <li class="loading">Loading&hellip;</li>
            <li class="no-users hidden">No page watchers</li>
        </ul>
    </div>
    <div class="column space-watchers">
        <h3>Watching this space</h3>
        <p class="description">These people are notified when any content in the space is changed. You cannot modify this list.</p>
        <ul class="user-list">
            <li class="loading">Loading&hellip;</li>
            <li class="no-users hidden">No space watchers</li>
        </ul>
    </div>
</div>
</script>
<script type="text/x-template" title="manage-watchers-user">
    <li class="watch-user">
        <img class="profile-picture confluence-userlink" src="{iconUrl}" data-username="{username}">
        <a class="confluence-userlink" href="{url}" data-username="{username}">{fullName} <span class="username">({username})</span></a>
        <span class="remove-watch" title="Remove"
            data-username="{username}">Remove</span>
    </li>
</script>
<script type="text/x-template" title="manage-watchers-help-link">
    <div class="dialog-help-link">
            <a href="http://docs.atlassian.com/confluence/docs-35/Managing+Watchers" target="_blank">Help</a>
    </div>
</script>

    <br class="clear">
</div><!-- \#main -->

<div id="footer">
                                                <p class="license license-opensource">
                  Powered by a free <b>Atlassian Confluence Open Source Project License</b> granted to Alibaba Tech. <a href="javascript:if(confirm(%27http://www.atlassian.com/c/conf/11461  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.atlassian.com/c/conf/11461%27" tppabs="http://www.atlassian.com/c/conf/11461">Evaluate Confluence today</a>.<br>
                </p>
                        
    <ul id="poweredby">
        <li class="noprint">Powered by <a href="javascript:if(confirm(%27http://www.atlassian.com/software/confluence  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.atlassian.com/software/confluence%27" tppabs="http://www.atlassian.com/software/confluence" class="hover-footer-link">Atlassian Confluence</a> 3.5.9, the <a href="javascript:if(confirm(%27http://www.atlassian.com/software/confluence/tour/enterprise-wiki.jsp  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.atlassian.com/software/confluence/tour/enterprise-wiki.jsp%27" tppabs="http://www.atlassian.com/software/confluence/tour/enterprise-wiki.jsp" class="hover-footer-link">Enterprise Wiki</a></li>
        <li class="print-only">Printed by Atlassian Confluence 3.5.9, the Enterprise Wiki.</li>        
        <li class="noprint"> &nbsp; |&nbsp; <a href="javascript:if(confirm(%27http://jira.atlassian.com/secure/BrowseProject.jspa?id=10470  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://jira.atlassian.com/secure/BrowseProject.jspa?id=10470%27" tppabs="http://jira.atlassian.com/secure/BrowseProject.jspa?id=10470" class="hover-footer-link">Report a bug</a></li>
        <li class="noprint"> &nbsp;|&nbsp; <a href="javascript:if(confirm(%27http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch%27" tppabs="http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch" class="hover-footer-link">Atlassian News</a></li>
    </ul>

    

            友情链接:<a href="javascript:if(confirm(%27http://code.taobao.org/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://code.taobao.org/%27" tppabs="http://code.taobao.org/">Taocode</a>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-31474478-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www/') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    </div></div><!-- \#full-height-container -->
</div><!-- \#page -->


<div id="content-hover-0" class="ajs-content-hover" style="display: none;"><div class="contents" style="width: 300px;"></div></div><div id="content-hover-1" class="ajs-content-hover" style="display: none;"><div class="contents" style="width: 300px;"></div></div><div id="content-hover-2" class="ajs-content-hover" style="display: none;"><div class="contents" style="width: 300px;"></div></div><div class="aui-popup aui-dialog" id="link-page-popup" disabled="" style="margin-top: -105px; margin-left: -300px; width: 600px; height: 210px; z-index: 3002; display: none; background: rgb(255, 255, 255);"><div class="dialog-components"><h2 class="dialog-title">Link to this Page</h2><ul class="dialog-page-menu" style="height: 114px; display: none;"><li class="page-menu-item selected"><button class="item-button">Link to this Page</button></li></ul><div class="dialog-page-body"><div class="dialog-panel-body" style="height: 104px;"><form id="link-page-popup-form" class="aui"><fieldset><div class="field-group"><label for="link-popup-field-link">Link:</label><input id="link-popup-field-link" readonly="readonly" value="" '="" class="text" type="text"></div><div class="field-group"><label for="link-popup-field-tiny-link">Tiny Link:</label><input id="link-popup-field-tiny-link" readonly="readonly" value="" '="" class="text" type="text"></div><div class="field-group"><label for="link-popup-field-wiki-markup">Wiki Markup:</label><input id="link-popup-field-wiki-markup" readonly="readonly" value="" '="" class="text" type="text"></div></fieldset></form></div></div><div class="dialog-button-panel"><a href="http://dubbo.io/User+Guide-zh.htm#" class="button-panel-link button-panel-cancel-link">Close</a><div class="dialog-tip">Shortcut tip: Pressing <b>k</b> also opens this dialog box</div></div></div></div><div id="content-hover-shadow" style="display: none;"><div class="tl"></div><div class="tr"></div><div class="l"></div><div class="r"></div><div class="bl"></div><div class="br"></div><div class="b"></div></div><div id="fancy_overlay"></div><div id="fancy_wrap"><div class="fancy_loading" id="fancy_loading"><div></div></div><div id="fancy_outer"><div id="fancy_inner"><div id="fancy_close"></div><div id="fancy_bg"><div class="fancy_bg fancy_bg_n"></div><div class="fancy_bg fancy_bg_ne"></div><div class="fancy_bg fancy_bg_e"></div><div class="fancy_bg fancy_bg_se"></div><div class="fancy_bg fancy_bg_s"></div><div class="fancy_bg fancy_bg_sw"></div><div class="fancy_bg fancy_bg_w"></div><div class="fancy_bg fancy_bg_nw"></div></div><a href="javascript:;" id="fancy_left"><span class="fancy_ico" id="fancy_left_ico"></span></a><a href="javascript:;" id="fancy_right"><span class="fancy_ico" id="fancy_right_ico"></span></a><div id="fancy_content"></div><div id="fancy_title"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="fancy_title" id="fancy_title_left"></td><td class="fancy_title" id="fancy_title_main"><div></div></td><td class="fancy_title" id="fancy_title_right"></td></tr></tbody></table></div></div></div></div><div id="filuploadShim"></div><div id="p19n723385nrj1mdj1ncp140f10un0_html5_container" class="plupload html5" style="position: absolute; width: 1349px; height: 0px; overflow: hidden; z-index: 99999; opacity: 0; top: 667px; left: 0px; background: transparent;"><input id="p19n723385nrj1mdj1ncp140f10un0_html5" style="width:100%;" type="file" accept="" multiple="multiple"></div></body></html>